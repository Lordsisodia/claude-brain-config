var _e=Object.defineProperty,Be=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var ce=(a,t,r)=>t in a?_e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,I=(a,t)=>{for(var r in t||(t={}))Pe.call(t,r)&&ce(a,r,t[r]);if(de)for(var r of de(t))Re.call(t,r)&&ce(a,r,t[r]);return a},T=(a,t)=>Be(a,Le(t));var K=(a,t,r)=>new Promise((m,c)=>{var d=h=>{try{x(r.next(h))}catch(l){c(l)}},u=h=>{try{x(r.throw(h))}catch(l){c(l)}},x=h=>h.done?m(h.value):Promise.resolve(h.value).then(d,u);x((r=r.apply(a,t)).next())});import{r as f,j as e,d3 as ge,bX as oe,aQ as Z,dB as ee,c3 as be,aM as De,a$ as fe,dC as Y,cG as je,bG as ye,dw as Me,dD as me,X as Fe,R as Ae,aC as ve,am as we,dE as Ee,bH as Ue,bF as We,aS as ue,dF as ze,dG as qe,bp as He,dH as xe,dI as Ke,bO as te,cD as Ne,b7 as Ce,ah as Ve,W as Oe,bs as Ge,bi as Qe,y as Ye,bf as Je,dJ as Xe,U as Ze,bV as et}from"./vendor-C50ijZWh.js";import{A as tt}from"./AdminLayout-BZL16QJ9.js";import{B as st}from"./BulkPlanCreation-DS0AGB-v.js";import{I as q,d as $,K as he,N as ke,u as rt,C as O,a as J,b as ie,c as X,f as V,B as pe,L as at}from"./index-Blbobipf.js";import{D as nt,a as ot,b as it,c as lt}from"./dialog-CB9qAGL5.js";import{S as dt,a as ct,b as mt,c as ut,d as xt}from"./select-Ba1tjTaP.js";import{A as ht}from"./AdminPageTitle-BgXCcQq-.js";import"./libs-B3eAAgHd.js";import"./textarea-B56zo4Tx.js";import"./supabase-D8k0GRjn.js";class U{static generateId(){return`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static parseToBlocks(t){const r=t.split(`
`),m=[];for(const c of r){if(c.trim()===""){m.push({id:this.generateId(),type:"paragraph",content:""});continue}const u=this.parseLine(c);u&&m.push(u)}return{blocks:m}}static parseLine(t){const r=t.trim();if(r.startsWith("# "))return{id:this.generateId(),type:"heading1",content:r.substring(2)};if(r.startsWith("## "))return{id:this.generateId(),type:"heading2",content:r.substring(3)};if(r.startsWith("### "))return{id:this.generateId(),type:"heading3",content:r.substring(4)};if(r.match(/^[-\*\+] /))return{id:this.generateId(),type:"bulleted_list",content:r.substring(2),properties:{level:this.getIndentationLevel(t)}};if(r.match(/^\d+\. /)){const m=r.match(/^(\d+)\. (.*)$/);if(m)return{id:this.generateId(),type:"numbered_list",content:m[2],properties:{level:this.getIndentationLevel(t)}}}if(r.startsWith("> "))return{id:this.generateId(),type:"quote",content:r.substring(2)};if(r.startsWith("```")){const m=r.substring(3).trim();return{id:this.generateId(),type:"code",content:"",properties:{language:m||"text"}}}return r.match(/^(-{3,}|\*{3,}|_{3,})$/)?{id:this.generateId(),type:"divider",content:""}:{id:this.generateId(),type:"paragraph",content:r}}static getIndentationLevel(t){let r=0;for(const m of t)if(m===" ")r++;else if(m==="	")r+=2;else break;return Math.floor(r/2)}static processInlineFormatting(t){return t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/__(.*?)__/g,"<strong>$1</strong>"),t=t.replace(new RegExp("(?<!\\*)\\*([^*]+?)\\*(?!\\*)","g"),"<em>$1</em>"),t=t.replace(new RegExp("(?<!_)_([^_]+?)_(?!_)","g"),"<em>$1</em>"),t=t.replace(/~~(.*?)~~/g,"<del>$1</del>"),t=t.replace(/`([^`]+?)`/g,'<code class="inline-code">$1</code>'),t=t.replace(/\[([^\]]+?)\]\(([^)]+?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:underline">$1</a>'),t}static blocksToMarkdown(t){return t.map(r=>this.blockToMarkdown(r)).join(`
`)}static blockToMarkdown(t){var m,c,d,u,x,h,l,y,k;const r="  ".repeat(((m=t.properties)==null?void 0:m.level)||0);switch(t.type){case"heading1":return`# ${t.content}`;case"heading2":return`## ${t.content}`;case"heading3":return`### ${t.content}`;case"bulleted_list":return`${r}- ${t.content}`;case"numbered_list":return`${r}1. ${t.content}`;case"quote":return`> ${t.content}`;case"code":return`\`\`\`${((c=t.properties)==null?void 0:c.language)||""}
${t.content}
\`\`\``;case"divider":return"---";case"callout":return`> ${((d=t.properties)==null?void 0:d.emoji)||"â„¹ï¸"} ${t.content}`;case"toggle":return`> ${t.content}`;case"table":return this.tableToMarkdown(t);case"image":return`![${(u=t.properties)!=null&&u.caption?` "${t.properties.caption}"`:""}](${((x=t.properties)==null?void 0:x.url)||""})`;case"video":return`[Video: ${((h=t.properties)==null?void 0:h.caption)||"Video"}](${((l=t.properties)==null?void 0:l.url)||""})`;case"embed":return`[Embed: ${((y=t.properties)==null?void 0:y.caption)||"Embedded content"}](${((k=t.properties)==null?void 0:k.url)||""})`;default:return t.content}}static tableToMarkdown(t){var x,h;const r=((x=t.properties)==null?void 0:x.columns)||[],m=((h=t.properties)==null?void 0:h.rows)||[];if(r.length===0||m.length===0)return`| Column 1 | Column 2 | Column 3 |
|----------|----------|----------|`;const c="| "+r.map(l=>l.name).join(" | ")+" |",d="| "+r.map(()=>"--------").join(" | ")+" |",u=m.map(l=>"| "+r.map(k=>{const S=l.cells[k.id]||"";return String(S).replace(/\|/g,"\\|")}).join(" | ")+" |");return[c,d,...u].join(`
`)}static detectFormatting(t,r){const m=t.split(`
`),c=this.getCurrentLineIndex(t,r),d=m[c];if(!d)return{shouldFormat:!1};const u=d.trim();if(u.match(/^#{1,3} \S+/)){const x=u.indexOf(" ");return{shouldFormat:!0,formatType:x===1?"heading1":x===2?"heading2":"heading3",newContent:u.substring(x+1)}}return u.match(/^[-\*\+] \S+/)?{shouldFormat:!0,formatType:"bulleted_list",newContent:u.substring(2)}:u.match(/^\d+\. \S+/)?{shouldFormat:!0,formatType:"numbered_list",newContent:u.replace(/^\d+\. /,"")}:u.match(/^> \S+/)?{shouldFormat:!0,formatType:"quote",newContent:u.substring(2)}:{shouldFormat:!1}}static getCurrentLineIndex(t,r){return t.substring(0,r).split(`
`).length-1}}const pt=({block:a,isEditing:t=!1,onContentChange:r,onBlockUpdate:m})=>{var M,B;const[c,d]=f.useState(null),[u,x]=f.useState(""),[h,l]=f.useState(null),y=((M=a.properties)==null?void 0:M.columns)||[{id:"col1",name:"Column 1",type:"text"},{id:"col2",name:"Column 2",type:"text"},{id:"col3",name:"Column 3",type:"text"}],k=((B=a.properties)==null?void 0:B.rows)||[{id:"row1",cells:{col1:"",col2:"",col3:""}},{id:"row2",cells:{col1:"",col2:"",col3:""}}],S=f.useCallback((i,p)=>{m&&m(a.id,T(I({},a.properties),{columns:i,rows:p}))},[a.id,a.properties,m]),j=(i="text")=>{const p={id:`col_${Date.now()}`,name:u||`Column ${y.length+1}`,type:i},n=k.map(N=>T(I({},N),{cells:T(I({},N.cells),{[p.id]:""})}));S([...y,p],n),x("")},v=()=>{const i={id:`row_${Date.now()}`,cells:y.reduce((p,n)=>T(I({},p),{[n.id]:""}),{})};S(y,[...k,i])},_=i=>{const p=y.filter(N=>N.id!==i),n=k.map(N=>{const b=I({},N.cells);return delete b[i],T(I({},N),{cells:b})});S(p,n)},L=i=>{const p=k.filter(n=>n.id!==i);S(y,p)},P=(i,p,n)=>{const N=k.map(b=>b.id===i?T(I({},b),{cells:T(I({},b.cells),{[p]:n})}):b);S(y,N)},R=(i,p)=>{const n=y.map(N=>N.id===i?T(I({},N),{name:p}):N);S(n,k)},D=i=>{switch(i){case"text":return e.jsx(ee,{className:"w-3 h-3"});case"number":return e.jsx(Y,{className:"w-3 h-3"});case"date":return e.jsx(fe,{className:"w-3 h-3"});case"checkbox":return e.jsx(De,{className:"w-3 h-3"});case"select":return e.jsx(be,{className:"w-3 h-3"});default:return e.jsx(ee,{className:"w-3 h-3"})}},A=(i,p)=>{const n=i.cells[p.id]||"",N=(c==null?void 0:c.rowId)===i.id&&(c==null?void 0:c.columnId)===p.id;if(!N&&!N)return e.jsx("div",{className:"min-h-[32px] px-3 py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center",onClick:()=>N&&d({rowId:i.id,columnId:p.id}),children:p.type==="checkbox"?e.jsx(he,{checked:n===!0,onCheckedChange:b=>N&&P(i.id,p.id,b)}):e.jsx("span",{className:"text-gray-900 dark:text-gray-100 text-sm",children:n||(N?"":"â€”")})});switch(p.type){case"checkbox":return e.jsx("div",{className:"px-3 py-2",children:e.jsx(he,{checked:n===!0,onCheckedChange:b=>P(i.id,p.id,b)})});case"select":return e.jsx("div",{className:"px-1 py-1",children:e.jsxs(dt,{value:n,onValueChange:b=>P(i.id,p.id,b),children:[e.jsx(ct,{className:"h-8 text-sm",children:e.jsx(mt,{placeholder:"Select..."})}),e.jsx(ut,{children:(p.options||["Option 1","Option 2","Option 3"]).map(b=>e.jsx(xt,{value:b,children:b},b))})]})});default:return e.jsx(q,{value:n,onChange:b=>P(i.id,p.id,b.target.value),onBlur:()=>d(null),onKeyDown:b=>{(b.key==="Enter"||b.key==="Escape")&&d(null)},className:"h-8 text-sm border-none shadow-none focus:ring-1 focus:ring-blue-500",autoFocus:!0,type:p.type==="number"?"number":"text"})}};return e.jsx("div",{className:"notion-table-block my-4",children:e.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[e.jsx("div",{className:"border-b border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"flex",children:[y.map((i,p)=>e.jsx("div",{className:"flex-1 min-w-[120px] border-r border-gray-300 dark:border-gray-700 last:border-r-0",children:e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[D(i.type),t?e.jsx(q,{value:i.name,onChange:n=>R(i.id,n.target.value),className:"h-6 text-sm font-medium border-none shadow-none p-0"}):e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:i.name})]}),t&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:()=>l(h===i.id?null:i.id),className:"h-6 w-6 p-0",children:e.jsx(ge,{className:"w-3 h-3"})}),h===i.id&&e.jsx("div",{className:"absolute z-10 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-lg p-2 mt-8",children:e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>_(i.id),className:"text-red-600 hover:text-red-700 text-xs",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Delete"]})})]})]})},i.id)),t&&e.jsx("div",{className:"min-w-[100px] p-2 border-l border-gray-300 dark:border-gray-700",children:e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>j(),className:"h-6 text-xs",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"Column"]})})]})}),e.jsx("div",{children:k.map(i=>e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[y.map(p=>e.jsx("div",{className:"flex-1 min-w-[120px] border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:A(i,p)},`${i.id}-${p.id}`)),t&&e.jsx("div",{className:"min-w-[100px] p-2 border-l border-gray-200 dark:border-gray-700",children:e.jsx($,{variant:"ghost",size:"sm",onClick:()=>L(i.id),className:"h-6 text-xs text-red-600 hover:text-red-700",children:e.jsx(oe,{className:"w-3 h-3"})})})]},i.id))}),t&&e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-2",children:e.jsxs($,{variant:"ghost",size:"sm",onClick:v,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"Add Row"]})})]})})},ne=({block:a,isEditing:t=!1,onContentChange:r,onBlockUpdate:m})=>{var M,B,i,p;const[c,d]=f.useState(!1),[u,x]=f.useState(""),[h,l]=f.useState(!1),y=f.useRef(null),k=((M=a.properties)==null?void 0:M.url)||"",S=((B=a.properties)==null?void 0:B.caption)||"",j=(i=a.properties)==null?void 0:i.width,v=(p=a.properties)==null?void 0:p.height,_=n=>{m&&m(a.id,I(I({},a.properties),n))},L=n=>{var b;const N=(b=n.target.files)==null?void 0:b[0];if(N){const W=URL.createObjectURL(N);_({url:W,caption:N.name})}},P=()=>{u.trim()&&(_({url:u.trim()}),x(""),d(!1))},R=n=>/\.(mp4|webm|ogg|mov)$/i.test(n)||n.includes("youtube.com")||n.includes("vimeo.com")||n.includes("youtu.be"),D=n=>{var N,b,W;return n.includes("youtube.com/watch")?`https://www.youtube.com/embed/${(N=n.split("v=")[1])==null?void 0:N.split("&")[0]}`:n.includes("youtu.be/")?`https://www.youtube.com/embed/${(b=n.split("youtu.be/")[1])==null?void 0:b.split("?")[0]}`:n.includes("vimeo.com/")?`https://player.vimeo.com/video/${(W=n.split("vimeo.com/")[1])==null?void 0:W.split("?")[0]}`:n},A=()=>{if(!k)return e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.type==="image"?e.jsx(je,{className:"w-12 h-12 text-gray-400"}):e.jsx(ye,{className:"w-12 h-12 text-gray-400"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Add ",a.type==="image"?"an image":"a video"]}),t&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>{var b;return(b=y.current)==null?void 0:b.click()},children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Upload file"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Add URL"]})]})]})]}),e.jsx("input",{ref:y,type:"file",accept:a.type==="image"?"image/*":"video/*",onChange:L,className:"hidden"})]});const n=R(k),N=k.includes("youtube.com")||k.includes("vimeo.com")||k.includes("youtu.be");return e.jsxs("div",{className:"relative group",children:[N?e.jsx("div",{className:"relative w-full h-0 pb-[56.25%] rounded-lg overflow-hidden",children:e.jsx("iframe",{src:D(k),className:"absolute top-0 left-0 w-full h-full",frameBorder:"0",allowFullScreen:!0,title:"Embedded video"})}):n?e.jsx("video",{src:k,controls:!0,className:"w-full max-w-full h-auto rounded-lg",style:{width:j||"auto",height:v||"auto"},children:"Your browser does not support the video tag."}):e.jsx("img",{src:k,alt:S||"Uploaded image",className:"max-w-full h-auto rounded-lg",style:{width:j||"auto",height:v||"auto"},onError:b=>{b.currentTarget.src="/api/placeholder/400/300"}}),t&&e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx($,{variant:"secondary",size:"sm",onClick:()=>d(!0),className:"h-8 w-8 p-0",children:e.jsx(me,{className:"w-3 h-3"})}),e.jsx($,{variant:"secondary",size:"sm",onClick:()=>_({url:""}),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(Fe,{className:"w-3 h-3"})})]})})]})};return e.jsxs("div",{className:"notion-media-block my-4",children:[A(),(S||t)&&e.jsx("div",{className:"mt-2",children:h&&t?e.jsx(q,{value:S,onChange:n=>_({caption:n.target.value}),onBlur:()=>l(!1),onKeyDown:n=>{(n.key==="Enter"||n.key==="Escape")&&l(!1)},placeholder:"Add a caption...",className:"text-sm text-center",autoFocus:!0}):e.jsx("p",{className:`text-sm text-gray-600 dark:text-gray-400 text-center ${t?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 rounded px-2 py-1":""}`,onClick:()=>t&&l(!0),children:S||(t?"Click to add caption...":"")})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:["Add ",a.type==="image"?"Image":"Video"," URL"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ke,{htmlFor:"media-url",children:"URL"}),e.jsx(q,{id:"media-url",value:u,onChange:n=>x(n.target.value),placeholder:`Enter ${a.type} URL...`,onKeyDown:n=>{n.key==="Enter"&&P()}})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx($,{variant:"outline",onClick:()=>{d(!1),x("")},children:"Cancel"}),e.jsxs($,{onClick:P,children:["Add ",a.type==="image"?"Image":"Video"]})]})]})]})})]})},Se=({block:a,isEditing:t=!1,onContentChange:r,onBlockTypeChange:m,onBlockUpdate:c})=>{var S;const[d,u]=Ae.useState(!((S=a.properties)!=null&&S.collapsed)),x=j=>{r&&r(a.id,j.currentTarget.textContent||"")},h=j=>U.processInlineFormatting(j),l=j=>{if(j)return j;const v=a.content.toLowerCase();return v.includes("note")||v.includes("info")?"ðŸ“":v.includes("warning")||v.includes("caution")?"âš ï¸":v.includes("tip")||v.includes("hint")?"ðŸ’¡":v.includes("success")||v.includes("complete")?"âœ…":v.includes("error")||v.includes("danger")?"âŒ":"â„¹ï¸"},y=j=>{const v=l(j);return v.includes("âš ï¸")||v.includes("âŒ")?"bg-red-50 border-red-200 dark:bg-red-950/20 dark:border-red-800/30":v.includes("âœ…")||v.includes("ðŸŸ¢")?"bg-green-50 border-green-200 dark:bg-green-950/20 dark:border-green-800/30":v.includes("ðŸ’¡")||v.includes("â­")?"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/20 dark:border-yellow-800/30":"bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-800/30"},k=()=>{var L,P,R,D;const j=t?"outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded px-2 py-1":"",_={marginLeft:`${(((L=a.properties)==null?void 0:L.level)||0)*24}px`};switch(a.type){case"heading1":return e.jsx("h1",{className:`text-3xl font-bold text-gray-900 dark:text-white mb-4 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}});case"heading2":return e.jsx("h2",{className:`text-2xl font-semibold text-gray-900 dark:text-white mb-3 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}});case"heading3":return e.jsx("h3",{className:`text-xl font-medium text-gray-900 dark:text-white mb-2 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}});case"paragraph":return e.jsx("p",{className:`text-gray-700 dark:text-gray-300 mb-2 leading-relaxed ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}});case"bulleted_list":return e.jsxs("div",{className:"flex items-start mb-1",style:_,children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 mr-2 mt-1 text-sm",children:"â€¢"}),e.jsx("div",{className:`text-gray-700 dark:text-gray-300 flex-1 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}})]});case"numbered_list":return e.jsxs("div",{className:"flex items-start mb-1",style:_,children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 mr-2 mt-1 text-sm min-w-[20px]",children:"1."}),e.jsx("div",{className:`text-gray-700 dark:text-gray-300 flex-1 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}})]});case"quote":return e.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-4 py-2 mb-4 bg-gray-50 dark:bg-gray-800/50 rounded-r",children:e.jsx("div",{className:`text-gray-700 dark:text-gray-300 italic ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}})});case"callout":const A=l((P=a.properties)==null?void 0:P.emoji),M=y((R=a.properties)==null?void 0:R.emoji);return e.jsx("div",{className:`border rounded-lg p-4 mb-4 ${M}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-lg mr-3 mt-0.5",children:A}),e.jsx("div",{className:`text-gray-700 dark:text-gray-300 flex-1 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}})]})});case"toggle":return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center cursor-pointer p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded",onClick:()=>u(!d),children:[d?e.jsx(ve,{className:"w-4 h-4 mr-2 text-gray-600 dark:text-gray-400"}):e.jsx(we,{className:"w-4 h-4 mr-2 text-gray-600 dark:text-gray-400"}),e.jsx("div",{className:`text-gray-700 dark:text-gray-300 flex-1 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}})]}),d&&a.children&&e.jsx("div",{className:"ml-6 mt-2",children:a.children.map(B=>e.jsx(Se,{block:B,isEditing:t,onContentChange:r,onBlockTypeChange:m},B.id))})]});case"code":return e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"bg-gray-900 dark:bg-gray-950 rounded-lg overflow-hidden",children:[((D=a.properties)==null?void 0:D.language)&&e.jsx("div",{className:"bg-gray-800 dark:bg-gray-900 px-4 py-2 text-gray-400 text-sm border-b border-gray-700",children:a.properties.language}),e.jsx("pre",{className:"p-4 text-gray-100 text-sm overflow-x-auto",children:e.jsx("code",{className:`block ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,children:a.content})})]})});case"divider":return e.jsx("hr",{className:"border-gray-300 dark:border-gray-600 my-6"});case"table":return e.jsx(pt,{block:a,isEditing:t,onBlockUpdate:c});case"image":return e.jsx(ne,{block:a,isEditing:t,onBlockUpdate:c});case"video":return e.jsx(ne,{block:a,isEditing:t,onBlockUpdate:c});case"embed":return e.jsx(ne,{block:a,isEditing:t,onBlockUpdate:c});default:return e.jsx("div",{className:`text-gray-700 dark:text-gray-300 mb-2 ${j}`,contentEditable:t,suppressContentEditableWarning:!0,onInput:x,dangerouslySetInnerHTML:{__html:h(a.content)}})}};return e.jsx("div",{className:"notion-block",children:k()})},gt=({initialContent:a="",onChange:t,placeholder:r="Type '/' for commands, or start writing...",className:m="",readOnly:c=!1})=>{const[d,u]=f.useState([]),[x,h]=f.useState(!1),[l,y]=f.useState({x:0,y:0}),[k,S]=f.useState(null),[j,v]=f.useState(null),[_,L]=f.useState(""),P=f.useRef(null),R=f.useRef(null),D=f.useRef({});f.useEffect(()=>{if(a&&d.length===0){const s=U.parseToBlocks(a);u(s.blocks)}},[a]),f.useEffect(()=>{if(d.length===0&&!c){const s={id:`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"paragraph",content:""};u([s]),v(s.id)}},[d.length,c]);const A=f.useCallback((s,o)=>{u(C=>{const w=C.map(g=>g.id===s?M(T(I({},g),{content:o})):g);if(t){const g=U.blocksToMarkdown(w);t(g,w)}return w})},[t]),M=s=>{const{content:o}=s;return!o||o.trim().length===0?s:o.startsWith("# ")&&s.type!=="heading1"?T(I({},s),{type:"heading1",content:o.substring(2)}):o.startsWith("## ")&&s.type!=="heading2"?T(I({},s),{type:"heading2",content:o.substring(3)}):o.startsWith("### ")&&s.type!=="heading3"?T(I({},s),{type:"heading3",content:o.substring(4)}):o.startsWith("- ")&&s.type!=="bulleted_list"?T(I({},s),{type:"bulleted_list",content:o.substring(2)}):o.match(/^\d+\. /)&&s.type!=="numbered_list"?T(I({},s),{type:"numbered_list",content:o.replace(/^\d+\. /,"")}):o.startsWith("> ")&&s.type!=="quote"?T(I({},s),{type:"quote",content:o.substring(2)}):o.startsWith("```")&&s.type!=="code"?T(I({},s),{type:"code",content:o.substring(3),properties:{language:"javascript"}}):o.startsWith("> ðŸ’¡ ")&&s.type!=="callout"?T(I({},s),{type:"callout",content:o.substring(5),properties:{emoji:"ðŸ’¡",color:"blue"}}):s},B=f.useCallback((s,o)=>{u(C=>{const w=C.map(g=>g.id===s?T(I({},g),{type:o}):g);if(t){const g=U.blocksToMarkdown(w);t(g,w)}return w})},[t]),i=f.useCallback((s,o)=>{u(C=>{const w=C.map(g=>g.id===s?T(I({},g),{properties:o}):g);if(t){const g=U.blocksToMarkdown(w);t(g,w)}return w})},[t]),p=s=>{const o=window.getSelection();if(!(!o||!P.current)){if(s.key==="/"){setTimeout(()=>{const C=o.getRangeAt(0).getBoundingClientRect();y({x:C.left,y:C.bottom}),h(!0),L("")},10);return}if(x&&s.key.length===1&&!s.ctrlKey&&!s.metaKey){L(C=>C+s.key);return}if(x){if(s.key==="Escape"){h(!1),L("");return}if(s.key==="Backspace"&&_.length>0){L(C=>C.slice(0,-1));return}}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(s.key)&&h(!1),s.metaKey||s.ctrlKey)switch(s.key){case"b":s.preventDefault(),n("bold");return;case"i":s.preventDefault(),n("italic");return;case"u":s.preventDefault(),n("underline");return;case"k":s.preventDefault(),n("link");return}if(s.key==="Enter"&&!s.shiftKey){s.preventDefault(),N();return}if(s.key==="Tab"){s.preventDefault(),b(s.shiftKey);return}if(s.key==="Backspace"){W(s);return}}},n=s=>{const o=window.getSelection();if(!o||o.rangeCount===0)return;const C=o.getRangeAt(0),w=C.toString();if(w){let g="";switch(s){case"bold":g=`**${w}**`;break;case"italic":g=`*${w}*`;break;case"underline":g=`<u>${w}</u>`;break;case"link":g=`[${w}](url)`;break;default:return}C.deleteContents(),C.insertNode(document.createTextNode(g)),o.removeAllRanges()}},N=()=>{if(!window.getSelection())return;const o=document.activeElement,C=o==null?void 0:o.closest("[data-block-id]"),w=C==null?void 0:C.getAttribute("data-block-id");if(w&&d.find(F=>F.id===w)){const F={id:`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"paragraph",content:""},G=d.findIndex(E=>E.id===w),z=[...d.slice(0,G+1),F,...d.slice(G+1)];u(z),v(F.id),setTimeout(()=>{const E=D.current[F.id];if(E){const H=E.querySelector('[contenteditable="true"]');H&&H.focus()}},10)}},b=s=>{console.log("Tab indentation:",s?"reverse":"forward")},W=s=>{const o=window.getSelection();if(!o)return;const C=document.activeElement,w=C==null?void 0:C.closest("[data-block-id]"),g=w==null?void 0:w.getAttribute("data-block-id");if(g){const F=d.find(z=>z.id===g),G=o.anchorOffset===0&&o.focusOffset===0;if(F&&G&&F.content===""){if(s.preventDefault(),d.length===1)return;const z=d.findIndex(E=>E.id===g);if(z>0){const E=d.filter(Q=>Q.id!==g);u(E);const H=E[z-1];v(H.id),setTimeout(()=>{const Q=D.current[H.id];if(Q){const re=Q.querySelector('[contenteditable="true"]');if(re){re.focus();const ae=document.createRange();ae.selectNodeContents(re),ae.collapse(!1),o.removeAllRanges(),o.addRange(ae)}}},10)}}}},le=[{icon:ee,label:"Text",description:"Just start typing with plain text",command:"paragraph",keywords:["text","paragraph","plain"]},{icon:Y,label:"Heading 1",description:"Big section heading",command:"heading1",keywords:["heading","h1","title","big"]},{icon:Y,label:"Heading 2",description:"Medium section heading",command:"heading2",keywords:["heading","h2","subtitle","medium"]},{icon:Y,label:"Heading 3",description:"Small section heading",command:"heading3",keywords:["heading","h3","small"]},{icon:be,label:"Bulleted list",description:"Create a simple bulleted list",command:"bulleted_list",keywords:["bullet","list","unordered","-"]},{icon:Ee,label:"Numbered list",description:"Create a list with numbering",command:"numbered_list",keywords:["number","numbered","ordered","list","1."]},{icon:we,label:"Toggle list",description:"Create a collapsible toggle list",command:"toggle",keywords:["toggle","collapsible","dropdown"]},{icon:Ue,label:"Quote",description:"Capture a quote",command:"quote",keywords:["quote","blockquote",">"]},{icon:We,label:"Callout",description:"Make writing stand out",command:"callout",keywords:["callout","highlight","note","info"]},{icon:ue,label:"Code",description:"Capture a code snippet",command:"code",keywords:["code","snippet","programming","```"]},{icon:ze,label:"Divider",description:"Visually divide blocks",command:"divider",keywords:["divider","separator","hr","---"]},{icon:qe,label:"Table",description:"Create a table",command:"table",keywords:["table","grid","data"]},{icon:je,label:"Image",description:"Insert an image",command:"image",keywords:["image","photo","picture","img"]},{icon:ye,label:"Video",description:"Insert a video",command:"video",keywords:["video","movie","youtube","vimeo"]},{icon:He,label:"Embed",description:"Embed external content",command:"embed",keywords:["embed","external","link","iframe"]}].filter(s=>{if(!_)return!0;const o=_.toLowerCase();return s.label.toLowerCase().includes(o)||s.keywords.some(C=>C.includes(o))}),Ie=s=>{j&&B(j,s),h(!1),L("")},$e=s=>{s.preventDefault();const o=s.clipboardData.getData("text/plain");if(o)if(o.split(`
`).length>1){const w=U.parseToBlocks(o);if(u(g=>[...g,...w.blocks]),t){const g=[...d,...w.blocks],F=U.blocksToMarkdown(g);t(F,g)}}else{const w=window.getSelection();if(w&&w.rangeCount>0){const g=w.getRangeAt(0);g.deleteContents(),g.insertNode(document.createTextNode(o))}}},Te=s=>{v(s),S(s)};return e.jsxs("div",{className:`notion-editor relative ${m}`,children:[e.jsx("div",{ref:P,className:`
          min-h-[300px] p-6 rounded-xl border transition-all duration-200
          bg-slate-800/60 backdrop-blur-sm
          border-slate-600/50
          focus-within:ring-2 focus-within:ring-slate-400/20 focus-within:border-slate-400/40
          hover:border-slate-500/70
          ${c?"cursor-default":"cursor-text"}
        `,onKeyDown:p,onPaste:$e,style:{outline:"none"},children:d.length===0&&!c?e.jsx("div",{className:"text-slate-400 text-lg",children:r}):d.map((s,o)=>e.jsx("div",{"data-block-id":s.id,ref:C=>{C&&(D.current[s.id]=C)},className:`
                notion-block relative group transition-all duration-150
                ${j===s.id?"ring-1 ring-slate-400/20 rounded-lg":""}
                ${o>0?"mt-2":""}
              `,onFocus:()=>Te(s.id),children:e.jsx(Se,{block:s,isEditing:!c,onContentChange:A,onBlockTypeChange:B,onBlockUpdate:i})},s.id))}),x&&!c&&e.jsxs("div",{ref:R,className:"absolute z-50 bg-slate-800/95 border border-slate-600/50 rounded-xl shadow-2xl py-2 min-w-[320px] max-h-[400px] overflow-y-auto backdrop-blur-md",style:{left:l.x,top:l.y+8},children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-slate-400 uppercase tracking-wide border-b border-slate-600/50",children:_?`Filtered by "${_}"`:"Basic blocks"}),le.length>0?le.map(s=>e.jsxs("button",{className:"w-full px-4 py-3 text-left hover:bg-slate-700/60 flex items-center transition-colors duration-150 border-l-2 border-transparent hover:border-slate-400",onClick:()=>Ie(s.command),children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-slate-700/60 rounded-lg mr-3",children:e.jsx(s.icon,{className:"w-4 h-4 text-slate-200"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:s.label}),e.jsx("div",{className:"text-xs text-slate-400",children:s.description})]})]},s.command)):e.jsxs("div",{className:"px-4 py-6 text-center text-slate-400",children:[e.jsx("div",{className:"text-sm",children:"No blocks found"}),e.jsx("div",{className:"text-xs",children:"Try a different search term"})]})]}),!c&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-slate-400",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Type ",e.jsx("kbd",{className:"mx-1 px-2 py-0.5 bg-slate-700/60 rounded text-xs font-mono",children:"/ "}),"for commands"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),e.jsx("kbd",{className:"mx-1 px-2 py-0.5 bg-slate-700/60 rounded text-xs font-mono",children:"âŒ˜B"}),e.jsx("kbd",{className:"mx-1 px-2 py-0.5 bg-slate-700/60 rounded text-xs font-mono",children:"âŒ˜I"}),"for formatting"]})]}),e.jsxs("div",{className:"text-xs",children:[d.length," block",d.length!==1?"s":""]})]})]})};function bt({open:a,onOpenChange:t}){const[r,m]=f.useState(""),[c,d]=f.useState(""),[u,x]=f.useState(""),[h,l]=f.useState([]),[y,k]=f.useState({}),[S,j]=f.useState(""),[v,_]=f.useState(!1),[L,P]=f.useState("notion"),{toast:R}=rt(),D=()=>K(this,null,function*(){const B=L==="notion"?u:c;if(!r.trim()||!B.trim()){R({variant:"destructive",title:"Missing information",description:"Please provide both a title and content."});return}_(!0);try{const i={title:r,raw_content:B,notion_blocks:L==="notion"?h:null,status:"active"},p=r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/^-+|-+$/g,""),n=`${window.location.origin}/plan/share/${p}`;j(n),R({title:"Plan created successfully!",description:"Your shareable plan is ready."})}catch(i){R({variant:"destructive",title:"Error creating plan",description:"Please try again."})}finally{_(!1)}}),A=()=>K(this,null,function*(){S&&(yield navigator.clipboard.writeText(S),R({title:"URL copied!",description:"Share this link with your client."}))}),M=()=>{m(""),d(""),x(""),l([]),k({}),j(""),P("notion")};return e.jsx(nt,{open:a,onOpenChange:t,children:e.jsxs(ot,{className:"max-w-7xl max-h-[95vh] overflow-hidden bg-siso-bg border-siso-border shadow-2xl",children:[e.jsx(it,{className:"border-b border-siso-border pb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-siso-orange/20 rounded-xl border border-siso-orange/30",children:e.jsx(xe,{className:"h-6 w-6 text-siso-orange"})}),e.jsxs("div",{children:[e.jsx(lt,{className:"text-2xl font-bold text-siso-text-bold",children:"Create Shareable App Plan"}),e.jsx("p",{className:"text-siso-text-muted text-sm mt-1",children:"Create beautiful, professional project proposals with our Notion-style editor"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx($,{onClick:D,disabled:v||!r.trim()||!u.trim(),className:"bg-siso-orange hover:bg-siso-orange/90 text-white font-medium px-6 py-2 h-10",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Publish Plan"]})})})]})}),S?e.jsx("div",{className:"p-8 space-y-6",children:e.jsxs(O,{className:"border-green-500/30 bg-gradient-to-br from-green-500/10 to-emerald-500/10",children:[e.jsx(J,{children:e.jsxs(ie,{className:"text-green-400 flex items-center text-xl",children:[e.jsx(te,{className:"mr-3 h-6 w-6"}),"Plan Published Successfully! âœ¨"]})}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-siso-bg-alt rounded-xl p-6 border border-siso-border",children:[e.jsx(ke,{className:"text-siso-text-bold text-sm font-semibold mb-3 block",children:"Shareable URL:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{value:S,readOnly:!0,className:"bg-siso-bg border-siso-border text-siso-text font-mono text-sm"}),e.jsx($,{onClick:A,variant:"outline",className:"border-siso-border hover:bg-siso-bg-alt",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs($,{onClick:()=>window.open(S,"_blank"),className:"bg-siso-orange hover:bg-siso-orange/90 text-white",children:[e.jsx(Ce,{className:"mr-2 w-4 h-4"}),"Preview Plan"]}),e.jsx($,{onClick:()=>{M(),t(!1)},variant:"outline",className:"border-siso-border hover:bg-siso-bg-alt",children:"Close"}),e.jsx($,{onClick:M,variant:"ghost",className:"hover:bg-siso-bg-alt text-siso-text",children:"Create Another Plan"})]})]})]})}):e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-siso-border bg-siso-bg-alt/50",children:[e.jsx(q,{value:r,onChange:B=>m(B.target.value),placeholder:"âœ¨ Untitled Plan",className:"text-3xl font-bold bg-transparent border-none text-siso-text-bold placeholder:text-siso-text-muted/60 focus:ring-0 shadow-none p-0 h-auto",style:{fontSize:"2rem",lineHeight:"2.5rem"}}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 text-sm text-siso-text-muted",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{children:"Ready to edit"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"w-4 h-4 text-siso-orange"}),e.jsx("span",{children:"Rich text editor"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"w-4 h-4 text-siso-orange"}),e.jsx("span",{children:"Auto-formatting enabled"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",style:{height:"calc(95vh - 220px)"},children:e.jsx("div",{className:"px-8 py-6",children:e.jsx(gt,{initialContent:c,onChange:(B,i)=>{d(B),l(i)},placeholder:"Start writing your app plan... Type '/' for commands",className:"notion-editor-enhanced"})})}),e.jsx("div",{className:"px-8 py-4 border-t border-siso-border bg-siso-bg-alt/30",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-6 text-siso-text-muted",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-siso-orange"}),e.jsx("span",{children:"Professional formatting"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-siso-orange"}),e.jsx("span",{children:"Client-ready presentation"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-siso-text-muted",children:r.trim()?"âœ“ Title added":"Add a title to continue"}),e.jsx("span",{className:"text-siso-text-muted",children:"â€¢"}),e.jsx("span",{className:"text-siso-text-muted",children:u.trim()?"âœ“ Content ready":"Start writing content"})]})]})})]})]})})}const ft=[{id:"1",title:"E-commerce App Development Plan",slug:"ecommerce-app-development-plan",view_count:12,status:"active",created_at:new Date().toISOString(),is_public:!0},{id:"2",title:"Social Media Dashboard Plan",slug:"social-media-dashboard-plan",view_count:8,status:"active",created_at:new Date(Date.now()-864e5).toISOString(),is_public:!0},{id:"3",title:"Juice Bar Mobile App Plan",slug:"juice-bar",view_count:5,status:"active",created_at:new Date(Date.now()-1728e5).toISOString(),is_public:!0}];function jt(){const[a,t]=f.useState(!1),[r,m]=f.useState(null),{data:c=[],isLoading:d}=Oe({queryKey:["plan-templates"],queryFn:()=>K(this,null,function*(){return ft})}),u=l=>K(this,null,function*(){const y=`${window.location.origin}/plan/share/${l}`;yield navigator.clipboard.writeText(y),m(l),setTimeout(()=>m(null),2e3)}),x=l=>{window.open(`/plan/share/${l}`,"_blank")},h=l=>{window.open(`/plan/share/${l}`,"_blank")};return e.jsxs("div",{className:"space-y-8",children:[e.jsx(O,{className:"border-siso-border bg-gradient-to-br from-siso-bg/90 via-siso-bg-alt/50 to-siso-bg/90 backdrop-blur-sm shadow-xl rounded-xl",children:e.jsx(J,{className:"pb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ie,{className:"flex items-center text-siso-text-bold text-2xl font-bold",children:[e.jsx(te,{className:"mr-4 h-7 w-7 text-siso-orange"}),"Shareable App Plans"]}),e.jsx("p",{className:"text-siso-text text-base max-w-2xl leading-relaxed",children:"Create professional app plans from ChatGPT content and share with clients via secure URLs. Perfect for proposals, quotes, and project presentations."})]}),e.jsxs($,{onClick:()=>t(!0),className:"bg-gradient-to-r from-siso-red to-siso-orange hover:from-siso-red/90 hover:to-siso-orange/90 text-white shadow-lg hover:shadow-siso-orange/25 transition-all duration-300 px-8 py-3 h-12 rounded-lg font-semibold",size:"lg",children:[e.jsx(Z,{className:"mr-3 h-5 w-5"}),"Create New Plan"]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-siso-text-bold",children:"Your Shareable Plans"}),e.jsxs("div",{className:"text-sm text-siso-text",children:[c.length," plan",c.length!==1?"s":""," created"]})]}),d?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(l=>e.jsxs(O,{className:"border-siso-border bg-siso-bg-alt/50",children:[e.jsxs(J,{className:"space-y-3",children:[e.jsx(V,{className:"h-6 w-3/4 bg-siso-bg"}),e.jsx(V,{className:"h-4 w-1/2 bg-siso-bg"})]}),e.jsxs(X,{className:"space-y-3",children:[e.jsx(V,{className:"h-4 w-full bg-siso-bg"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(V,{className:"h-8 w-16 bg-siso-bg"}),e.jsx(V,{className:"h-8 w-16 bg-siso-bg"})]})]})]},l))}):c.length===0?e.jsx(O,{className:"border-dashed border-2 border-siso-border bg-siso-bg-alt/30 rounded-xl",children:e.jsxs(X,{className:"py-20 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-siso-orange/20 rounded-full flex items-center justify-center mx-auto mb-8 backdrop-blur-sm",children:e.jsx(te,{className:"w-12 h-12 text-siso-orange"})}),e.jsx("h3",{className:"text-2xl font-bold text-siso-text-bold mb-4",children:"No plans created yet"}),e.jsx("p",{className:"text-siso-text mb-8 max-w-md mx-auto text-base leading-relaxed",children:"Create your first shareable app plan to get started. Perfect for client proposals and project presentations."}),e.jsxs($,{onClick:()=>t(!0),className:"bg-gradient-to-r from-siso-red to-siso-orange hover:from-siso-red/90 hover:to-siso-orange/90 text-white h-12 px-8 rounded-lg font-semibold",size:"lg",children:[e.jsx(Z,{className:"mr-3 h-5 w-5"}),"Create Your First Plan"]})]})}):e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:c.map(l=>e.jsxs(O,{className:"border-siso-border bg-gradient-to-br from-siso-bg-alt/90 to-siso-bg/90 hover:from-siso-bg-alt/100 hover:to-siso-bg/100 transition-all duration-300 cursor-pointer group hover:shadow-xl hover:shadow-siso-orange/10 hover:border-siso-orange/30 rounded-xl backdrop-blur-sm",onClick:()=>h(l.slug),children:[e.jsx(J,{className:"pb-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ie,{className:"text-siso-text-bold text-lg group-hover:text-siso-orange transition-colors duration-200 truncate font-semibold",children:l.title}),e.jsxs("div",{className:"flex items-center mt-3 space-x-3",children:[l.is_public&&e.jsx(pe,{className:"bg-green-500/20 text-green-400 border-green-500/30 text-xs px-3 py-1",children:"Public"}),e.jsx(pe,{variant:"outline",className:"text-siso-text border-siso-border text-xs px-3 py-1",children:l.status})]})]})})}),e.jsxs(X,{className:"pt-0 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-siso-text",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2 text-siso-orange"}),e.jsx("span",{className:"text-siso-text-bold font-semibold",children:l.view_count}),e.jsx("span",{className:"ml-1",children:"views"})]}),e.jsxs("div",{className:"flex items-center text-siso-text",children:[e.jsx(fe,{className:"w-4 h-4 mr-2 text-green-400"}),e.jsx("span",{className:"text-siso-text-bold font-semibold",children:new Date(l.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"text-xs text-siso-text-muted bg-siso-bg-alt/50 rounded-lg px-3 py-2 font-mono border border-siso-border",children:["/plan/share/",l.slug]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),u(l.slug)},className:"text-siso-text hover:text-siso-text-bold hover:bg-siso-bg-alt/50 flex-1 h-9 rounded-lg transition-all duration-200",children:r===l.slug?e.jsx("span",{className:"text-green-400 text-xs font-medium",children:"Copied!"}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"Copy URL"})]})}),e.jsx($,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),x(l.slug)},className:"text-siso-text hover:text-siso-text-bold hover:bg-siso-bg-alt/50 h-9 w-9 rounded-lg transition-all duration-200",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"sm",onClick:y=>y.stopPropagation(),className:"text-siso-text hover:text-siso-text-bold hover:bg-siso-bg-alt/50 h-9 w-9 rounded-lg transition-all duration-200",children:e.jsx(Qe,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"sm",onClick:y=>y.stopPropagation(),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20 h-9 w-9 rounded-lg transition-all duration-200",children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]},l.id))})]}),e.jsx(bt,{open:a,onOpenChange:t})]})}function Bt(){const{isAdmin:a,isLoading:t}=at(),r=Ye(),[m,c]=f.useState(!1);return f.useEffect(()=>{!t&&!a&&r("/")},[a,t,r]),t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Je,{className:"w-8 h-8 animate-spin text-siso-orange"})}):a?e.jsx(tt,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-siso-bg via-siso-bg-alt to-siso-bg",children:e.jsxs("div",{className:"container mx-auto px-6 py-12",children:[e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:"bg-siso-bg-alt/50 backdrop-blur-sm border border-siso-border rounded-2xl p-8 shadow-2xl",children:[e.jsx(ht,{icon:Xe,title:"Plan Templates",subtitle:"Bulk-create or manage your plan templates for efficient client onboarding"}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("div",{className:"flex items-center text-siso-text",children:[e.jsx("div",{className:"w-2 h-2 bg-siso-orange rounded-full mr-3"}),e.jsx("span",{children:"Bulk Creation Tools"})]}),e.jsxs("div",{className:"flex items-center text-siso-text",children:[e.jsx("div",{className:"w-2 h-2 bg-siso-red rounded-full mr-3"}),e.jsx("span",{children:"Shareable Plans Management"})]})]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>c(!m),className:"border-siso-border bg-siso-bg-alt/60 text-siso-text hover:bg-siso-bg hover:text-siso-text-bold",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Bulk Tools",m?e.jsx(et,{className:"w-4 h-4 ml-2"}):e.jsx(ve,{className:"w-4 h-4 ml-2"})]})]})]})}),e.jsxs("div",{className:"space-y-12",children:[m&&e.jsx("div",{className:"animate-in slide-in-from-top-4 duration-300",children:e.jsx(st,{})}),e.jsx(jt,{})]})]})})}):null}export{Bt as default};
