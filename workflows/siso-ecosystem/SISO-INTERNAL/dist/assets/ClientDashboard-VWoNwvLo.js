import{j as e,a7 as h,dl as j,a9 as u,aY as b,ah as f,y as g,r as N,b8 as p}from"./vendor-C50ijZWh.js";import{a as C,u as v}from"./useClientDetails-DIBTW9oN.js";import{f as a,C as r,a as l,b as o,g as w,c,d as m,l as y}from"./index-Blbobipf.js";import{C as k}from"./ClientDashboardLayout-D1WKB6Kc.js";import{P}from"./ProfileSkeleton-Dgbx7v9e.js";import"./libs-B3eAAgHd.js";import"./supabase-D8k0GRjn.js";import"./sidebar-DSZsRBzS.js";import"./separator-BNrJR0ZO.js";import"./sheet-EfhB7uWf.js";function S(){var x;const{isClient:i,loading:n}=C(),{clientData:s,loading:t}=v();return n||t?e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{className:"h-8 w-64 mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{className:"h-40"}),e.jsx(a,{className:"h-40"}),e.jsx(a,{className:"h-40"}),e.jsx(a,{className:"h-40"})]})]}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:(s==null?void 0:s.company_name)||"Welcome"}),e.jsx("p",{className:"text-muted-foreground",children:"Your project dashboard"})]}),e.jsx("div",{children:e.jsx(m,{className:"w-full sm:w-auto",children:"View Project Status"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r,{className:"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-700",children:[e.jsx(l,{className:"pb-2",children:e.jsxs(o,{className:"text-base flex items-center",children:[e.jsx(j,{className:"mr-2 h-4 w-4 text-blue-400"}),"Projects"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.project_name)||"No project"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Current project"})]})]}),e.jsxs(r,{className:"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-700",children:[e.jsx(l,{className:"pb-2",children:e.jsxs(o,{className:"text-base flex items-center",children:[e.jsx(u,{className:"mr-2 h-4 w-4 text-green-400"}),"Tasks"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((x=s==null?void 0:s.todos)==null?void 0:x.length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Outstanding tasks"})]})]}),e.jsxs(r,{className:"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-700",children:[e.jsx(l,{className:"pb-2",children:e.jsxs(o,{className:"text-base flex items-center",children:[e.jsx(b,{className:"mr-2 h-4 w-4 text-purple-400"}),"Progress"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?`${s.current_step}/${s.total_steps}`:"0/0"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Project milestones"})]})]}),e.jsxs(r,{className:"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-700",children:[e.jsx(l,{className:"pb-2",children:e.jsxs(o,{className:"text-base flex items-center",children:[e.jsx(f,{className:"mr-2 h-4 w-4 text-amber-400"}),"Documents"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"View"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Project documentation"})]})]})]})]}):e.jsxs(r,{className:"border border-yellow-600/30 bg-yellow-600/10",children:[e.jsxs(l,{children:[e.jsx(o,{children:"Not linked to a client account"}),e.jsx(w,{children:"You don't have access to client features."})]}),e.jsxs(c,{children:[e.jsx("p",{className:"mb-4 text-sm",children:"Your account is not currently linked to a client profile. If you believe this is an error, please contact your account manager."}),e.jsx(m,{variant:"outline",asChild:!0,children:e.jsx(h,{to:"/home",children:"Go to Dashboard"})})]})]})}const L=({children:i,allowUnauth:n=!0})=>{const{user:s,loading:t}=y(),d=g();return N.useEffect(()=>{!t&&!s&&!n&&d("/auth")},[s,t,d,n]),t?e.jsx(P,{}):e.jsx(e.Fragment,{children:i})};function R(){return e.jsxs(L,{children:[e.jsx(p,{children:e.jsx("title",{children:"Client Dashboard | SISO Agency"})}),e.jsx(k,{children:e.jsx(S,{})})]})}export{R as default};
