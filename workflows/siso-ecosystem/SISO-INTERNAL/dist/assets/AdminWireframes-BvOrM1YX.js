var K=Object.defineProperty,O=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var q=(a,t,i)=>t in a?K(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i,v=(a,t)=>{for(var i in t||(t={}))X.call(t,i)&&q(a,i,t[i]);if(F)for(var i of F(t))Z.call(t,i)&&q(a,i,t[i]);return a},N=(a,t)=>O(a,Q(t));var y=(a,t,i)=>new Promise((T,m)=>{var b=d=>{try{c(i.next(d))}catch(l){m(l)}},p=d=>{try{c(i.throw(d))}catch(l){m(l)}},c=d=>d.done?T(d.value):Promise.resolve(d.value).then(b,p);c((i=i.apply(a,t)).next())});import{r as g,j as e,dW as $,bf as B,bi as ee,c_ as se,dI as ae,bI as re}from"./vendor-C50ijZWh.js";import{A as te}from"./AdminLayout-BZL16QJ9.js";import{E as x,s as w,d as u,C as W,c as E,a as I,b as L,B as j,g as V,n as M,I as U}from"./index-Blbobipf.js";import{T as ie}from"./textarea-B56zo4Tx.js";import{S as _,a as C,b as k,c as S,d as n}from"./select-Ba1tjTaP.js";import{T as le,a as ne,b as R,c as z}from"./tabs-CsM4ZGNr.js";import"./libs-B3eAAgHd.js";import"./supabase-D8k0GRjn.js";function ce({projectId:a}){const[t,i]=g.useState([]),[T,m]=g.useState(!0),[b,p]=g.useState(!1),[c,d]=g.useState(null),[l,h]=g.useState({title:"",description:"",category:"page",notion_link:"",wireframe_status:"planned",specs_status:"pending",dev_status:"pending"});g.useEffect(()=>{a&&A()},[a]);const A=()=>y(this,null,function*(){try{if(m(!0),!a){x({title:"Error loading wireframes",description:"No project ID provided",variant:"destructive"}),m(!1);return}const{data:s,error:r}=yield w.from("project_wireframes").select("*").eq("project_id",a).order("created_at",{ascending:!1});if(r)throw r;i(s||[]),m(!1)}catch(s){const r=s instanceof Error?s.message:"Failed to load wireframes";x({title:"Error loading wireframes",description:r,variant:"destructive"}),m(!1)}}),D=s=>{h(N(v({},l),{[s.target.name]:s.target.value}))},f=(s,r)=>{h(N(v({},l),{[s]:r}))},H=()=>{d(null),h({title:"",description:"",category:"page",notion_link:"",wireframe_status:"planned",specs_status:"pending",dev_status:"pending"})},Y=s=>{d(s),h({title:s.title,description:s.description||"",category:s.category,notion_link:s.notion_link||"",wireframe_status:s.wireframe_status,specs_status:s.specs_status,dev_status:s.dev_status})},G=s=>y(this,null,function*(){try{const{error:r}=yield w.from("project_wireframes").delete().eq("id",s);if(r)throw r;x({title:"Wireframe deleted",description:"The wireframe has been removed successfully."}),A()}catch(r){const o=r instanceof Error?r.message:"Failed to delete wireframe";x({title:"Error deleting wireframe",description:o,variant:"destructive"})}}),J=s=>y(this,null,function*(){if(s.preventDefault(),!a){x({title:"Error saving wireframe",description:"No project ID provided",variant:"destructive"});return}try{p(!0);const r=N(v({},l),{project_id:a});let o;if(c?o=yield w.from("project_wireframes").update(r).eq("id",c.id):o=yield w.from("project_wireframes").insert(r),o.error)throw o.error;x({title:c?"Wireframe updated":"Wireframe added",description:c?"The wireframe has been updated successfully.":"A new wireframe has been added successfully."}),h({title:"",description:"",category:"page",notion_link:"",wireframe_status:"planned",specs_status:"pending",dev_status:"pending"}),d(null),A(),p(!1)}catch(r){const o=r instanceof Error?r.message:"Failed to save wireframe";x({title:"Error saving wireframe",description:o,variant:"destructive"}),p(!1)}}),P=s=>{switch(s){case"complete":return e.jsx(j,{className:"bg-emerald-600",children:"Complete"});case"approved":return e.jsx(j,{className:"bg-blue-600",children:"Approved"});case"in-progress":return e.jsx(j,{className:"bg-amber-600",children:"In Progress"});case"planned":case"pending":default:return e.jsx(j,{className:"bg-gray-600",children:"Pending"})}};return e.jsxs(le,{defaultValue:"list",className:"space-y-6",children:[e.jsxs(ne,{className:"bg-black/40 border border-gray-800",children:[e.jsx(R,{value:"list",children:"Wireframe List"}),e.jsx(R,{value:"edit",children:c?"Edit Wireframe":"Add Wireframe"})]}),e.jsxs(z,{value:"list",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Project Wireframes"}),e.jsxs(u,{variant:"default",onClick:H,className:"bg-indigo-600 hover:bg-indigo-700",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Wireframe"]})]}),T?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(B,{className:"h-8 w-8 animate-spin text-indigo-500"})}):e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx(W,{className:"bg-black/20 border-gray-800",children:e.jsx(E,{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-400",children:"No wireframes found. Create one to get started."})})}):t.map(s=>e.jsxs(W,{className:"bg-black/20 border-gray-800",children:[e.jsxs(I,{className:"pb-2",children:[e.jsxs(L,{className:"flex justify-between",children:[e.jsx("span",{children:s.title}),e.jsx(j,{className:"bg-slate-700",children:s.category})]}),e.jsx(V,{className:"text-gray-400",children:s.description||"No description provided"})]}),e.jsx(E,{className:"pb-2",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Wireframe Status"}),P(s.wireframe_status)]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Specs Status"}),P(s.specs_status)]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Dev Status"}),P(s.dev_status)]})]})}),e.jsxs(M,{className:"flex justify-between pt-2",children:[e.jsx("div",{className:"text-xs text-gray-400",children:s.notion_link?e.jsx("a",{href:s.notion_link,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300",children:"View Notion Doc"}):e.jsx("span",{children:"No Notion link provided"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>Y(s),className:"h-8 px-2 text-blue-400 border-blue-900/50 hover:bg-blue-900/20",children:e.jsx(ee,{className:"h-3.5 w-3.5"})}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>G(s.id),className:"h-8 px-2 text-red-400 border-red-900/50 hover:bg-red-900/20",children:e.jsx(se,{className:"h-3.5 w-3.5"})})]})]})]},s.id))})]}),e.jsx(z,{value:"edit",children:e.jsxs(W,{className:"bg-black/20 border-gray-800",children:[e.jsxs(I,{children:[e.jsx(L,{children:c?"Edit Wireframe":"Add New Wireframe"}),e.jsx(V,{children:c?"Update the details for this wireframe":"Create a new wireframe for the project"})]}),e.jsxs("form",{onSubmit:J,children:[e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Title"}),e.jsx(U,{name:"title",value:l.title,onChange:D,placeholder:"Enter wireframe title",className:"bg-black/30 border-gray-700",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Description"}),e.jsx(ie,{name:"description",value:l.description,onChange:D,placeholder:"Enter wireframe description",className:"bg-black/30 border-gray-700 min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Category"}),e.jsxs(_,{value:l.category,onValueChange:s=>f("category",s),children:[e.jsx(C,{className:"bg-black/30 border-gray-700",children:e.jsx(k,{placeholder:"Select category"})}),e.jsxs(S,{className:"bg-slate-900 border-gray-700",children:[e.jsx(n,{value:"page",children:"Page"}),e.jsx(n,{value:"component",children:"Component"}),e.jsx(n,{value:"layout",children:"Layout"}),e.jsx(n,{value:"user-flow",children:"User Flow"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Notion Link"}),e.jsx(U,{name:"notion_link",value:l.notion_link,onChange:D,placeholder:"Enter Notion document URL",className:"bg-black/30 border-gray-700"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Wireframe Status"}),e.jsxs(_,{value:l.wireframe_status,onValueChange:s=>f("wireframe_status",s),children:[e.jsx(C,{className:"bg-black/30 border-gray-700",children:e.jsx(k,{placeholder:"Select status"})}),e.jsxs(S,{className:"bg-slate-900 border-gray-700",children:[e.jsx(n,{value:"planned",children:"Planned"}),e.jsx(n,{value:"in-progress",children:"In Progress"}),e.jsx(n,{value:"complete",children:"Complete"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Specs Status"}),e.jsxs(_,{value:l.specs_status,onValueChange:s=>f("specs_status",s),children:[e.jsx(C,{className:"bg-black/30 border-gray-700",children:e.jsx(k,{placeholder:"Select status"})}),e.jsxs(S,{className:"bg-slate-900 border-gray-700",children:[e.jsx(n,{value:"pending",children:"Pending"}),e.jsx(n,{value:"in-review",children:"In Review"}),e.jsx(n,{value:"approved",children:"Approved"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Development Status"}),e.jsxs(_,{value:l.dev_status,onValueChange:s=>f("dev_status",s),children:[e.jsx(C,{className:"bg-black/30 border-gray-700",children:e.jsx(k,{placeholder:"Select status"})}),e.jsxs(S,{className:"bg-slate-900 border-gray-700",children:[e.jsx(n,{value:"pending",children:"Pending"}),e.jsx(n,{value:"in-progress",children:"In Progress"}),e.jsx(n,{value:"complete",children:"Complete"})]})]})]})]})]}),e.jsxs(M,{className:"flex justify-between",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>{d(null),h({title:"",description:"",category:"page",notion_link:"",wireframe_status:"planned",specs_status:"pending",dev_status:"pending"})},className:"border-gray-700",children:"Cancel"}),e.jsxs(u,{type:"submit",disabled:b,className:"bg-indigo-600 hover:bg-indigo-700",children:[b&&e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(ae,{className:"mr-2 h-4 w-4"}),c?"Update Wireframe":"Save Wireframe"]})]})]})]})})]})}function be(){const{projectId:a}=re();return e.jsx(te,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(W,{className:"bg-black/20 border-gray-800 mb-6",children:[e.jsxs(I,{children:[e.jsx(L,{className:"text-2xl font-bold text-white",children:"Wireframes Management"}),e.jsx(V,{className:"text-gray-400",children:"Add, edit, and manage project wireframes and their documentation links"})]}),e.jsx(E,{children:e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"This panel allows administrators to manage wireframes that are shown to clients. You can track wireframe status, add Notion document links, and manage the development pipeline."})})]}),e.jsx(ce,{projectId:a})]})})}export{be as default};
