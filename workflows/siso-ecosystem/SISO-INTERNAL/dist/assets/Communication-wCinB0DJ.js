var u=(t,a,i)=>new Promise((l,r)=>{var n=o=>{try{h(i.next(o))}catch(m){r(m)}},x=o=>{try{h(i.throw(o))}catch(m){r(m)}},h=o=>o.done?l(o.value):Promise.resolve(o.value).then(n,x);h((i=i.apply(t,a)).next())});import{r as c,j as e,cE as R,aQ as z,cF as I,cG as F,cH as E,cI as T,cJ as D,cK as O,at as Q,cL as G,b5 as C,b4 as U,O as B,b8 as $}from"./vendor-C50ijZWh.js";import{A as q}from"./AppLayout-BhL6t15E.js";import{h as v,l as P,u as V,s as w,C as H,a as Y,b as K,g as X,c as Z,d as b,n as J,W as _}from"./index-Blbobipf.js";import{F as ee}from"./FloatingOrbs-BtBv6Li9.js";import{T as k,a as A,b as j,c as g}from"./tabs-CsM4ZGNr.js";import{T as se}from"./textarea-B56zo4Tx.js";import{S as N}from"./switch-Bq0gP_2G.js";import"./libs-B3eAAgHd.js";import"./MainLayout-CYr31jBl.js";import"./supabase-D8k0GRjn.js";function te({minHeight:t,maxHeight:a}){const i=c.useRef(null),l=c.useCallback(r=>{const n=i.current;if(!n)return;if(r){n.style.height=`${t}px`;return}n.style.height=`${t}px`;const x=Math.max(t,Math.min(n.scrollHeight,a));n.style.height=`${x}px`},[t,a]);return c.useEffect(()=>{const r=i.current;r&&(r.style.height=`${t}px`)},[t]),c.useEffect(()=>{const r=()=>l();return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[l]),{textareaRef:i,adjustHeight:l}}function ae(){const[t,a]=c.useState(""),{textareaRef:i,adjustHeight:l}=te({minHeight:60,maxHeight:200}),r=n=>{n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),t.trim()&&(a(""),l(!0)))};return e.jsxs("div",{className:"flex flex-col items-center w-full max-w-4xl mx-auto p-4 space-y-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"What can I help you ship?"}),e.jsxs("div",{className:"w-full shadow-lg",children:[e.jsxs("div",{className:"relative bg-neutral-900/90 backdrop-blur-sm rounded-xl border border-neutral-800",children:[e.jsx("div",{className:"overflow-y-auto",children:e.jsx(se,{ref:i,value:t,onChange:n=>{a(n.target.value),l()},onKeyDown:r,placeholder:"Ask v0 a question...",className:v("w-full px-4 py-3","resize-none","bg-transparent","border-none","text-white text-sm","focus:outline-none","focus-visible:ring-0 focus-visible:ring-offset-0","placeholder:text-neutral-500 placeholder:text-sm","min-h-[60px]"),style:{overflow:"hidden"}})}),e.jsxs("div",{className:"flex items-center justify-between p-3 border-t border-neutral-800",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{type:"button",className:"group p-2 hover:bg-neutral-800 rounded-lg transition-colors flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-xs text-zinc-400 hidden group-hover:inline transition-opacity",children:"Attach"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",className:"px-2 py-1 rounded-lg text-sm text-zinc-400 transition-colors border border-dashed border-zinc-700 hover:border-zinc-600 hover:bg-zinc-800 flex items-center justify-between gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),"Project"]}),e.jsxs("button",{type:"button",className:v("px-1.5 py-1.5 rounded-lg text-sm transition-colors border border-zinc-700 hover:border-zinc-600 hover:bg-zinc-800 flex items-center justify-between gap-1",t.trim()?"bg-white text-black":"text-zinc-400"),children:[e.jsx(I,{className:v("w-4 h-4",t.trim()?"text-black":"text-zinc-400")}),e.jsx("span",{className:"sr-only",children:"Send"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-8 px-4",children:[e.jsx(p,{icon:e.jsx(F,{className:"w-4 h-4"}),label:"Clone a Screenshot"}),e.jsx(p,{icon:e.jsx(E,{className:"w-4 h-4"}),label:"Import from Figma"}),e.jsx(p,{icon:e.jsx(T,{className:"w-4 h-4"}),label:"Upload a Project"}),e.jsx(p,{icon:e.jsx(D,{className:"w-4 h-4"}),label:"Landing Page"}),e.jsx(p,{icon:e.jsx(O,{className:"w-4 h-4"}),label:"Sign Up Form"})]})]})]})}function p({icon:t,label:a}){return e.jsxs("button",{type:"button",className:`group flex items-center gap-3 px-5 py-3 bg-neutral-900/80 hover:bg-neutral-800/80 
                rounded-xl border border-neutral-800/50 hover:border-neutral-700 text-neutral-400 
                hover:text-white transition-all duration-300 backdrop-blur-sm shadow-lg 
                shadow-black/20 hover:shadow-neutral-500/20 hover:-translate-y-0.5`,children:[e.jsx("div",{className:"transition-transform duration-300 group-hover:scale-110",children:t}),e.jsx("span",{className:"text-sm font-medium",children:a})]})}function ne(){const{user:t}=P(),[a,i]=c.useState(!1),[l,r]=c.useState(!1),[n,x]=c.useState(null),[h,o]=c.useState(!0),[m,S]=c.useState([]),{toast:f}=V();c.useEffect(()=>{t&&y()},[t]);const y=()=>u(this,null,function*(){try{const{data:s,error:d}=yield w.functions.invoke("whatsapp-integration",{body:{action:"status"}});if(d)throw d;i(s.connected),s.qrCode&&x(s.qrCode),s.messages&&S(s.messages)}catch(s){console.error("Error checking WhatsApp status:",s)}}),L=()=>u(this,null,function*(){r(!0);try{const{data:s,error:d}=yield w.functions.invoke("whatsapp-integration",{body:{action:"connect"}});if(d)throw d;s.qrCode&&(x(s.qrCode),f({title:"QR Code Generated",description:"Scan the QR code with WhatsApp on your phone",duration:5e3}))}catch(s){console.error("Error connecting to WhatsApp:",s),f({title:"Connection Failed",description:"Failed to connect to WhatsApp. Please try again.",variant:"destructive"})}finally{r(!1)}}),W=()=>u(this,null,function*(){try{const{error:s}=yield w.functions.invoke("whatsapp-integration",{body:{action:"disconnect"}});if(s)throw s;i(!1),x(null),f({title:"Disconnected",description:"Successfully disconnected from WhatsApp",duration:3e3})}catch(s){console.error("Error disconnecting WhatsApp:",s)}}),M=()=>u(this,null,function*(){const s=!h;o(s);try{const{error:d}=yield w.functions.invoke("whatsapp-integration",{body:{action:"settings",autoForward:s}});if(d)throw d;f({title:"Settings Updated",description:`Auto-forward ${s?"enabled":"disabled"}`})}catch(d){console.error("Error updating settings:",d),o(!s)}});return e.jsxs(H,{className:"border-white/10 bg-black/30 backdrop-blur-sm",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-xl text-white",children:"WhatsApp Integration"}),e.jsx(X,{className:"text-gray-400",children:"Connect your SISO Assistant to WhatsApp"})]}),e.jsx("div",{className:"flex items-center gap-2 bg-black/20 rounded-full px-3 py-1.5 border border-white/10",children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"h-2 w-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-green-500 text-sm font-medium",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"h-2 w-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-red-500 text-sm font-medium",children:"Disconnected"})]})})]})}),e.jsx(Z,{children:e.jsxs(k,{defaultValue:a?"messages":"connect",className:"w-full",children:[e.jsxs(A,{className:"grid grid-cols-3 mb-4 bg-black/20",children:[e.jsx(j,{value:"connect",children:"Connection"}),e.jsx(j,{value:"messages",children:"Messages"}),e.jsx(j,{value:"settings",children:"Settings"})]}),e.jsx(g,{value:"connect",className:"space-y-4",children:a?e.jsxs("div",{className:"flex flex-col items-center text-center gap-4 p-6",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-green-500/10 flex items-center justify-center",children:e.jsx(Q,{className:"h-8 w-8 text-green-500"})}),e.jsx("h3",{className:"text-xl font-medium text-white",children:"WhatsApp Connected"}),e.jsx("p",{className:"text-gray-400 max-w-lg",children:"Your SISO Assistant is now linked to your WhatsApp account. Messages will be synchronized between platforms."}),e.jsx(b,{variant:"destructive",className:"mt-2",onClick:W,children:"Disconnect WhatsApp"})]}):e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[n?e.jsx("div",{className:"bg-white p-4 rounded-lg",children:e.jsx("img",{src:n,alt:"WhatsApp QR Code",className:"w-64 h-64 object-contain"})}):e.jsx("div",{className:"h-32 w-32 rounded-full bg-black/40 flex items-center justify-center",children:e.jsx(G,{className:"h-16 w-16 text-gray-500"})}),e.jsxs("div",{className:"space-y-2 max-w-lg",children:[e.jsx("h3",{className:"text-xl font-medium text-white",children:"Connect to WhatsApp"}),e.jsx("p",{className:"text-gray-400",children:"Link your WhatsApp account to sync messages between SISO Assistant and WhatsApp."}),e.jsxs("ol",{className:"text-left text-gray-400 text-sm space-y-1 mt-4",children:[e.jsx("li",{children:'1. Click the "Generate QR Code" button below'}),e.jsx("li",{children:"2. Open WhatsApp on your phone"}),e.jsx("li",{children:"3. Go to Settings > Linked Devices > Link a Device"}),e.jsx("li",{children:"4. Scan the QR code with your phone"})]})]}),e.jsx(b,{className:"bg-green-600 hover:bg-green-700 mt-2",onClick:L,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating QR Code..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Generate QR Code"]})})]})}),e.jsx(g,{value:"messages",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Recent Messages"}),m.length>0?e.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:m.map(s=>e.jsxs("div",{className:`p-3 rounded-lg flex items-start gap-2 ${s.from==="app"?"bg-siso-red/20 ml-8":"bg-gray-800/50 mr-8"}`,children:[e.jsx("div",{className:`p-1 rounded-full ${s.from==="app"?"bg-siso-red/30":"bg-green-600/30"}`,children:s.from==="app"?e.jsx("svg",{className:"h-3 w-3 text-siso-red",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.8214 2.48697 15.5291 3.33782 17L2.5 21.5L7 20.6622C8.47087 21.513 10.1786 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):e.jsxs("svg",{className:"h-3 w-3 text-green-500",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3.51 12.177C2.857 11.211 2.5 10.09 2.5 9C2.5 5.5 5.5 2.5 9 2.5C12.5 2.5 15.5 5.5 15.5 9C15.5 12.5 12.5 15.5 9 15.5C7.91 15.5 6.789 15.143 5.823 14.49L2.5 15.5L3.51 12.177Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.5 9C10.5 12.5 13.5 15.5 17 15.5C18.09 15.5 19.211 15.143 20.177 14.49L23.5 15.5L22.49 12.177C23.143 11.211 23.5 10.09 23.5 9C23.5 5.5 20.5 2.5 17 2.5C15.167 2.5 13.523 3.361 12.5 4.715",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-white",children:s.content}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleTimeString()}),s.from==="app"&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.status==="read"?e.jsx("svg",{className:"h-3 w-3 text-blue-400",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4.5 12.75L10.5 18.75L19.5 5.25",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):s.status==="delivered"?e.jsx("svg",{className:"h-3 w-3 text-gray-400",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4.5 12.75L10.5 18.75M10.5 18.75L19.5 5.25M10.5 18.75L19.5 18.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):e.jsx("svg",{className:"h-3 w-3 text-gray-400",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4.5 12.75L10.5 18.75L19.5 5.25",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s.status]})]})]})]},s.id))}):e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-400",children:"No recent messages"})}),e.jsx("div",{className:"pt-4 border-t border-white/5",children:e.jsxs(b,{variant:"outline",className:"w-full bg-black/40 border-white/10 hover:bg-black/60",onClick:y,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Refresh Message History"]})})]})}),e.jsxs(g,{value:"settings",className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Messaging Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Auto-forward messages"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Automatically send messages to WhatsApp"})]}),e.jsx(N,{checked:h,onCheckedChange:M,disabled:!a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"WhatsApp notifications"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Receive notification on WhatsApp"})]}),e.jsx(N,{disabled:!a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Save chat history"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Store conversations for later reference"})]}),e.jsx(N,{defaultChecked:!0,disabled:!a})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"General Settings"}),e.jsxs(b,{variant:"outline",className:"w-full bg-black/40 border-white/10 hover:bg-black/60 flex justify-between",disabled:!a,children:[e.jsx("span",{children:"Account Settings"}),e.jsx(B,{className:"h-4 w-4"})]})]})]})]})}),e.jsxs(J,{className:"flex justify-between border-t border-white/10 pt-4",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Messages sent through this integration are end-to-end encrypted"}),a&&e.jsxs("span",{className:"text-xs flex items-center gap-1 text-green-500",children:[e.jsx("span",{className:"h-1.5 w-1.5 bg-green-500 rounded-full animate-pulse"}),"Active"]})]})]})}function je(){return e.jsxs(q,{children:[e.jsx($,{children:e.jsx("title",{children:"SISO Assistant | SISO Resource Hub"})}),e.jsxs("div",{className:"relative flex flex-col min-h-screen w-full",children:[e.jsx("div",{className:"absolute inset-0 z-0",children:e.jsx(ee,{})}),e.jsx("div",{className:"absolute inset-0 z-10",children:e.jsx(_,{lineColor:"rgba(249, 115, 22, 0.15)",backgroundColor:"transparent",waveSpeedX:.018,waveSpeedY:.015,waveAmpX:70,waveAmpY:35,friction:.92,tension:.012,maxCursorMove:180,xGap:22,yGap:55})}),e.jsxs("div",{className:"relative z-20 container mx-auto px-4 py-8 flex flex-col flex-1",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"SISO Assistant"}),e.jsx("p",{className:"text-gray-400",children:"Your AI assistant to help with project planning and communication"})]}),e.jsxs(k,{defaultValue:"chat",className:"flex-1 flex flex-col",children:[e.jsxs(A,{className:"grid grid-cols-2 w-full max-w-md mb-6 bg-black/30",children:[e.jsx(j,{value:"chat",children:"AI Assistant"}),e.jsx(j,{value:"integrations",children:"Integrations"})]}),e.jsx(g,{value:"chat",className:"flex-1 flex flex-col",children:e.jsx(ae,{})}),e.jsxs(g,{value:"integrations",className:"space-y-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Communication Channels"}),e.jsx(ne,{}),e.jsxs("div",{className:"mt-8 p-4 border border-white/10 bg-black/30 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"About WhatsApp Integration"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Link your WhatsApp account to SISO Assistant to receive messages and updates directly on your phone. Your conversations will be synced between platforms, allowing you to continue discussions seamlessly whether you're on this platform or on WhatsApp."})]})]})]})]})]})]})}export{je as default};
