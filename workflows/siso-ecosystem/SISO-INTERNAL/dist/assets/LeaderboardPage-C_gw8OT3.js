var W=Object.defineProperty,Y=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var A=(a,t,l)=>t in a?W(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,L=(a,t)=>{for(var l in t||(t={}))Z.call(t,l)&&A(a,l,t[l]);if(P)for(var l of P(t))q.call(t,l)&&A(a,l,t[l]);return a},M=(a,t)=>Y(a,G(t));import{j as e,bT as J,a$ as K,a2 as $,c9 as X,y as E,m as I,af as H,aZ as ee,U as C,bN as se,ch as ae,aY as te,ci as R,H as g,cj as re,ck as b,cl as le,r as v}from"./vendor-C50ijZWh.js";import{A as ie}from"./AppLayout-BhL6t15E.js";import{I as ne,d as ce,h as w,C as j,a as oe,b as xe,c as p,m as de}from"./index-Blbobipf.js";import{S as _,a as D,b as B,c as V,d as c}from"./select-Ba1tjTaP.js";import{T as me,a as he,b as ge,c as o,d as je,e as x}from"./table-DWISvnW8.js";import{a$ as pe}from"./libs-B3eAAgHd.js";import{u as ue}from"./useLeaderboardData-BugUZV8I.js";import{S as Ne}from"./spotlight-BmxDEuBt.js";import"./MainLayout-CYr31jBl.js";import"./supabase-D8k0GRjn.js";const be=({onSearchChange:a,onPeriodChange:t,onCategoryChange:l})=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(ne,{placeholder:"Search users...",className:"pl-10 bg-gray-900 border-gray-700 text-white placeholder-gray-400",onChange:d=>a(d.target.value)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),e.jsxs(_,{defaultValue:"week",onValueChange:t,children:[e.jsx(D,{className:"w-[140px] bg-gray-900 border-gray-700 text-white",children:e.jsx(B,{placeholder:"Time Period"})}),e.jsxs(V,{className:"bg-gray-900 border-gray-700 text-white",children:[e.jsx(c,{value:"today",className:"text-white hover:bg-gray-800",children:"Today"}),e.jsx(c,{value:"week",className:"text-white hover:bg-gray-800",children:"This Week"}),e.jsx(c,{value:"month",className:"text-white hover:bg-gray-800",children:"This Month"}),e.jsx(c,{value:"year",className:"text-white hover:bg-gray-800",children:"This Year"}),e.jsx(c,{value:"all",className:"text-white hover:bg-gray-800",children:"All Time"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx($,{className:"h-4 w-4 text-gray-400"}),e.jsxs(_,{defaultValue:"all",onValueChange:l,children:[e.jsx(D,{className:"w-[140px] bg-gray-900 border-gray-700 text-white",children:e.jsx(B,{placeholder:"Category"})}),e.jsxs(V,{className:"bg-gray-900 border-gray-700 text-white",children:[e.jsx(c,{value:"all",className:"text-white hover:bg-gray-800",children:"All Categories"}),e.jsx(c,{value:"points",className:"text-white hover:bg-gray-800",children:"Points"}),e.jsx(c,{value:"spending",className:"text-white hover:bg-gray-800",children:"Spending"}),e.jsx(c,{value:"contributions",className:"text-white hover:bg-gray-800",children:"Contributions"}),e.jsx(c,{value:"referrals",className:"text-white hover:bg-gray-800",children:"Referrals"})]})]})]}),e.jsx(ce,{variant:"outline",size:"icon",className:"bg-gray-900 border-gray-700 text-white h-10 w-10 hover:bg-gray-800",children:e.jsx(X,{className:"h-4 w-4"})})]})]}),fe=({leaderboardData:a,onUserClick:t})=>{const l=E(),d=s=>{var r,n;return(r=s.profile)!=null&&r.full_name?s.profile.full_name:(n=s.profile)!=null&&n.email?s.profile.email.split("@")[0]:"Anonymous User"},m=s=>{if(!s)return"Unknown";try{return pe(new Date(s),"MMM d, yyyy")}catch(r){return console.error("Error formatting date:",r),"Unknown"}},u=s=>{switch(s){case 0:return e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"h-6 w-6 text-yellow-500"}),e.jsx(I.div,{className:"absolute inset-0 rounded-full bg-yellow-500/20",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]});case 1:return e.jsx(R,{className:"h-6 w-6 text-gray-300"});case 2:return e.jsx(R,{className:"h-6 w-6 text-amber-600"});default:return null}},f=s=>{const n=[{value:-4,isUp:!1},{value:5,isUp:!0},{value:-1,isUp:!1},{value:-2,isUp:!1},{value:4,isUp:!0},{value:-2,isUp:!1},{value:-1,isUp:!1},{value:1,isUp:!0},{value:5,isUp:!0},{value:4,isUp:!0}][s]||{value:0,isUp:!1};return e.jsxs("span",{className:w("inline-flex items-center text-xs",n.isUp?"text-green-500":"text-red-500"),children:[n.isUp?e.jsx(g,{className:"w-3 h-3 mr-1"}):e.jsx(re,{className:"w-3 h-3 mr-1"}),n.isUp?"+":"-",Math.abs(n.value)]})},S=s=>s>=1e4?e.jsx("span",{className:"px-2 py-0.5 text-xs bg-purple-500/30 text-purple-200 rounded-full",children:"Premium"}):s>=5e3?e.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-500/30 text-yellow-200 rounded-full",children:"Gold"}):s>=1e3?e.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-500/30 text-gray-200 rounded-full",children:"Silver"}):e.jsx("span",{className:"px-2 py-0.5 text-xs bg-orange-500/30 text-orange-200 rounded-full",children:"Bronze"}),y=s=>{const r=s.id.startsWith("project-")?s.id:`project-${s.id}`;l(`/client-app/${r}`),t(s)},T=s=>[15e3,5e3,249,249,249,0,0,0,0,0][s]||0;return e.jsx("div",{className:"relative overflow-x-auto rounded-lg border border-gray-700 bg-black",children:e.jsxs(me,{children:[e.jsx(he,{className:"sticky top-0 bg-gray-900 z-10",children:e.jsxs(ge,{className:"border-b border-gray-800",children:[e.jsx(o,{className:"w-[80px] text-center text-gray-300",children:"Rank"}),e.jsx(o,{className:"text-gray-300",children:"Name"}),e.jsx(o,{className:"text-center text-gray-300",children:"Points"}),e.jsx(o,{className:"text-center text-gray-300",children:"Trend"}),e.jsx(o,{className:"text-center text-gray-300",children:"Spending"}),e.jsx(o,{className:"text-center text-gray-300",children:"Contributions"}),e.jsx(o,{className:"text-center text-gray-300",children:"Referrals"}),e.jsx(o,{className:"text-center text-gray-300",children:"SISO Tokens"}),e.jsx(o,{className:"text-center text-gray-300",children:"Last Active"})]})}),e.jsx(je,{children:a.map((s,r)=>{var h;const n=T(r);return e.jsxs(I.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.05},className:w("transition-all duration-200 cursor-pointer group text-white border-b border-gray-800",r===0?"bg-yellow-500/10 hover:bg-yellow-500/20":r===1?"bg-gray-500/10 hover:bg-gray-500/20":r===2?"bg-amber-500/10 hover:bg-amber-500/20":r<10?"bg-gray-800/50 hover:bg-gray-800/70":"hover:bg-gray-800/30"),onClick:()=>y(s),children:[e.jsx(x,{className:"text-center font-medium",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u(r),e.jsx("span",{className:w("font-bold",r<3?"text-white":"text-gray-300"),children:r+1})]})}),e.jsx(x,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-siso-red to-siso-orange flex items-center justify-center text-white font-bold",children:d(s).charAt(0)}),s.achievements&&s.achievements.length>0&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-siso-orange rounded-full flex items-center justify-center text-[10px] text-white",children:s.achievements.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:d(s)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:s.rank||"Rookie"}),S(n),((h=s.profile)==null?void 0:h.bio)&&e.jsxs("p",{className:"text-xs text-gray-300",children:[e.jsx("span",{className:"text-green-500",children:"●"})," ",s.profile.bio]})]})]})]})}),e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"font-medium",children:s.points||0})]})}),e.jsx(x,{className:"text-center",children:f(r)}),e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-siso-text/70"}),e.jsxs("span",{children:["£",n.toLocaleString()]})]})}),e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-siso-text/70"}),e.jsx("span",{children:s.contribution_count||0})]})}),e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-siso-text/70"}),e.jsx("span",{children:s.referral_count||0})]})}),e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-siso-orange"}),e.jsx("span",{className:"font-medium",children:s.siso_tokens||0})]})}),e.jsx(x,{className:"text-center text-siso-text/70",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:m(s.updated_at)})]})})]},s.id)})})]})})},ye=({filteredData:a,onUserClick:t,onSearchChange:l,onPeriodChange:d,onCategoryChange:m})=>e.jsxs(j,{className:"border-siso-border bg-black text-white",children:[e.jsx(oe,{className:"border-b border-gray-800",children:e.jsxs(xe,{className:"flex items-center justify-between text-white",children:[e.jsx("span",{className:"text-white font-bold",children:"Leaderboard Rankings"}),e.jsxs("span",{className:"text-sm font-normal text-gray-300",children:["Top ",Math.min(a.length,100)," Users"]})]})}),e.jsxs(p,{className:"bg-black",children:[e.jsx(be,{onSearchChange:l,onPeriodChange:d,onCategoryChange:m}),e.jsx(fe,{leaderboardData:a,onUserClick:t})]})]}),ve=({totalUsers:a,totalPoints:t,totalSisoTokens:l})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(j,{className:"bg-gray-900 border-gray-700 hover:border-gray-600 transition-all duration-300",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Users"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:e.jsx(b,{end:a,delay:0,decimals:0})}),e.jsxs("span",{className:"text-xs text-green-500 flex items-center",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),"+5%"]})]})]}),e.jsx(C,{className:"h-8 w-8 text-siso-orange opacity-80"})]})})}),e.jsx(j,{className:"bg-gray-900 border-gray-700 hover:border-gray-600 transition-all duration-300",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Points"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:e.jsx(b,{end:t,delay:0,decimals:0})}),e.jsxs("span",{className:"text-xs text-green-500 flex items-center",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),"+12%"]})]})]}),e.jsx(H,{className:"h-8 w-8 text-siso-orange opacity-80"})]})})}),e.jsx(j,{className:"bg-gray-900 border-gray-700 hover:border-gray-600 transition-all duration-300",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total SISO Tokens"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:e.jsx(b,{end:l,delay:0,decimals:0})}),e.jsxs("span",{className:"text-xs text-green-500 flex items-center",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),"+8%"]})]})]}),e.jsx(le,{className:"h-8 w-8 text-siso-orange opacity-80"})]})})}),e.jsx(j,{className:"bg-gray-900 border-gray-700 hover:border-gray-600 transition-all duration-300",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Daily Active Users"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:e.jsx(b,{end:Math.floor(a*.4),delay:0,decimals:0})}),e.jsxs("span",{className:"text-xs text-green-500 flex items-center",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),"+15%"]})]})]}),e.jsx(C,{className:"h-8 w-8 text-siso-orange opacity-80"})]})})})]});function Re(){const{entries:a,stats:t,filter:l,setFilter:d}=ue(),m=E();de();const[u,f]=v.useState(""),[S,y]=v.useState("week"),[T,s]=v.useState("all"),r=a.filter(i=>{var k,U;return((U=(k=i.profile)==null?void 0:k.full_name)==null?void 0:U.toLowerCase().includes(u.toLowerCase()))||u===""}),n=i=>{i.id&&m(`/client-app/${i.id}`)},h=i=>{f(i)},z=i=>{y(i),d(M(L({},l),{timeframe:i}))},F=i=>{s(i)},O=a.reduce((i,N)=>i+N.points,0);a.length;const Q=a.reduce((i,N)=>i+(N.siso_tokens||0),0);return e.jsx(ie,{children:e.jsx("div",{className:"p-4 md:p-8 bg-black",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"-top-40 left-0"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-siso-red to-siso-orange bg-clip-text text-transparent mb-2",children:"Community Leaderboard"}),e.jsxs("p",{className:"text-gray-300",children:["Track community contributions, points earned, and rewards across the SISO platform.",e.jsx("span",{className:"text-white font-medium ml-1",children:"Click on any user to view their app details!"})]})]}),e.jsx(ve,{totalUsers:t.totalParticipants,totalPoints:O,totalSisoTokens:Q}),e.jsx(ye,{filteredData:r,onUserClick:n,onSearchChange:h,onPeriodChange:z,onCategoryChange:F})]})})})})}export{Re as default};
