var A=Object.defineProperty,P=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var v=(r,a,s)=>a in r?A(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,D=(r,a)=>{for(var s in a||(a={}))k.call(a,s)&&v(r,s,a[s]);if(_)for(var s of _(a))q.call(a,s)&&v(r,s,a[s]);return r},y=(r,a)=>P(r,U(a));var C=(r,a,s)=>new Promise((m,u)=>{var x=n=>{try{l(s.next(n))}catch(c){u(c)}},o=n=>{try{l(s.throw(n))}catch(c){u(c)}},l=n=>n.done?m(n.value):Promise.resolve(n.value).then(x,o);l((s=s.apply(r,a)).next())});import{r as i,j as e,ah as I,cA as z,bM as B,dS as G,cG as M,f7 as R}from"./vendor-C50ijZWh.js";import{u as W,f as p,I as H,C as S,d as J,s as f}from"./index-Blbobipf.js";import{C as F}from"./ClientDashboardLayout-D1WKB6Kc.js";import"./libs-B3eAAgHd.js";import"./supabase-D8k0GRjn.js";import"./sidebar-DSZsRBzS.js";import"./separator-BNrJR0ZO.js";import"./sheet-EfhB7uWf.js";function te(){const[r,a]=i.useState([]),[s,m]=i.useState(!0),[u,x]=i.useState(null),{toast:o}=W(),[l,n]=i.useState("");i.useEffect(()=>{C(this,null,function*(){try{const{data:{user:d}}=yield f.auth.getUser();if(!d)return;const{data:h,error:L}=yield f.rpc("get_client_by_user_id",{user_uuid:d.id});if(L||!h||h.length===0)return;const N=h[0].client_id;x(N);const{data:E,error:w}=yield f.from("client_documents").select("*").eq("client_id",N).order("created_at",{ascending:!1});if(w)throw w;const T=(E||[]).map(b=>y(D({},b),{document_type:b.document_type}));a(T)}catch(d){console.error("Error fetching documents:",d),o({variant:"destructive",title:"Error",description:"Failed to load documents"})}finally{m(!1)}})},[o]);const c=t=>{switch(t){case"app_plan":return e.jsx(R,{className:"h-5 w-5 text-orange-500"});case"functionalities":return e.jsx(I,{className:"h-5 w-5 text-blue-500"});case"wireframes":return e.jsx(M,{className:"h-5 w-5 text-purple-500"});case"inspiration":return e.jsx(G,{className:"h-5 w-5 text-green-500"});default:return e.jsx(B,{className:"h-5 w-5 text-slate-500"})}},j=t=>{switch(t){case"app_plan":return"App Plan";case"functionalities":return"Functionalities";case"wireframes":return"Wireframes";case"inspiration":return"Inspiration";default:return t}},g=r.filter(t=>t.title.toLowerCase().includes(l.toLowerCase())||j(t.document_type).toLowerCase().includes(l.toLowerCase()));return s?e.jsx(F,{children:e.jsxs("div",{children:[e.jsx(p,{className:"h-10 w-48 mb-6"}),e.jsx(p,{className:"h-12 w-full mb-6 rounded-lg"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4,5,6].map(t=>e.jsx(p,{className:"h-32 w-full rounded-lg"},t))})]})}):e.jsx(F,{children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-slate-900",children:"Documents"}),e.jsx("div",{className:"mb-6",children:e.jsx(H,{placeholder:"Search documents...",value:l,onChange:t=>n(t.target.value),className:"max-w-md"})}),g.length===0?e.jsxs(S,{className:"p-8 text-center",children:[e.jsx(I,{className:"h-12 w-12 mx-auto text-slate-300 mb-3"}),e.jsx("h2",{className:"text-xl font-medium mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-slate-500 mb-6",children:r.length===0?"No documents have been shared with you yet.":"No documents match your search criteria."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(t=>e.jsx(S,{className:"p-5 border border-slate-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-md",children:c(t.document_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-slate-900 truncate",title:t.title,children:t.title}),e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:j(t.document_type)}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Updated: ",new Date(t.updated_at).toLocaleDateString()]})]}),e.jsx(J,{variant:"ghost",size:"sm",className:"mt-0.5",children:e.jsx(z,{className:"h-4 w-4"})})]})},t.id))})]})})}export{te as default};
