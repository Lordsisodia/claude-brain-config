var f=(u,o,r)=>new Promise((c,i)=>{var a=t=>{try{s(r.next(t))}catch(e){i(e)}},h=t=>{try{s(r.throw(t))}catch(e){i(e)}},s=t=>t.done?c(t.value):Promise.resolve(t.value).then(a,h);s((r=r.apply(u,o)).next())});import{r as l,j as n}from"./vendor-C50ijZWh.js";import{s as d}from"./index-Blbobipf.js";import"./libs-B3eAAgHd.js";import"./supabase-D8k0GRjn.js";const j=({children:u})=>{const[o,r]=l.useState(!0),[c,i]=l.useState(!1);return l.useEffect(()=>{let a=!0;f(void 0,null,function*(){try{const{data:{session:t}}=yield d.auth.getSession();if(!a)return;if(t!=null&&t.user)i(!0);else{window.location.href="/auth/login";return}}catch(t){if(console.error("Partner auth check error:",t),a){window.location.href="/auth/login";return}}finally{a&&r(!1)}});const{data:{subscription:s}}=d.auth.onAuthStateChange((t,e)=>{a&&(t==="SIGNED_OUT"||!e?window.location.href="/auth/login":t==="SIGNED_IN"&&(e!=null&&e.user)&&(i(!0),r(!1)))});return()=>{a=!1,s.unsubscribe()}},[]),o?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500 mx-auto"}),n.jsx("p",{className:"text-gray-400",children:"Verifying authentication..."})]})}):c?n.jsx(n.Fragment,{children:u}):null};export{j as PartnerAuthGuard};
