var He=Object.defineProperty,Ke=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var be=(s,n,t)=>n in s?He(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t,R=(s,n)=>{for(var t in n||(n={}))We.call(n,t)&&be(s,t,n[t]);if(je)for(var t of je(n))qe.call(n,t)&&be(s,t,n[t]);return s},Y=(s,n)=>Ke(s,$e(n));var w=(s,n,t)=>new Promise((r,l)=>{var a=m=>{try{x(t.next(m))}catch(p){l(p)}},o=m=>{try{x(t.throw(m))}catch(p){l(p)}},x=m=>m.done?r(m.value):Promise.resolve(m.value).then(a,o);x((t=t.apply(s,n)).next())});import{j as e,r as v,a1 as ze,a$ as ae,dS as Ye,d2 as Qe,dT as re,c$ as fe,d3 as Te,cD as Ze,dq as Xe,c_ as Le,bT as Je,c9 as es,dU as ss,aQ as ts,dV as ee,bf as as,b7 as rs,bw as ns,bi as Fe,b0 as J,aY as ne,at as oe,dW as Se,dX as Pe,ae as os}from"./vendor-C50ijZWh.js";import{A as is}from"./AdminLayout-BZL16QJ9.js";import{s as U,E as f,C as A,a as O,b as T,c as D,$ as I,R as cs,U as H,V as K,X as $,Y as W,I as k,Z as q,d as j,h as ds,g as ls,D as ie,t as ce,v as de,w as Me,Q as V,x as xs,B as ms,P as ps}from"./index-Blbobipf.js";import{T as le,a as xe,b as M,c as Z}from"./tabs-CsM4ZGNr.js";import{bQ as ke,c7 as us,bV as hs,c5 as gs,c8 as vs,bS as Ve,c9 as Ne,cd as ys,ca as js,cb as bs,c6 as fs,cc as Ss,bI as Ns,bG as ws,a$ as we,ce as Es,bH as se,cf as As,c4 as Cs,b_ as Ds,b$ as Is}from"./libs-B3eAAgHd.js";import{E as Os,f as Ge,d as Re,c as Ts}from"./ExpenseCreditCard-jMGJpaKL.js";import{D as me,f as Ls,a as pe,b as ue,c as he,e as ge,d as Fs}from"./dialog-CB9qAGL5.js";import{C as Ps}from"./calendar-CM33CvjS.js";import{P as Ms,a as ks,b as Vs}from"./popover-BCE2rLYx.js";import{S as Ee,a as Ae,b as Ce,c as De,d as F}from"./select-Ba1tjTaP.js";import{T as Gs,a as Rs,b as X,c as _,d as _s,e as P}from"./table-DWISvnW8.js";import{T as Us}from"./textarea-B56zo4Tx.js";import{A as Bs}from"./AdminPageTitle-BgXCcQq-.js";import"./supabase-D8k0GRjn.js";import"./glow-effect-BkabJgn5.js";function Hs({data:s}){const n=s.length>0?s:[{name:"Jan",revenue:0,expense:0},{name:"Feb",revenue:0,expense:0},{name:"Mar",revenue:0,expense:0}];return e.jsx(ke,{width:"100%",height:350,children:e.jsxs(us,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorExpense",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#EF4444",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#EF4444",stopOpacity:0})]})]}),e.jsx(hs,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(gs,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(vs,{strokeDasharray:"3 3",stroke:"#444444"}),e.jsx(Ve,{contentStyle:{backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"6px"},labelStyle:{color:"#F9FAFB"}}),e.jsx(Ne,{type:"monotone",dataKey:"revenue",stroke:"#10B981",fillOpacity:1,fill:"url(#colorRevenue)",name:"Revenue"}),e.jsx(Ne,{type:"monotone",dataKey:"expense",stroke:"#EF4444",fillOpacity:1,fill:"url(#colorExpense)",name:"Expense"})]})})}function _e(s){return w(this,null,function*(){try{const n=s.map(a=>w(this,null,function*(){const{data:o,error:x}=yield U.from("expense_categories").select("id").eq("name",a.category).single(),{data:m,error:p}=yield U.from("vendors").select("id").eq("name",a.vendor).single();return x||p?(console.error("Error finding category or vendor:",x||p),null):Y(R({},a),{category_id:o==null?void 0:o.id,vendor_id:m==null?void 0:m.id})})),r=(yield Promise.all(n)).filter(a=>a!==null),{error:l}=yield U.from("financial_transactions").insert(r.map(a=>({id:ys(),description:a.description,amount:a.amount,date:a.date,type:"expense",category_id:a.category_id,vendor_id:a.vendor_id,status:"completed",currency:"GBP",recurring_type:a.recurring_type||"one-time"})));return l?(console.error("Error inserting transactions:",l),f({title:"Error",description:"Failed to add expenses",variant:"destructive"}),!1):(f({title:"Success",description:"Expenses added successfully"}),!0)}catch(n){return console.error("Unexpected error adding transactions:",n),f({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),!1}})}const h={SAAS:"SaaS",DEVELOPMENT:"Development Tools",AI_TOOLS:"AI Tools",CLOUD:"Cloud Services",HOSTING:"Hosting & Domains",COMMUNICATION:"Communication",DESIGN:"Design Tools",PRODUCTIVITY:"Productivity",SUBSCRIPTION:"Subscriptions",OTHER_SOFTWARE:"Other Software"},z={UTILITIES:"Utilities",SERVICES:"Services",HARDWARE:"Hardware",UNCATEGORIZED:"Uncategorized"},Ie={notion:h.SAAS,airtable:h.SAAS,manychat:h.SAAS,loom:h.SAAS,tempmail:h.SAAS,make:h.SAAS,esuit:h.SAAS,supabase:h.DEVELOPMENT,render:h.DEVELOPMENT,vercel:h.DEVELOPMENT,flutterflow:h.DEVELOPMENT,"kode lab":h.DEVELOPMENT,cursor:h.DEVELOPMENT,openai:h.AI_TOOLS,elevenlabs:h.AI_TOOLS,replicate:h.AI_TOOLS,midjourney:h.AI_TOOLS,lovable:h.AI_TOOLS,"oai widget":h.AI_TOOLS,"google cloud":h.CLOUD,aws:h.CLOUD,"amazon web services":h.CLOUD,gcp:h.CLOUD,"google drive":h.CLOUD,godaddy:h.HOSTING,akismet:h.HOSTING,elementor:h.HOSTING,wpstarterpack:h.HOSTING,"google workspace":h.COMMUNICATION,voiceflow:h.COMMUNICATION,envato:h.DESIGN,tradingview:h.PRODUCTIVITY,medium:h.SUBSCRIPTION,"virgin media":z.UTILITIES,"sim cards":z.HARDWARE,apify:h.DEVELOPMENT,marsproxy:z.SERVICES,proxy:z.SERVICES};function Ue(s){return Array.isArray(s)?s.map(n=>{var a,o,x;const t=((a=n.description)==null?void 0:a.toLowerCase())||"",r=((x=(o=n.vendor)==null?void 0:o.name)==null?void 0:x.toLowerCase())||"";let l=null;if(r){for(const[m,p]of Object.entries(Ie))if(r.includes(m.toLowerCase())){l=p;break}}if(!l){for(const[m,p]of Object.entries(Ie))if(t.includes(m.toLowerCase())){l=p;break}}return l||(l=z.UNCATEGORIZED),Y(R({},n),{detected_category:l})}):[]}function Ks(s){const n=Ue(s),t={};return n.forEach(r=>{const l=r.detected_category||z.UNCATEGORIZED;t[l]||(t[l]={total:0,count:0,expenses:[]}),t[l].total+=r.amount,t[l].count+=1,t[l].expenses.push(r)}),t}function $s({expenses:s}){const n=Ks(s),t=Object.values(h),r=Object.entries(n).filter(([o])=>t.includes(o)).map(([o,x])=>({name:o,value:x.total,count:x.count})).sort((o,x)=>x.value-o.value),l=r.reduce((o,x)=>o+x.value,0),a=["#FFA726","#FF5722","#FF8A65","#FFCC80","#FFB74D","#FF7043","#FFAB40","#FFB300","#FF6F00","#E65100"];return e.jsxs(A,{className:"bg-siso-bg-alt border-siso-border",children:[e.jsx(O,{children:e.jsx(T,{className:"text-lg text-siso-text-bold",children:"Software Expense Breakdown"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-siso-text-muted",children:"Total Software Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-siso-text-bold",children:I(l,"GBP")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-siso-text-muted",children:"Categories"}),e.jsx("p",{className:"text-lg text-siso-text-bold",children:r.length})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(ke,{width:"100%",height:"100%",children:e.jsxs(js,{children:[e.jsx(bs,{data:r,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#FFA726",dataKey:"value",label:({name:o,percent:x})=>`${o} ${(x*100).toFixed(0)}%`,children:r.map((o,x)=>e.jsx(fs,{fill:a[x%a.length]},`cell-${x}`))}),e.jsx(Ve,{formatter:o=>I(o,"GBP"),contentStyle:{backgroundColor:"#1C1C1E",border:"1px solid #FFA726",borderRadius:"8px",color:"#FFFFFF"}}),e.jsx(Ss,{wrapperStyle:{color:"#FFFFFF"}})]})})}),e.jsx("div",{className:"space-y-2 mt-4",children:r.map((o,x)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:a[x%a.length]}}),e.jsx("span",{className:"text-sm text-siso-text",children:o.name})]}),e.jsxs("div",{className:"text-sm font-medium text-siso-text-bold",children:[I(o.value,"GBP"),e.jsxs("span",{className:"text-xs text-siso-text-muted ml-1",children:["(",o.count,")"]})]})]},o.name))})]})]})}function Ws(){const[s,n]=v.useState([]),[t,r]=v.useState(!0),[l,a]=v.useState("all");v.useEffect(()=>{function i(){return w(this,null,function*(){try{const u=yield Ge();Array.isArray(u)&&n(u)}catch(u){console.error("Failed to load transactions for dashboard:",u)}finally{r(!1)}})}i()},[]);const o=()=>{const i=new Date;return{month:new Date(i.getFullYear(),i.getMonth(),1),quarter:new Date(i.getFullYear(),Math.floor(i.getMonth()/3)*3,1),year:new Date(i.getFullYear(),0,1),all:new Date(0)}[l]},x=s.filter(i=>new Date(i.date)>=o()),m=x.filter(i=>i.type==="expense"),p=x.filter(i=>i.type==="revenue"),E=m.reduce((i,u)=>i+u.amount,0),b=p.reduce((i,u)=>i+u.amount,0),S=m.filter(i=>i.recurring_type==="monthly").reduce((i,u)=>i+Number(u.amount),0),c=b-E,d=b>0?c/b*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-siso-text-bold",children:"Financial Overview"}),e.jsx(le,{defaultValue:"all",value:l,onValueChange:a,className:"w-[400px]",children:e.jsxs(xe,{className:"grid grid-cols-4 bg-siso-bg-alt border-siso-border",children:[e.jsx(M,{value:"month",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"Month"}),e.jsx(M,{value:"quarter",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"Quarter"}),e.jsx(M,{value:"year",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"Year"}),e.jsx(M,{value:"all",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"All Time"})]})})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Os,{currentCosts:E,predictedCosts:S})}),e.jsxs(A,{className:"bg-siso-bg-alt border-siso-border",children:[e.jsx(O,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(T,{className:"text-sm font-medium text-siso-text",children:"Total Revenue"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-siso-text-bold",children:t?e.jsx("div",{className:"h-6 w-24 bg-siso-bg animate-pulse rounded"}):I(b,"GBP")}),e.jsxs("p",{className:"text-xs text-siso-text-muted mt-1",children:["From ",p.length," transactions"]})]})]}),e.jsxs(A,{className:"bg-siso-bg-alt border-siso-border",children:[e.jsx(O,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(T,{className:"text-sm font-medium text-siso-text",children:"Net Profit"})}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${c>=0?"text-green-400":"text-red-400"}`,children:t?e.jsx("div",{className:"h-6 w-24 bg-siso-bg animate-pulse rounded"}):I(c,"GBP")}),e.jsx("p",{className:"text-xs text-siso-text-muted mt-1",children:c>=0?"Profit":"Loss"})]})]}),e.jsxs(A,{className:"bg-siso-bg-alt border-siso-border",children:[e.jsx(O,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(T,{className:"text-sm font-medium text-siso-text",children:"Profit Margin"})}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${d>=0?"text-green-400":"text-red-400"}`,children:t?e.jsx("div",{className:"h-6 w-24 bg-siso-bg animate-pulse rounded"}):`${d.toFixed(1)}%`}),e.jsx("p",{className:"text-xs text-siso-text-muted mt-1",children:d>=20?"Healthy":d>=0?"Moderate":"Negative"})]})]})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-1 lg:grid-cols-2",children:[e.jsxs(A,{className:"col-span-1 bg-siso-bg-alt border-siso-border",children:[e.jsx(O,{children:e.jsx(T,{className:"text-siso-text-bold",children:"Revenue vs. Expenses"})}),e.jsx(D,{children:e.jsx(Hs,{data:x.map(i=>({name:new Date(i.date).toLocaleDateString("en-US",{month:"short"}),revenue:i.type==="revenue"?i.amount:0,expense:i.type==="expense"?i.amount:0}))})})]}),e.jsx($s,{expenses:m})]})]})}function qs(s=[]){const[n,t]=v.useState(""),[r,l]=v.useState(null),[a,o]=v.useState(null);v.useEffect(()=>{console.log(`useExpensesTableData received ${s.length} expenses`)},[s]);const x=v.useMemo(()=>Array.isArray(s)?s.filter(m=>{var S,c,d,i,u;if(!m)return!1;const p=n.toLowerCase(),E=!n||((S=m.description)==null?void 0:S.toLowerCase().includes(p))||((d=(c=m.category)==null?void 0:c.name)==null?void 0:d.toLowerCase().includes(p))||((u=(i=m.vendor)==null?void 0:i.name)==null?void 0:u.toLowerCase().includes(p))||`${m.amount}`.includes(n),b=!a||m.detected_category===a;return E&&b}):(console.warn("Invalid expenses data provided to useExpensesTableData"),[]),[s,n,a]);return{searchQuery:n,setSearchQuery:t,categoryFilter:a,setCategoryFilter:o,viewDetailsId:r,setViewDetailsId:l,filteredExpenses:x}}const zs=ws({description:se().min(2,"Description is required"),amount:Cs.number().positive("Amount must be positive"),date:As({required_error:"Date is required"}),category:se().min(1,"Category is required"),vendor:se().min(1,"Vendor is required"),recurring_type:Es(["one-time","monthly","annual"])});function Ys({onSuccess:s}){const[n,t]=v.useState(!1),r=ze({resolver:Ns(zs),defaultValues:{description:"",amount:void 0,date:new Date,category:"",vendor:"",recurring_type:"one-time"}});function l(a){return w(this,null,function*(){t(!0);try{const o=we(a.date,"yyyy-MM-dd"),x={description:a.description,amount:a.amount,date:o,category:a.category,vendor:a.vendor,recurring_type:a.recurring_type,type:"expense"};(yield _e([x]))&&(f({title:"Expense added",description:"Your expense has been added successfully."}),r.reset(),yield s())}catch(o){console.error("Error adding expense:",o),f({title:"Error",description:"Failed to add expense. Please try again.",variant:"destructive"})}finally{t(!1)}})}return e.jsx(cs,Y(R({},r),{children:e.jsxs("form",{onSubmit:r.handleSubmit(l),className:"space-y-4",children:[e.jsx(H,{control:r.control,name:"description",render:({field:a})=>e.jsxs(K,{children:[e.jsx($,{children:"Description"}),e.jsx(W,{children:e.jsx(k,R({placeholder:"Enter expense description"},a))}),e.jsx(q,{})]})}),e.jsx(H,{control:r.control,name:"amount",render:({field:a})=>e.jsxs(K,{children:[e.jsx($,{children:"Amount (£)"}),e.jsx(W,{children:e.jsx(k,R({type:"number",step:"0.01",placeholder:"0.00"},a))}),e.jsx(q,{})]})}),e.jsx(H,{control:r.control,name:"date",render:({field:a})=>e.jsxs(K,{className:"flex flex-col",children:[e.jsx($,{children:"Date"}),e.jsxs(Ms,{children:[e.jsx(ks,{asChild:!0,children:e.jsx(W,{children:e.jsxs(j,{variant:"outline",className:ds("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?we(a.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(ae,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Vs,{className:"w-auto p-0",align:"start",children:e.jsx(Ps,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:o=>o>new Date||o<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(q,{})]})}),e.jsx(H,{control:r.control,name:"category",render:({field:a})=>e.jsxs(K,{children:[e.jsx($,{children:"Category"}),e.jsxs(Ee,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(W,{children:e.jsx(Ae,{children:e.jsx(Ce,{placeholder:"Select a category"})})}),e.jsxs(De,{children:[e.jsx(F,{value:"Software",children:"Software"}),e.jsx(F,{value:"Hardware",children:"Hardware"}),e.jsx(F,{value:"Office",children:"Office"}),e.jsx(F,{value:"Marketing",children:"Marketing"}),e.jsx(F,{value:"Utilities",children:"Utilities"}),e.jsx(F,{value:"Travel",children:"Travel"}),e.jsx(F,{value:"Other",children:"Other"})]})]}),e.jsx(q,{})]})}),e.jsx(H,{control:r.control,name:"vendor",render:({field:a})=>e.jsxs(K,{children:[e.jsx($,{children:"Vendor"}),e.jsx(W,{children:e.jsx(k,R({placeholder:"Enter vendor name"},a))}),e.jsx(q,{})]})}),e.jsx(H,{control:r.control,name:"recurring_type",render:({field:a})=>e.jsxs(K,{children:[e.jsx($,{children:"Recurring Type"}),e.jsxs(Ee,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(W,{children:e.jsx(Ae,{children:e.jsx(Ce,{placeholder:"Select frequency"})})}),e.jsxs(De,{children:[e.jsx(F,{value:"one-time",children:"One-time"}),e.jsx(F,{value:"monthly",children:"Monthly"}),e.jsx(F,{value:"annual",children:"Annual"})]})]}),e.jsx(q,{})]})}),e.jsx(j,{type:"submit",className:"w-full",disabled:n,children:n?"Adding...":"Add Expense"})]})}))}function Be({onDataChange:s}){const[n,t]=v.useState(!1),r=()=>w(this,null,function*(){t(!1),yield s()});return e.jsxs(me,{open:n,onOpenChange:t,children:[e.jsx(Ls,{asChild:!0,children:e.jsxs(j,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),e.jsxs(pe,{className:"sm:max-w-[425px]",children:[e.jsxs(ue,{children:[e.jsx(he,{children:"Add New Expense"}),e.jsx(ge,{children:"Enter the details for the new expense."})]}),e.jsx(Ys,{onSuccess:r})]})]})}const te=[{accessorKey:"date",header:({column:s})=>e.jsxs(j,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Date",e.jsx(re,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"description",header:"Description"},{accessorKey:"category.name",header:"Category"},{accessorKey:"vendor.name",header:"Vendor"},{accessorKey:"amount",header:({column:s})=>e.jsxs(j,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Amount",e.jsx(re,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>I(s.getValue("amount"),"GBP")},{id:"actions",header:"Actions",cell:({row:s})=>{const n=s.original;return e.jsxs(ie,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(j,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(de,{align:"end",children:[e.jsx(Me,{children:"Actions"}),e.jsxs(V,{onClick:()=>navigator.clipboard.writeText(n.id),children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"})," Copy Transaction ID"]}),e.jsx(xs,{}),e.jsxs(V,{children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"})," Edit"]}),e.jsxs(V,{onClick:t=>{if(document.querySelector("[data-expenses-table]")){const l=t.currentTarget.closest("[data-expenses-table-id]");l==null||l.getAttribute("data-expenses-table-id"),w(void 0,null,function*(){if(yield Re(n.id)){const x=new CustomEvent("expense-deleted",{detail:{id:n.id}});document.dispatchEvent(x)}})}},children:[e.jsx(Le,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})}}];function Qs({expenses:s,isLoading:n,onDataChange:t}){const[r,l]=v.useState([]),{searchQuery:a,setSearchQuery:o,categoryFilter:x,setCategoryFilter:m,filteredExpenses:p}=qs(s);v.useEffect(()=>{const d=i=>{t()};return document.addEventListener("expense-deleted",d),()=>{document.removeEventListener("expense-deleted",d)}},[t]);const E=v.useMemo(()=>Ue(s),[s]),b=Object.entries(E.reduce((d,i)=>{const u=i.detected_category||"Uncategorized";return d[u]=(d[u]||0)+i.amount,d},{})).sort((d,i)=>i[1]-d[1]),S=d=>{m(d)},c=Qe({data:p,columns:te,getCoreRowModel:Is(),getSortedRowModel:Ds(),onSortingChange:l,state:{sorting:r}});return e.jsxs(A,{"data-expenses-table-id":"expenses-main-table",children:[e.jsxs(O,{children:[e.jsx(T,{children:"Expenses"}),e.jsxs(ls,{children:["Manage your company expenses. Total expenses:"," ",I(s.reduce((d,i)=>d+i.amount,0),"GBP")]})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx(k,{type:"search",placeholder:"Search expenses...",value:a,onChange:d=>o(d.target.value),className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ie,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"h-10",children:[x||"Filter by Category",e.jsx(re,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(de,{align:"end",children:[e.jsx(Me,{children:"Filter"}),e.jsx(V,{onClick:()=>S(null),children:"All Categories"}),b.map(([d,i])=>e.jsxs(V,{onClick:()=>S(d),children:[d," (",I(i,"GBP"),")"]},d))]})]}),e.jsx(Be,{onDataChange:t})]})]}),e.jsx("div",{className:"relative w-full overflow-auto mt-4",children:e.jsxs("table",{className:"w-full table-auto border-collapse text-sm",children:[e.jsx("thead",{children:c.getHeaderGroups().map(d=>e.jsx("tr",{children:d.headers.map(i=>e.jsx("th",{className:"px-4 py-2 text-left",children:i.isPlaceholder?null:fe(i.column.columnDef.header,i.getContext())},i.id))},d.id))}),e.jsx("tbody",{children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:te.length,className:"text-center py-4 italic text-muted-foreground",children:"Loading expenses..."})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:te.length,className:"text-center py-4 italic text-muted-foreground",children:"No expenses found."})}):c.getRowModel().rows.map(d=>e.jsx("tr",{children:d.getVisibleCells().map(i=>e.jsx("td",{className:"px-4 py-2",children:fe(i.column.columnDef.cell,i.getContext())},i.id))},d.id))})]})})]})]})}function Zs({open:s,onOpenChange:n,onRevenueAdded:t}){const[r,l]=v.useState({description:"",amount:"",date:"",vendor_name:"",notes:"",status:"completed",recurring_type:"one-time"}),[a,o]=v.useState(!1),x=p=>{l(Y(R({},r),{[p.target.name]:p.target.value}))},m=p=>w(this,null,function*(){if(p.preventDefault(),!r.amount||!r.date||!r.description){f({title:"Missing Info",description:"Description, Amount and Date are required",variant:"destructive"});return}o(!0);try{const E={type:"revenue",amount:parseFloat(r.amount),currency:"GBP",date:r.date,description:r.description,vendor_id:void 0,payment_method_id:void 0,status:r.status,recurring_type:r.recurring_type,notes:r.notes,category_id:void 0,receipt_url:""};(yield Ts(E))&&(f({title:"Revenue Added",description:"A new revenue transaction was added."}),n(!1),t(),l({description:"",amount:"",date:"",vendor_name:"",notes:"",status:"completed",recurring_type:"one-time"}))}finally{o(!1)}});return e.jsx(me,{open:s,onOpenChange:n,children:e.jsxs(pe,{children:[e.jsxs(ue,{children:[e.jsx(he,{children:"Add Revenue"}),e.jsx(ge,{children:"Enter details to add a new revenue entry."})]}),e.jsxs("form",{onSubmit:m,className:"grid gap-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block mb-1 text-sm",children:"Description*"}),e.jsx(k,{name:"description",maxLength:64,placeholder:"e.g. Client Payment",value:r.description,onChange:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block mb-1 text-sm",children:"Amount (£)*"}),e.jsx(k,{name:"amount",type:"number",min:"0",step:"0.01",placeholder:"Amount",value:r.amount,onChange:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block mb-1 text-sm",children:"Date*"}),e.jsx(k,{name:"date",type:"date",value:r.date,onChange:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vendor_name",className:"block mb-1 text-sm",children:"Source/Client"}),e.jsx(k,{name:"vendor_name",placeholder:"Who paid?",value:r.vendor_name,onChange:x})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block mb-1 text-sm",children:"Notes"}),e.jsx(Us,{name:"notes",placeholder:"Optional notes",value:r.notes,onChange:x})]}),e.jsxs(Fs,{children:[e.jsx(j,{type:"button",variant:"secondary",onClick:()=>n(!1),disabled:a,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:a,children:a?"Adding...":"Add Revenue"})]})]})]})})}function Xs({revenues:s=[],isLoading:n=!1,onDataChange:t}){var G,L;const[r,l]=v.useState(""),[a,o]=v.useState(null),[x,m]=v.useState("date"),[p,E]=v.useState("desc"),[b,S]=v.useState(!1),c=a?s.find(g=>g.id===a):null,d=g=>{x===g?E(p==="asc"?"desc":"asc"):(m(g),E("asc"))},i=s.filter(g=>{var C,y,N;return((C=g.description)==null?void 0:C.toLowerCase().includes(r.toLowerCase()))||((N=(y=g.vendor)==null?void 0:y.name)==null?void 0:N.toLowerCase().includes(r.toLowerCase()))||`${g.amount}`.includes(r)}).sort((g,C)=>{if(x==="amount")return p==="asc"?g.amount-C.amount:C.amount-g.amount;if(x==="date")return p==="asc"?new Date(g.date).getTime()-new Date(C.date).getTime():new Date(C.date).getTime()-new Date(g.date).getTime();if(x==="name"){const y=g.description||"",N=C.description||"";return p==="asc"?y.localeCompare(N):N.localeCompare(y)}return 0}),u=g=>w(this,null,function*(){window.confirm("Are you sure you want to delete this revenue?")&&(yield Re(g))&&t&&t()});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Revenue Tracking"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(k,{type:"search",placeholder:"Search revenue...",className:"pl-8 w-[250px]",value:r,onChange:g=>l(g.target.value)})]}),e.jsxs(j,{variant:"outline",size:"sm",className:"h-9",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Filter"]}),e.jsxs(j,{variant:"outline",size:"sm",className:"h-9",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(j,{size:"sm",className:"h-9",onClick:()=>S(!0),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Add Revenue"]})]})]}),e.jsx(Zs,{open:b,onOpenChange:S,onRevenueAdded:t||(()=>{})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Gs,{children:[e.jsx(Rs,{children:e.jsxs(X,{children:[e.jsx(_,{className:"w-[200px]",children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>d("name"),children:["Description",e.jsx(ee,{className:"ml-2 h-4 w-4"})]})}),e.jsx(_,{children:"Source/Client"}),e.jsx(_,{children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>d("amount"),children:["Amount",e.jsx(ee,{className:"ml-2 h-4 w-4"})]})}),e.jsx(_,{children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>d("date"),children:["Date",e.jsx(ee,{className:"ml-2 h-4 w-4"})]})}),e.jsx(_,{children:"Status"}),e.jsx(_,{children:"Invoice"}),e.jsx(_,{children:"Payment Method"}),e.jsx(_,{className:"text-right",children:"Actions"})]})}),e.jsx(_s,{children:n?e.jsx(X,{children:e.jsx(P,{colSpan:8,className:"text-center py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(as,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})}):i.length>0?i.map(g=>{var C,y;return e.jsxs(X,{children:[e.jsx(P,{className:"font-medium",children:g.description}),e.jsx(P,{children:((C=g.vendor)==null?void 0:C.name)||"—"}),e.jsxs(P,{children:["£",g.amount.toFixed(2)]}),e.jsx(P,{children:new Date(g.date).toLocaleDateString()}),e.jsx(P,{children:e.jsx(Js,{status:g.status})}),e.jsx(P,{children:g.notes||"—"}),e.jsx(P,{children:((y=g.payment_method)==null?void 0:y.name)||"—"}),e.jsx(P,{className:"text-right",children:e.jsxs(ie,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(j,{variant:"ghost",size:"sm",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(de,{align:"end",children:[e.jsxs(V,{onClick:()=>o(g.id),children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(V,{children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Generate Invoice"]}),e.jsxs(V,{children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(V,{className:"text-red-600",onClick:()=>u(g.id),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},g.id)}):e.jsx(X,{children:e.jsx(P,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No revenue records found. Try adjusting your filters or add a new revenue record."})})})]})}),c&&e.jsx(me,{open:!!a,onOpenChange:g=>!g&&o(null),children:e.jsxs(pe,{children:[e.jsxs(ue,{children:[e.jsx(he,{children:"Revenue Details"}),e.jsx(ge,{children:"View detailed information about this revenue."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{children:c.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),e.jsxs("p",{className:"font-semibold",children:["£",c.amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("p",{children:new Date(c.date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Source/Client"}),e.jsx("p",{children:((G=c.vendor)==null?void 0:G.name)||"—"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),e.jsx("p",{children:((L=c.payment_method)==null?void 0:L.name)||"—"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("p",{children:c.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Recurrence"}),e.jsx("p",{children:c.recurring_type==="monthly"?"Monthly":c.recurring_type==="annual"?"Annual":"One-Time"})]})]}),c.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-sm",children:c.notes})]})]})]})})]})}function Js({status:s}){let n="bg-gray-100 text-gray-800",t=null;switch(s){case"completed":n="bg-green-100 text-green-800",t=e.jsx(oe,{className:"h-3 w-3 mr-1"});break;case"pending":n="bg-amber-100 text-amber-800",t=e.jsx(ne,{className:"h-3 w-3 mr-1"});break;case"overdue":n="bg-red-100 text-red-800",t=e.jsx(J,{className:"h-3 w-3 mr-1"});break;case"draft":n="bg-blue-100 text-blue-800",t=e.jsx(Fe,{className:"h-3 w-3 mr-1"});break}return e.jsxs(ms,{variant:"outline",className:`${n} flex items-center w-fit`,children:[t,s]})}function et({expenses:s,revenues:n,isLoading:t,onDataChange:r}){const[l,a]=v.useState("kanban"),o=v.useMemo(()=>{const c=[],d=[],i=[];return s.forEach(u=>{const G=new Date,L=new Date(u.date);u.status==="completed"?i.push(u):L<G?c.push(u):d.push(u)}),{pending:c,upcoming:d,completed:i}},[s]),x=o.pending.reduce((c,d)=>c+d.amount,0),m=o.upcoming.reduce((c,d)=>c+d.amount,0),p=o.completed.reduce((c,d)=>c+d.amount,0),b=(()=>{if(o.upcoming.length===0)return null;const c=new Date;let d=1/0;return o.upcoming.forEach(i=>{const G=new Date(i.date).getTime()-c.getTime(),L=Math.ceil(G/(1e3*60*60*24));L>0&&L<d&&(d=L)}),d===1/0?null:d})(),S=c=>e.jsx(A,{className:"mb-3 bg-siso-bg-alt/50 border-siso-border/50 hover:bg-siso-bg-alt/80 transition-colors",children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-medium text-siso-text",children:c.description}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-siso-text-bold",children:I(c.amount,"GBP")}),e.jsx("div",{className:"text-xs text-siso-text-muted",children:new Date(c.date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[c.category&&e.jsx("div",{className:"px-2 py-1 rounded-md bg-siso-orange/10 text-siso-orange text-xs border border-siso-orange/20",children:c.category.name||"Uncategorized"}),c.recurring_type&&c.recurring_type!=="one-time"&&e.jsxs("div",{className:"text-xs text-siso-orange flex items-center",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),c.recurring_type]})]})]})},c.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-2xl font-semibold text-siso-text-bold",children:"Financial Pipeline"}),e.jsx("p",{className:"text-siso-text-muted",children:"Track and manage your financial expenses"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{defaultValue:"kanban",onValueChange:c=>a(c),children:e.jsxs(xe,{children:[e.jsx(M,{value:"kanban",children:"Kanban"}),e.jsx(M,{value:"list",children:"List"})]})}),e.jsx(Be,{onDataChange:r})]})]}),e.jsx(A,{className:"bg-siso-bg-alt/50 border-siso-border/50",children:e.jsxs(D,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-siso-orange/20 flex items-center justify-center border border-siso-orange/30",children:e.jsx(J,{className:"h-6 w-6 text-siso-orange"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-siso-text-muted",children:"Pending"}),e.jsx("p",{className:"text-lg font-bold text-siso-text-bold",children:I(x,"GBP")})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-siso-orange/10 flex items-center justify-center border border-siso-orange/20",children:e.jsx(ae,{className:"h-6 w-6 text-siso-orange"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-siso-text-muted",children:"Upcoming"}),e.jsx("p",{className:"text-lg font-bold text-siso-text-bold",children:I(m,"GBP")})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-900/30 flex items-center justify-center border border-green-500/30",children:e.jsx(oe,{className:"h-6 w-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-siso-text-muted",children:"Completed"}),e.jsx("p",{className:"text-lg font-bold text-siso-text-bold",children:I(p,"GBP")})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-siso-text",children:"Financial health"}),e.jsxs("p",{className:"text-sm font-medium text-siso-text-bold",children:[Math.round(p/(x+m+p)*100)||0,"%"]})]}),e.jsx(ps,{value:p/(x+m+p)*100||0,className:"h-2"})]}),b!==null&&e.jsxs("div",{className:"mt-4 py-2 px-4 rounded-md bg-siso-orange/20 border border-siso-orange/30 flex items-center",children:[e.jsx(ne,{className:"h-4 w-4 text-siso-orange mr-2"}),e.jsxs("span",{className:"text-siso-text",children:["Next expense due in ",b," day",b===1?"":"s"]})]})]})}),l==="kanban"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(A,{className:"bg-siso-bg-alt/50 border-siso-border/50",children:[e.jsx(O,{className:"pb-2 border-b border-siso-border/30",children:e.jsxs(T,{className:"flex items-center text-siso-orange",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Pending (",o.pending.length,")"]})}),e.jsxs(D,{className:"p-3 overflow-auto max-h-[calc(100vh-400px)]",children:[t?e.jsx("div",{className:"py-8 text-center text-siso-text-muted",children:"Loading..."}):o.pending.length===0?e.jsx("div",{className:"py-8 text-center text-siso-text-muted",children:"No pending expenses"}):o.pending.map(S),e.jsxs(j,{variant:"ghost",className:"w-full mt-2 border border-dashed border-siso-border/50 flex items-center justify-center text-siso-text hover:text-siso-orange",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Add Expense"]})]})]}),e.jsxs(A,{className:"bg-siso-bg-alt/50 border-siso-border/50",children:[e.jsx(O,{className:"pb-2 border-b border-siso-border/30",children:e.jsxs(T,{className:"flex items-center text-siso-orange",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Upcoming (",o.upcoming.length,")"]})}),e.jsxs(D,{className:"p-3 overflow-auto max-h-[calc(100vh-400px)]",children:[t?e.jsx("div",{className:"py-8 text-center text-siso-text-muted",children:"Loading..."}):o.upcoming.length===0?e.jsx("div",{className:"py-8 text-center text-siso-text-muted",children:"No upcoming expenses"}):o.upcoming.map(S),e.jsxs(j,{variant:"ghost",className:"w-full mt-2 border border-dashed border-siso-border/50 flex items-center justify-center text-siso-text hover:text-siso-orange",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Add Expense"]})]})]}),e.jsxs(A,{className:"bg-siso-bg-alt/50 border-siso-border/50",children:[e.jsx(O,{className:"pb-2 border-b border-siso-border/30",children:e.jsxs(T,{className:"flex items-center text-green-400",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Completed (",o.completed.length,")"]})}),e.jsxs(D,{className:"p-3 overflow-auto max-h-[calc(100vh-400px)]",children:[t?e.jsx("div",{className:"py-8 text-center text-siso-text-muted",children:"Loading..."}):o.completed.length===0?e.jsx("div",{className:"py-8 text-center text-siso-text-muted",children:"No completed expenses"}):o.completed.slice(0,10).map(S),o.completed.length>10&&e.jsxs(j,{variant:"ghost",className:"w-full mt-2 text-siso-text hover:text-siso-orange",children:["View ",o.completed.length-10," more"]})]})]})]}):e.jsxs(A,{className:"bg-siso-bg-alt/50 border-siso-border/50",children:[e.jsx(O,{children:e.jsx(T,{className:"text-siso-text-bold",children:"Financial Timeline"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"relative",children:o.upcoming.slice(0,5).map((c,d)=>e.jsxs("div",{className:"relative pl-6 pb-6",children:[e.jsx("div",{className:"absolute left-0 top-0 h-full",children:e.jsx("div",{className:"h-full w-px bg-siso-border/30"})}),e.jsx("div",{className:"absolute left-0 top-1.5 h-3 w-3 rounded-full bg-siso-orange"}),e.jsxs("div",{className:"flex items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-siso-text",children:c.description}),e.jsxs("div",{className:"text-sm text-siso-text-muted",children:["Due ",new Date(c.date).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-siso-text-bold",children:I(c.amount,"GBP")}),c.category&&e.jsx("div",{className:"text-xs text-siso-orange",children:c.category.name})]})]})]},c.id))}),e.jsx(j,{variant:"outline",className:"w-full border-siso-border text-siso-text hover:bg-siso-orange/10 hover:text-siso-orange",children:"View All Expenses"})]})})]}),e.jsxs(A,{className:"bg-siso-bg-alt/50 border-siso-border/50",children:[e.jsx(O,{children:e.jsx(T,{className:"text-siso-text-bold",children:"Linked Tasks"})}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-siso-text-muted",children:"Connect your expenses to tasks for better tracking"}),e.jsx(j,{className:"mt-4 bg-gradient-to-r from-siso-red to-siso-orange text-white hover:opacity-90",children:"View Task Manager"})]})})]}),e.jsxs(A,{className:"bg-siso-bg-alt/50 border-siso-border/50",children:[e.jsx(O,{children:e.jsx(T,{className:"text-siso-text-bold",children:"Client Financials"})}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-siso-text-muted",children:"Link your expenses to clients to track project profitability"}),e.jsx(j,{className:"mt-4 bg-gradient-to-r from-siso-red to-siso-orange text-white hover:opacity-90",children:"View Client Base"})]})})]})]})}const Oe=[{description:"Virgin Media Internet",amount:132.5,date:"2024-01-05",category:"Utilities",vendor:"Virgin Media",type:"expense"},{description:"Notion Subscription",amount:50.9,date:"2024-01-11",category:"Services",vendor:"Notion",type:"expense"},{description:"Google Play Store",amount:19.6,date:"2024-01-12",category:"Services",vendor:"Google",type:"expense"},{description:"OpenAI Subscription",amount:56.45,date:"2024-01-12",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Airtable Subscription",amount:19.07,date:"2024-01-13",category:"Services",vendor:"Airtable",type:"expense"},{description:"Midjourney Subscription",amount:9.57,date:"2024-01-27",category:"Services",vendor:"Midjourney",type:"expense"},{description:"FlutterFlow Subscription",amount:55.04,date:"2024-01-31",category:"Services",vendor:"FlutterFlow",type:"expense"},{description:"Google Services",amount:10,date:"2024-02-13",category:"Services",vendor:"Google",type:"expense"},{description:"Notion Additional Services",amount:5.59,date:"2024-02-24",category:"Services",vendor:"Notion",type:"expense"},{description:"TradingView Subscription",amount:35.94,date:"2024-02-28",category:"Services",vendor:"TradingView",type:"expense"},{description:"Make Subscription",amount:8.41,date:"2024-02-29",category:"Services",vendor:"Make",type:"expense"},{description:"Google Cloud Services",amount:2,date:"2024-03-01",category:"Services",vendor:"Google Cloud",type:"expense"},{description:"Google Services",amount:9.72,date:"2024-03-01",category:"Services",vendor:"Google",type:"expense"},{description:"OpenAI API Usage",amount:4.81,date:"2024-03-02",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Virgin Media Services",amount:65.5,date:"2024-03-07",category:"Utilities",vendor:"Virgin Media",type:"expense"},{description:"FlutterFlow Platform",amount:55.16,date:"2024-03-09",category:"Services",vendor:"FlutterFlow",type:"expense"},{description:"Companies House Filing",amount:12,date:"2024-03-09",category:"Services",vendor:"Companies House",type:"expense"},{description:"Notion Workspace",amount:19.29,date:"2024-03-23",category:"Services",vendor:"Notion",type:"expense"},{description:"OpenAI Usage",amount:19.09,date:"2024-03-24",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Medium Subscription",amount:4.02,date:"2024-03-29",category:"Services",vendor:"Medium",type:"expense"},{description:"Envato Elements",amount:30.82,date:"2024-03-30",category:"Services",vendor:"Envato",type:"expense"},{description:"Akismet Service 1",amount:187.2,date:"2024-03-30",category:"Services",vendor:"Akismet",type:"expense"},{description:"Akismet Service 2",amount:70.56,date:"2024-03-30",category:"Services",vendor:"Akismet",type:"expense"},{description:"Notion Team Plan",amount:19.04,date:"2024-03-31",category:"Services",vendor:"Notion",type:"expense"},{description:"Elementor Pro",amount:78.55,date:"2024-04-01",category:"Services",vendor:"Elementor",type:"expense"},{description:"Replicate API",amount:2.83,date:"2024-04-09",category:"Services",vendor:"Replicate",type:"expense"},{description:"OpenAI Credits",amount:9.82,date:"2024-04-23",category:"Services",vendor:"OpenAI",type:"expense"},{description:"OpenAI Additional Credits",amount:19.24,date:"2024-04-25",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Virgin Media Broadband",amount:94.54,date:"2024-05-11",category:"Utilities",vendor:"Virgin Media",type:"expense"},{description:"Virgin Media TV",amount:94.54,date:"2024-05-11",category:"Utilities",vendor:"Virgin Media",type:"expense"},{description:"Google Drive Storage",amount:1.59,date:"2024-05-12",category:"Services",vendor:"Google",type:"expense"},{description:"Manychat Pro",amount:12.13,date:"2024-05-12",category:"Services",vendor:"Manychat",type:"expense"},{description:"Medium Membership",amount:3.99,date:"2024-05-13",category:"Services",vendor:"Medium",type:"expense"},{description:"Apify Services",amount:5.73,date:"2024-05-25",category:"Services",vendor:"Apify",type:"expense"},{description:"OpenAI Monthly",amount:19.09,date:"2024-05-26",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Notion Premium",amount:18.88,date:"2024-05-27",category:"Services",vendor:"Notion",type:"expense"},{description:"Medium Pro",amount:3.91,date:"2024-06-12",category:"Services",vendor:"Medium",type:"expense"},{description:"Airtable Plus",amount:18.79,date:"2024-06-12",category:"Services",vendor:"Airtable",type:"expense"},{description:"Tempmail Service",amount:9.62,date:"2024-06-23",category:"Services",vendor:"Tempmail",type:"expense"},{description:"Notion Business",amount:19.04,date:"2024-06-26",category:"Services",vendor:"Notion",type:"expense"},{description:"Marsproxy Service",amount:3.97,date:"2024-06-26",category:"Services",vendor:"Marsproxy",type:"expense"},{description:"OpenAI Usage",amount:11.89,date:"2024-06-28",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Medium Premium",amount:4.01,date:"2024-06-29",category:"Services",vendor:"Medium",type:"expense"},{description:"OpenAI Monthly",amount:19.23,date:"2024-06-29",category:"Services",vendor:"OpenAI",type:"expense"},{description:"OAI Widget",amount:4.01,date:"2024-06-30",category:"Services",vendor:"Oai Widget",type:"expense"},{description:"WP Starter Pack",amount:4.25,date:"2024-07-04",category:"Services",vendor:"WPstarterPack",type:"expense"},{description:"Virgin Media Services",amount:51.14,date:"2024-07-08",category:"Utilities",vendor:"Virgin Media",type:"expense"},{description:"AWS Services",amount:3.56,date:"2024-07-13",category:"Services",vendor:"Amazon Web Services",type:"expense"},{description:"Render Hosting",amount:14.94,date:"2024-07-15",category:"Services",vendor:"Render",type:"expense"},{description:"ElevenLabs Voice AI",amount:10.24,date:"2024-07-23",category:"Services",vendor:"ElevenLabs",type:"expense"},{description:"Google Services",amount:9.72,date:"2024-07-25",category:"Services",vendor:"Google",type:"expense"},{description:"Loom Pro",amount:15.74,date:"2024-07-27",category:"Services",vendor:"Loom",type:"expense"},{description:"Google Workspace",amount:7.99,date:"2024-07-29",category:"Services",vendor:"Google",type:"expense"},{description:"OpenAI Monthly",amount:18.84,date:"2024-08-01",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Google One",amount:9.72,date:"2024-08-08",category:"Services",vendor:"Google",type:"expense"},{description:"Kode Lab Service 1",amount:2.37,date:"2024-08-11",category:"Services",vendor:"Kode Lab",type:"expense"},{description:"Kode Lab Service 2",amount:2.37,date:"2024-08-11",category:"Services",vendor:"Kode Lab",type:"expense"},{description:"Kode Lab Service 3",amount:7.85,date:"2024-08-13",category:"Services",vendor:"Kode Lab",type:"expense"},{description:"Kode Lab Service 4",amount:7.79,date:"2024-08-16",category:"Services",vendor:"Kode Lab",type:"expense"},{description:"Notion Team",amount:15.8,date:"2024-08-29",category:"Services",vendor:"Notion",type:"expense"},{description:"Kode Lab Pro",amount:15.25,date:"2024-09-02",category:"Services",vendor:"Kode Lab",type:"expense"},{description:"Esuit Dev Basic Plan 1",amount:3.84,date:"2024-09-11",category:"Services",vendor:"Esuit",type:"expense"},{description:"OpenAI Services",amount:18.52,date:"2024-09-15",category:"Services",vendor:"OpenAI",type:"expense"},{description:"ElevenLabs Basic",amount:4.59,date:"2024-09-16",category:"Services",vendor:"ElevenLabs",type:"expense"},{description:"ElevenLabs Pro",amount:23.98,date:"2024-09-22",category:"Services",vendor:"ElevenLabs",type:"expense"},{description:"Esuit Dev Basic Plan 2",amount:3.83,date:"2024-10-11",category:"Services",vendor:"Esuit",type:"expense"},{description:"OpenAI Credits",amount:18.5,date:"2024-10-16",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Manychat Premium",amount:11.57,date:"2024-10-30",category:"Services",vendor:"Manychat",type:"expense"},{description:"Google Storage",amount:1.59,date:"2024-11-02",category:"Services",vendor:"Google",type:"expense"},{description:"Virgin Media Bundle",amount:47.59,date:"2024-11-08",category:"Utilities",vendor:"Virgin Media",type:"expense"},{description:"OpenAI Usage 1",amount:9.52,date:"2024-11-14",category:"Services",vendor:"OpenAI",type:"expense"},{description:"OpenAI Usage 2",amount:9.52,date:"2024-11-14",category:"Services",vendor:"OpenAI",type:"expense"},{description:"OpenAI Usage 3",amount:19.28,date:"2024-11-16",category:"Services",vendor:"OpenAI",type:"expense"},{description:"OpenAI Usage 4",amount:19.28,date:"2024-11-16",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Lovable Service 1",amount:22.52,date:"2024-12-01",category:"Services",vendor:"Lovable",type:"expense"},{description:"Lovable Service 2",amount:35.3,date:"2024-12-01",category:"Services",vendor:"Lovable",type:"expense"},{description:"Lovable Service 3",amount:16.59,date:"2024-12-01",category:"Services",vendor:"Lovable",type:"expense"},{description:"Lovable Service 4",amount:.6,date:"2024-12-02",category:"Services",vendor:"Lovable",type:"expense"},{description:"OpenAI Monthly",amount:19.36,date:"2024-12-10",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Voiceflow SaaS",amount:39.92,date:"2024-12-13",category:"Services",vendor:"Voiceflow",type:"expense"},{description:"Midjourney Sub",amount:9.57,date:"2024-12-24",category:"Services",vendor:"Midjourney",type:"expense"},{description:"Manychat Basic",amount:.87,date:"2024-12-29",category:"Services",vendor:"Manychat",type:"expense"},{description:"Notion Premium",amount:19.07,date:"2024-12-31",category:"Services",vendor:"Notion",type:"expense"},{description:"Proxy Services Basic",amount:5.73,date:"2025-01-02",category:"Services",vendor:"Proxy Services",type:"expense"},{description:"Supabase Platform",amount:19.93,date:"2025-01-02",category:"Services",vendor:"Supabase",type:"expense"},{description:"OpenAI API",amount:19.14,date:"2025-01-02",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Google Drive",amount:1.59,date:"2025-01-02",category:"Services",vendor:"Google",type:"expense"},{description:"GoDaddy Domain",amount:10.07,date:"2025-01-02",category:"Services",vendor:"GoDaddy",type:"expense"},{description:"OpenAI Credits",amount:19.69,date:"2025-01-02",category:"Services",vendor:"OpenAI",type:"expense"},{description:"Vercel Hosting",amount:7.99,date:"2025-01-02",category:"Services",vendor:"Vercel",type:"expense"},{description:"Google Workspace",amount:10,date:"2025-01-02",category:"Services",vendor:"Google",type:"expense"},{description:"Virgin Media Services",amount:38.58,date:"2025-01-02",category:"Utilities",vendor:"Virgin Media",type:"expense"},{description:"Proxy Services Pro 1",amount:8.06,date:"2025-01-02",category:"Services",vendor:"Proxy Services",type:"expense"},{description:"Proxy Services Pro 2",amount:4.03,date:"2025-01-02",category:"Services",vendor:"Proxy Services",type:"expense"},{description:"Vercel Pro",amount:15.97,date:"2025-01-02",category:"Services",vendor:"Vercel",type:"expense"},{description:"Lovable Service 5",amount:20.99,date:"2025-01-02",category:"Services",vendor:"Lovable",type:"expense"},{description:"Lovable Service 6",amount:15.95,date:"2025-01-02",category:"Services",vendor:"Lovable",type:"expense"},{description:"Proxy Services Premium",amount:8.02,date:"2025-02-01",category:"Services",vendor:"Proxy Services",type:"expense"},{description:"Lovable Service 7",amount:53.06,date:"2025-02-01",category:"Services",vendor:"Lovable",type:"expense"},{description:"Lovable Service 8",amount:30.9,date:"2025-02-17",category:"Services",vendor:"Lovable",type:"expense"},{description:"Lovable Service 9",amount:8.39,date:"2025-03-02",category:"Services",vendor:"Lovable",type:"expense"},{description:"Cursor Pro",amount:16.05,date:"2025-03-12",category:"Services",vendor:"Cursor",type:"expense"},{description:"Sim Cards 20",amount:20,date:"2025-01-22",category:"Equipment",vendor:"Mobile Provider",type:"expense"},{description:"GCP Services",amount:20,date:"2025-01-22",category:"Services",vendor:"Google Cloud Platform",type:"expense"},{description:"10 Sim Cards",amount:5,date:"2025-04-07",category:"Equipment",vendor:"Mobile Provider",type:"expense"},{description:"Lovable Service 10",amount:58.6,date:"2025-03-31",category:"Services",vendor:"Lovable",type:"expense"},{description:"Lovable Service 11",amount:34,date:"2025-04-30",category:"Services",vendor:"Lovable",type:"expense"}];function st(){return w(this,null,function*(){try{const{count:s,error:n}=yield U.from("financial_transactions").select("*",{count:"exact"});if(n)return console.error("Error checking existing expenses:",n),f({title:"Error",description:"Failed to check existing expenses",variant:"destructive"}),!1;if(s===0){if(yield _e(Oe))return f({title:"Success",description:`${Oe.length} expenses added successfully`}),!0}else return f({title:"Info",description:`${s} expenses already exist. Skipping seeding.`}),!1}catch(s){return console.error("Comprehensive error seeding expenses:",s),f({title:"Error",description:"Failed to seed sample expenses",variant:"destructive"}),!1}})}const tt=[["Virgin Media","£132.50","5/1/2024"],["Notion","£50.90","11/1/2024"],["Google Play","£19.60","12/1/2024"],["OpenAI","£56.45","12/1/2024"],["Airtable","£19.07","13/1/2024"],["Midjourney","£9.57","27/1/2024"],["FlutterFlow","£55.04","31/1/2024"],["Google","£10.00","13/2/2024"],["Notion","£5.59","24/2/2024"],["TradingView","£35.94","28/2/2024"],["Make","£8.41","29/2/2024"],["Google Cloud","£2.00","1/3/2024"],["Google","£9.72","1/3/2024"],["OpenAI","£4.81","2/3/2024"],["Virgin Media","£65.50","7/3/2024"],["FlutterFlow","£55.16","9/3/2024"],["Companies House","£12.00","9/3/2024"],["Notion","£19.29","23/3/2024"],["OpenAI","£19.09","24/3/2024"],["Medium","£4.02","29/3/2024"],["Envato","£30.82","30/3/2024"],["Akismet","£187.20","30/3/2024"],["Akismet","£70.56","30/3/2024"],["Notion","£19.04","31/3/2024"],["Elementor","£78.55","1/4/2024"],["Replicate","£2.83","9/4/2024"],["OpenAI","£9.82","23/4/2024"],["OpenAI","£19.24","25/4/2024"],["Virgin Media","£94.54","11/5/2024"],["Virgin Media","£94.54","11/5/2024"],["Google Drive","£1.59","12/5/2024"],["Manychat","£12.13","12/5/2024"],["Medium","£3.99","13/5/2024"],["Apify","£5.73","25/5/2024"],["OpenAI","£19.09","26/5/2024"],["Notion","£18.88","27/5/2024"],["Medium","£3.91","12/6/2024"],["Airtable","£18.79","12/6/2024"],["Tempmail","£9.62","23/6/2024"],["Notion","£19.04","26/6/2024"],["Marsproxy","£3.97","26/6/2024"],["OpenAI","£11.89","28/6/2024"],["Medium","£4.01","29/6/2024"],["OpenAI","£19.23","29/6/2024"],["Oai Widget","£4.01","30/6/2024"],["WPstarterPack","£4.25","4/7/2024"],["Virgin Media","£51.14","8/7/2024"],["Amazon Web Services","£3.56","13/7/2024"],["Render","£14.94","15/7/2024"],["ElevenLabs","£10.24","23/7/2024"],["Google","£9.72","25/7/2024"],["Loom","£15.74","27/7/2024"],["Google Workspace","£7.99","29/7/2024"],["OpenAI","£18.84","1/8/2024"],["Google","£9.72","8/8/2024"],["Kode Lab","£2.37","11/8/2024"],["Kode Lab","£2.37","11/8/2024"],["Kode Lab","£7.85","13/8/2024"],["Kode Lab","£7.79","16/8/2024"],["Notion","£15.80","29/8/2024"],["Kode Lab","£15.25","2/9/2024"],["Esuit Dev Basic Plan","£3.84","11/9/2024"],["OpenAI","£18.52","15/9/2024"],["ElevenLabs","£4.59","16/9/2024"],["ElevenLabs","£23.98","22/9/2024"],["Esuit Dev Basic Plan","£3.83","11/10/2024"],["OpenAI","£18.50","16/10/2024"],["Manychat","£11.57","30/10/2024"],["Google","£1.59","2/11/2024"],["Virgin Media","£47.59","8/11/2024"],["OpenAI","£9.52","14/11/2024"],["OpenAI","£9.52","14/11/2024"],["OpenAI","£19.28","16/11/2024"],["OpenAI","£19.28","16/11/2024"],["Lovable","£22.52","1/12/2024"],["Lovable","£35.30","1/12/2024"],["Lovable","£16.59","1/12/2024"],["Lovable","£0.60","2/12/2024"],["OpenAI","£19.36","10/12/2024"],["Voiceflow SaaS","£39.92","13/12/2024"],["Midjourney","£9.57","24/12/2024"],["Manychat","£0.87","29/12/2024"],["Notion","£19.07","31/12/2024"],["Proxy Services","£5.73","2/1/2025"],["Supabase","£19.93","2/1/2025"],["OpenAI","£19.14","2/1/2025"],["Google","£1.59","2/1/2025"],["GoDaddy","£10.07","2/1/2025"],["OpenAI","£19.69","2/1/2025"],["Vercel","£7.99","2/1/2025"],["Google Workspace","£10.00","2/1/2025"],["Virgin Media","£38.58","2/1/2025"],["Proxy Services","£8.06","2/1/2025"],["Proxy Services","£4.03","2/1/2025"],["Vercel","£15.97","2/1/2025"],["Lovable","£20.99","2/1/2025"],["Lovable","£15.95","2/1/2025"],["Proxy Services","£8.02","1/2/2025"],["Lovable","£53.06","1/2/2025"],["Lovable","£30.90","17/2/2025"],["Lovable","£8.39","2/3/2025"],["Cursor","£16.05","12/3/2025"],["Sim Cards 20","£20.00","22/1/2025"],["GCP","£20.00","22/1/2025"],["10 Sim cards","£5.00","7/4/2025"],["Lovable","£58.60","31/3/2025"],["Lovable","£34.00","30/4/2025"]];function at(s){const[n,t,r]=s.split("/");return n&&t&&r?`${r}-${t.padStart(2,"0")}-${n.padStart(2,"0")}`:s}function rt(s){return parseFloat(s.replace("£","").replace(",",""))}function ve(){return w(this,null,function*(){const{data:{user:s}}=yield U.auth.getUser();if(!s)throw new Error("You must be logged in to bulk-insert expenses.");const n=tt.map(([r,l,a])=>({description:r,amount:rt(l),date:at(a),type:"expense",currency:"GBP",status:"completed",notes:"",user_id:s.id,recurring_type:"one-time"})),t=40;for(let r=0;r<n.length;r+=t){const l=n.slice(r,r+t),{error:a}=yield U.from("financial_transactions").insert(l);if(a)throw console.error("Insert error:",a,"Chunk:",l),a}return!0})}typeof window!="undefined"&&(window.seedExpensesFromList=ve);function nt({onImport:s}){const[n,t]=v.useState(!1),r=()=>w(this,null,function*(){t(!0);try{yield ve(),f({title:"Expenses Imported",description:"Sample expenses have been imported."}),s==null||s()}catch(l){f({title:"Import Failed",description:(l==null?void 0:l.message)||"Failed to import expenses.",variant:"destructive"})}finally{t(!1)}});return e.jsxs(j,{variant:"outline",onClick:r,disabled:n,className:"ml-2",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),n?"Importing...":"Import Demo Expenses"]})}function St(){const[s,n]=v.useState("dashboard"),[t,r]=v.useState(!0),[l,a]=v.useState([]),[o,x]=v.useState([]),[m,p]=v.useState({}),[E,b]=v.useState(!1),[S,c]=v.useState(!1),[d,i]=v.useState(!0);v.useEffect(()=>{w(this,null,function*(){try{const{count:N,error:B}=yield U.from("financial_transactions").select("*",{count:"exact"}).eq("type","expense");if(B){console.error("Error checking expenses:",B);return}c(N!==0),N!==0&&i(!1)}catch(N){console.error("Error checking expenses:",N)}})},[]),v.useEffect(()=>{u()},[m]);function u(){return w(this,null,function*(){r(!0);try{const y=yield Ge();if(Array.isArray(y)){const N=y.filter(Q=>Q.type==="expense");a(N);const B=y.filter(Q=>Q.type==="revenue");x(B)}else a([]),x([]),f({title:"Error",description:"Failed to load financial data correctly",variant:"destructive"})}catch(y){f({title:"Error",description:"Failed to load financial data",variant:"destructive"})}finally{r(!1)}})}const G=()=>w(this,null,function*(){b(!0);try{(yield st())&&(yield u(),c(!0),i(!1))}catch(y){f({title:"Error",description:"Failed to add sample expenses",variant:"destructive"})}finally{b(!1)}}),L=()=>w(this,null,function*(){r(!0);try{yield ve(),f({title:"Expenses Imported",description:"All demo expenses (~100) have been imported."}),c(!0),i(!1),yield u()}catch(y){f({title:"Import Failed",description:(y==null?void 0:y.message)||"Failed to import expenses.",variant:"destructive"})}finally{r(!1)}}),g=l.filter(y=>{if(!y.date)return!1;const N=new Date(y.date),B=new Date,ye=(N.getTime()-B.getTime())/(1e3*3600*24);return ye>0&&ye<=7}),C=g.reduce((y,N)=>y+N.amount,0);return e.jsx(is,{children:e.jsxs("div",{className:"px-6 py-8 max-w-7xl mx-auto min-h-screen bg-gradient-to-br from-siso-bg via-siso-bg-alt to-siso-bg rounded-lg",children:[e.jsx(Bs,{icon:os,title:"Financial Management",subtitle:"Manage your expenses, revenue, and pipeline statistics"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold tracking-tight text-siso-text-bold",children:"Financial Management"}),e.jsx("p",{className:"text-sm text-siso-text mt-1",children:"Manage your expenses and revenue"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!S&&d&&e.jsxs(j,{className:"mt-2 md:mt-0 font-bold bg-gradient-to-r from-siso-red to-siso-orange hover:from-siso-red/90 hover:to-siso-orange/90 text-white",onClick:L,disabled:t,children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),t?"Importing Expenses...":"Bulk Import All Expenses"]}),!S&&!d&&e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"secondary",onClick:G,disabled:t||E,className:"mt-2 md:mt-0 bg-siso-bg-alt hover:bg-siso-bg border-siso-border text-siso-text-bold",children:E?"Adding Expenses...":"Add Sample Expenses"}),e.jsx(nt,{onImport:u})]})]})]}),g.length>0&&e.jsx(A,{className:"mb-6 bg-siso-orange/20 border border-siso-orange/50 backdrop-blur-sm",children:e.jsxs("div",{className:"p-4 flex items-center",children:[e.jsx(J,{className:"h-5 w-5 text-siso-orange mr-2"}),e.jsx("span",{className:"text-siso-text-bold font-medium",children:`£${C.toFixed(2)} in upcoming expenses due in the next 7 days`})]})}),e.jsxs(le,{defaultValue:"dashboard",className:"mt-6",onValueChange:n,children:[e.jsxs(xe,{className:"grid grid-cols-4 w-full max-w-md bg-siso-bg-alt border-siso-border",children:[e.jsx(M,{value:"dashboard",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"Dashboard"}),e.jsx(M,{value:"expenses",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"Expenses"}),e.jsx(M,{value:"revenue",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"Revenue"}),e.jsx(M,{value:"pipeline",className:"data-[state=active]:bg-siso-orange data-[state=active]:text-white",children:"Pipeline"})]}),e.jsx(Z,{value:"dashboard",className:"mt-6",children:e.jsx(Ws,{})}),e.jsx(Z,{value:"expenses",className:"mt-6",children:e.jsx(Qs,{expenses:l,isLoading:t,onDataChange:u})}),e.jsx(Z,{value:"revenue",className:"mt-6",children:e.jsx(Xs,{revenues:o,isLoading:t,onDataChange:u})}),e.jsx(Z,{value:"pipeline",className:"mt-6",children:e.jsx(et,{expenses:l,revenues:o,isLoading:t,onDataChange:u})})]})]})})}export{St as default};
