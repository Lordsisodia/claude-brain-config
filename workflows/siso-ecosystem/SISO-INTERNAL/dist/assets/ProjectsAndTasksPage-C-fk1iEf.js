var ee=Object.defineProperty,te=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var O=(t,s,r)=>s in t?ee(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,y=(t,s)=>{for(var r in s||(s={}))se.call(s,r)&&O(t,r,s[r]);if(_)for(var r of _(s))re.call(s,r)&&O(t,r,s[r]);return t},A=(t,s)=>te(t,ae(s));var T=(t,s,r)=>new Promise((d,m)=>{var o=n=>{try{i(r.next(n))}catch(c){m(c)}},h=n=>{try{i(r.throw(n))}catch(c){m(c)}},i=n=>n.done?d(n.value):Promise.resolve(n.value).then(o,h);i((r=r.apply(t,s)).next())});import{y as $,j as e,cp as ie,N as ne,aS as oe,aT as ce,aU as le,cq as de,R as L,a$ as H,aM as X,aW as me,aY as xe,bO as he,cr as pe,K as ge,ah as ue,bx as je,at as z,aa as R,cs as be,r as F,bf as fe,b6 as ve,b7 as we,z as ye,bh as Ne,b0 as De}from"./vendor-C50ijZWh.js";import{A as U}from"./AppLayout-BhL6t15E.js";import{C as I,d as j,o as Ae,B as C,P as B,h as w,T as Ce,i as ke,j as Pe,A as Fe,p as Te,q as Me,k as Se,u as Y,l as J,s as M,r as Be}from"./index-Blbobipf.js";import{G as q}from"./glow-effect-BkabJgn5.js";import{bM as $e,bN as Ee,bO as Le,bP as Ie,a$ as P}from"./libs-B3eAAgHd.js";import{P as Ye,a as _e,b as Oe}from"./popover-BCE2rLYx.js";import{C as ze}from"./calendar-CM33CvjS.js";import{S as Re,b as Ue}from"./sheet-EfhB7uWf.js";import{S as qe}from"./scroll-area-D4x0YgaW.js";import{B as Ve,a as Ke,b as S,c as V,d as K,e as W}from"./breadcrumb-hY_ZKJ2-.js";import"./MainLayout-CYr31jBl.js";import"./supabase-D8k0GRjn.js";function We({name:t,logo:s,description:r,status:d="active",created_at:m,onSelect:o}){const h=$();if(!t)return e.jsxs("div",{className:"relative",children:[e.jsx(q,{colors:["#ea384c","#8B0000","#FF0000","#600000"],mode:"static",blur:"medium"}),e.jsxs(I,{onClick:()=>h("/onboarding-chat"),className:"relative p-12 flex flex-col items-center justify-center gap-8 cursor-pointer bg-black/80 backdrop-blur-xl border border-[#ea384c]/20 hover:border-[#ea384c]/50 transition-all duration-300",children:[e.jsx("div",{className:"h-40 w-40 rounded-full bg-gradient-to-r from-[#ea384c] to-black flex items-center justify-center",children:e.jsx(ie,{size:80,className:"text-white"})}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h3",{className:"text-3xl font-semibold text-white",children:"Start New Crypto Project"}),e.jsx("p",{className:"text-siso-text max-w-xl text-lg",children:"Begin your blockchain journey by creating a new cryptocurrency project"}),e.jsxs(j,{className:"w-full bg-gradient-to-r from-siso-red to-siso-orange text-white",onClick:()=>h("/onboarding-chat"),children:["Start Building",e.jsx(ne,{className:"ml-2 h-4 w-4"})]})]})]})]});const i=()=>{h(`/projects/${t==null?void 0:t.toLowerCase()}`)};return e.jsxs("div",{className:"relative w-full",children:[e.jsx(q,{colors:["#ea384c","#8B0000","#FF0000","#600000"],mode:"static",blur:"medium"}),e.jsx(I,{onClick:i,className:"relative p-8 bg-black/80 backdrop-blur-xl border border-[#ea384c]/20 hover:border-[#ea384c]/50 transition-all duration-300 group w-full cursor-pointer",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"flex-shrink-0",children:s?e.jsx("img",{src:s,alt:`${t} logo`,className:"h-40 w-40 rounded-full object-cover ring-4 ring-[#ea384c]/20 group-hover:ring-[#ea384c]/40 transition-all duration-300",loading:"lazy"}):e.jsx("div",{className:"h-40 w-40 rounded-full bg-gradient-to-br from-[#ea384c] to-black flex items-center justify-center ring-4 ring-[#ea384c]/20 group-hover:ring-[#ea384c]/40 transition-all duration-300",children:e.jsx("img",{src:"/public/lovable-uploads/37c88c59-ac56-4cf7-a671-e918e9338bc9.png",alt:`${t} logo`,className:"h-24 w-24 object-contain"})})}),e.jsxs("div",{className:"flex-grow space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-semibold text-white group-hover:text-[#ea384c] transition-colors duration-300",children:t}),e.jsxs("p",{className:"text-base text-siso-text mt-2",children:["Created on ",Ae(m||"","long")]})]}),e.jsx(C,{variant:"secondary",className:"text-base px-4 py-1 bg-[#ea384c]/20 text-[#ea384c]",children:d})]}),r&&e.jsx("p",{className:"text-siso-text text-lg leading-relaxed max-w-3xl",children:r}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-siso-text",children:[e.jsx(oe,{size:16}),e.jsx("span",{children:"Smart Contract"})]}),e.jsx(B,{value:80,className:"h-2",indicatorColor:"#ea384c"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-siso-text",children:[e.jsx(ce,{size:16}),e.jsx("span",{children:"Backend Integration"})]}),e.jsx(B,{value:65,className:"h-2",indicatorColor:"#ea384c"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-siso-text",children:[e.jsx(le,{size:16}),e.jsx("span",{children:"Testing"})]}),e.jsx(B,{value:45,className:"h-2",indicatorColor:"#ea384c"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx(j,{onClick:n=>{n.stopPropagation(),h("/projects/tasks")},variant:"outline",className:"border-[#ea384c]/30 text-[#ea384c] hover:bg-[#ea384c]/10 flex-1 py-6 text-lg",children:"View Development Tasks"}),e.jsx(j,{onClick:o,className:"bg-gradient-to-r from-[#ea384c] to-black hover:opacity-90 flex-1 py-6 text-lg",children:"Open Project Dashboard"})]})]})]})})]})}const Ge=({id:t,children:s,className:r})=>{const{isOver:d,setNodeRef:m}=Le({id:t});return e.jsx("div",{className:w("flex h-full min-h-40 flex-col gap-2 rounded-lg border bg-black/20 p-4 shadow-sm transition-all",d?"border-primary/50 bg-black/30":"border-[#403E43]/20",r),ref:m,children:s})},He=({id:t,name:s,index:r,parent:d,children:m,className:o})=>{const{attributes:h,listeners:i,setNodeRef:n,transform:c,isDragging:v}=Ie({id:t,data:{index:r,parent:d}});return e.jsx("div",{className:w("rounded-lg transition-all",v&&"cursor-grabbing opacity-85 shadow-lg",o),style:{transform:c?`translateX(${c.x}px) translateY(${c.y}px)`:void 0},ref:n,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",A(y(y({className:"p-1 rounded hover:bg-gray-500/10 cursor-grab active:cursor-grabbing"},i),h),{children:e.jsx(de,{className:"h-4 w-4 text-gray-500"})})),e.jsx("div",{className:"flex-1",children:m!=null?m:e.jsx("p",{className:"m-0 font-medium text-sm",children:s})})]})})},Xe=({children:t,className:s})=>e.jsx("div",{className:w("flex flex-1 flex-col gap-2",s),children:t}),Je=t=>"children"in t?t.children:e.jsxs("div",{className:w("flex shrink-0 items-center gap-2 mb-2",t.className),children:[e.jsx("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:t.color}}),e.jsx("p",{className:"m-0 font-semibold text-sm text-gray-200",children:t.name})]}),Qe=({children:t,onDragEnd:s,className:r})=>e.jsx($e,{collisionDetection:Ee,onDragEnd:s,children:e.jsx("div",{className:w("grid w-full auto-cols-fr grid-flow-col gap-4",r),children:t})}),Ze={low:"text-green-400",medium:"text-amber-400",high:"text-red-400"},et={low:e.jsx(xe,{className:"h-3.5 w-3.5"}),medium:e.jsx(X,{className:"h-3.5 w-3.5"}),high:e.jsx(me,{className:"h-3.5 w-3.5"})},G=L.memo(function({name:s,startAt:r,endAt:d,category:m,owner:o,priority:h,status:i,actionButton:n,actionLink:c,onClick:v,completedAt:f,onDueDateChange:k}){const N=$(),a=Math.ceil((d.getTime()-new Date().getTime())/(1e3*60*60*24)),l=a<0,x=(i==null?void 0:i.name)==="Done",u=g=>{const p=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));return p===0?"Today":p===1?"Yesterday":p<7?`${p} days ago`:p<30?`${Math.floor(p/7)} weeks ago`:p<365?`${Math.floor(p/30)} months ago`:`${Math.floor(p/365)} years ago`},b=g=>{g.stopPropagation(),c&&N(c)};return e.jsxs("div",{onClick:v,className:w("flex flex-col gap-2.5 p-5 rounded-lg backdrop-blur-sm cursor-pointer animate-fade-in shadow-md will-change-transform transition-[border-color,box-shadow] duration-200",x?"bg-gradient-to-br from-[#1a2e1a]/90 to-[#2a4a2a]/90 border-2 border-transparent hover:border-white hover:shadow-green-500/20 hover:shadow-lg ring-1 ring-green-500/20":"bg-gradient-to-br from-[#1f2533]/90 to-[#252229]/90 border border-transparent hover:border-white hover:shadow-lg"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("h3",{className:w("text-[15px] font-medium text-gray-100",x&&"line-through decoration-green-500/70 decoration-2"),children:s}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:w("flex items-center",Ze[h]),children:et[h]}),i&&e.jsx(C,{className:"text-[10px] py-0.5",style:{backgroundColor:`${i.color}20`,color:i.color},children:i.name})]})]}),e.jsx(Ce,{children:e.jsxs(ke,{children:[e.jsx(Pe,{children:e.jsxs(Fe,{className:"h-7 w-7 ring-1 ring-[#9b87f5]/30",children:[e.jsx(Te,{src:o.image}),e.jsx(Me,{className:"bg-[#1f2533] text-xs",children:o.name.slice(0,2)})]})}),e.jsx(Se,{children:e.jsxs("p",{children:["Assigned to ",o.name]})})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",className:"w-fit text-[10px] py-0.5 bg-purple-500/20 text-purple-400 border-purple-500/30",children:m}),e.jsxs(Ye,{children:[e.jsx(_e,{asChild:!0,children:e.jsxs(C,{variant:"outline",className:"w-fit text-[10px] py-0.5 bg-blue-500/20 text-blue-400 border-blue-500/30 cursor-pointer hover:bg-blue-500/30 transition-colors flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),P(d,"MMM d")]})}),e.jsx(Oe,{className:"w-auto p-0",align:"start",children:e.jsx(ze,{mode:"single",selected:d,onSelect:g=>{k&&g&&k(g)},initialFocus:!0})})]})]}),e.jsx("span",{className:w("text-xs px-2.5 py-1 rounded-full",l?"bg-red-500/20 text-red-400":a<=2?"bg-amber-500/20 text-amber-400":"bg-green-500/20 text-green-400"),children:l?`Overdue by ${Math.abs(a)} day${Math.abs(a)===1?"":"s"}`:a===0?"Due today":(i==null?void 0:i.name)==="Done"?"Completed":`${a} day${a===1?"":"s"} left`})]}),n&&e.jsx(j,{size:"sm",className:"w-full mt-2 bg-[#0078D4] hover:bg-[#1A91FF] text-white transition-colors duration-200 font-medium",onClick:b,children:n}),!n&&(i==null?void 0:i.name)!=="Done"&&e.jsxs("span",{className:"text-xs text-[#aaadb0] mt-1",children:[P(r,"MMM d")," - ",P(d,"MMM d, yyyy")]}),(i==null?void 0:i.name)==="Done"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-400",children:"Task Completed"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-green-300/80",children:"Completion Date:"}),e.jsx("span",{className:"text-green-300 font-medium",children:f?P(f,"MMM d, yyyy"):P(d,"MMM d, yyyy")})]}),f&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-green-300/80",children:"Completed:"}),e.jsx("span",{className:"text-green-300",children:u(f)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-green-300/80",children:"Duration:"}),e.jsxs("span",{className:"text-green-300",children:[Math.ceil((f||d).getTime()-r.getTime())/(1e3*60*60*24)," days"]})]})]})]})]})]})});function tt({task:t,isOpen:s,onClose:r,onUpdateTask:d}){const m=$(),{toast:o}=Y();if(!t)return null;const h=()=>{if(t.category.includes("%")){const N=t.category.match(/(\d+)%/);return N?parseInt(N[1],10):0}return t.status.name==="Done"?100:0},i=(N,a)=>`${P(N,"MMM d")} - ${P(a,"MMM d, yyyy")}`,n=()=>{t.actionLink&&(m(t.actionLink),r())},c=()=>{d&&t&&(d(A(y({},t),{status:{name:"Done",color:"#10B981"}})),o({title:"Task Approved",description:"You've successfully approved this task!"}))},v=()=>{o({title:"Feedback Submitted",description:"Thank you for your feedback. Our team will review it shortly."}),r()},f=h(),k=t.category.includes("Payment")||t.category.includes("Deposit")||t.category.includes("Instalment");return e.jsx(Re,{open:s,onOpenChange:r,children:e.jsx(Ue,{className:"w-[95vw] sm:w-[900px] p-0 bg-[#222]/95 backdrop-blur-xl border-[#333] shadow-xl",children:e.jsx(qe,{className:"h-[calc(100vh-2rem)]",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(C,{variant:"outline",className:"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20",children:t.category}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",className:"hover:bg-purple-500/10",children:e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(j,{variant:"ghost",size:"icon",className:"hover:bg-purple-500/10",children:e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:t.name}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(C,{variant:"outline",className:t.priority==="high"?"bg-red-500/10 text-red-400 border-red-500/20":t.priority==="medium"?"bg-amber-500/10 text-amber-400 border-amber-500/20":"bg-green-500/10 text-green-400 border-green-500/20",children:[e.jsx(ge,{className:"h-3 w-3 mr-1"}),t.priority.charAt(0).toUpperCase()+t.priority.slice(1)," Priority"]}),e.jsx(C,{variant:"outline",style:{backgroundColor:`${t.status.color}20`,color:t.status.color,borderColor:`${t.status.color}30`},children:t.status.name})]})]}),e.jsx("div",{className:"bg-purple-950/30 rounded-lg p-4 border border-purple-500/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-300",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:i(t.startAt,t.endAt)})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm font-medium text-white",children:e.jsx("h3",{children:"Progress"})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f,"%"]})]}),e.jsx(B,{value:f,className:"h-2.5",indicatorClassName:w(f===100?"bg-green-500":"bg-gradient-to-r from-[#0078D4] to-[#1A91FF]")})]}),e.jsxs("div",{className:"space-y-3 border-t border-[#333] pt-5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-white",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("h3",{children:"Description"})]}),e.jsx("p",{className:"text-sm text-muted-foreground pl-6 leading-relaxed",children:t.description||"No description provided."})]}),e.jsxs("div",{className:"space-y-3 border-t border-[#333] pt-5",children:[e.jsx("h3",{className:"text-sm font-medium text-white",children:"Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.actionButton&&e.jsxs(j,{onClick:n,className:"bg-[#0078D4] hover:bg-[#1A91FF] hover:scale-[1.02] transition-all",size:"lg",children:[k&&e.jsx(je,{className:"mr-1 h-4 w-4"}),t.actionButton]}),t.status.name==="Awaiting Your Action"&&e.jsxs(e.Fragment,{children:[e.jsxs(j,{variant:"outline",onClick:c,className:"border-green-500/30 text-green-500 hover:bg-green-500/10 hover:scale-[1.02] transition-all",size:"lg",children:[e.jsx(z,{className:"mr-1 h-4 w-4"}),"Approve"]}),e.jsxs(j,{variant:"outline",onClick:v,className:"border-blue-500/30 text-blue-500 hover:bg-blue-500/10 hover:scale-[1.02] transition-all",size:"lg",children:[e.jsx(R,{className:"mr-1 h-4 w-4"}),"Submit Feedback"]})]}),t.status.name==="Done"&&e.jsxs(C,{variant:"outline",className:"bg-green-500/10 text-green-400 border-green-500/20 py-1.5 px-3",children:[e.jsx(z,{className:"mr-1 h-4 w-4"}),"Completed"]})]})]}),t.actionLink&&e.jsxs("div",{className:"space-y-3 border-t border-[#333] pt-5",children:[e.jsx("h3",{className:"text-sm font-medium text-white",children:"Related Links"}),e.jsxs("div",{className:"pl-6 space-y-2",children:[e.jsx(j,{variant:"link",className:"text-[#0078D4] hover:text-[#1A91FF] p-0 h-auto transition-colors",onClick:()=>m("/projects/ubahcrypt"),children:"View Project Details"}),k&&e.jsx(j,{variant:"link",className:"text-[#0078D4] hover:text-[#1A91FF] p-0 h-auto ml-4 transition-colors",onClick:()=>m("/financial"),children:"View Billing History"})]})]}),e.jsxs("div",{className:"space-y-4 mt-6 border-t border-[#333] pt-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-white",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("h3",{children:"Comments & Updates"})]}),e.jsxs(j,{variant:"ghost",size:"sm",className:"text-xs hover:bg-purple-500/10 text-muted-foreground hover:text-white transition-colors",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"Add Comment"]})]}),e.jsx("div",{className:"rounded-lg bg-[#1A1A1A] border border-[#333] p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments or updates yet."})})]})]})})})})}const at=[{id:"1",name:"Awaiting Your Action",color:"#FF0000"},{id:"2",name:"In Development",color:"#F59E0B"},{id:"3",name:"Done",color:"#10B981"}],E=[{id:"1",name:"Collect Project Information",description:"Please fill out the form with your business details, project goals, and technical specs to help us create your app plan.",startAt:new Date(Date.now()),endAt:new Date(Date.now()),category:"Onboarding: 0%",priority:"high",owner:{name:"Your Project Manager",image:"https://api.dicebear.com/7.x/initials/svg?seed=PM"},status:{name:"Awaiting Your Action",color:"#FF0000"},actionButton:"Complete Now",actionLink:"/onboarding"},{id:"2",name:"Approve App Plan",description:"We've created a proposed app plan with milestones and costs. Review it and let us know if any changes are needed.",startAt:new Date(Date.now()),endAt:new Date(Date.now()+864e5),category:"Planning: 50%",priority:"high",owner:{name:"Your Project Manager",image:"https://api.dicebear.com/7.x/initials/svg?seed=PM"},status:{name:"Awaiting Your Action",color:"#FF0000"},actionButton:"Review Now",actionLink:"/onboarding-chat"},{id:"3",name:"Make Deposit Payment",description:"A £1,000 deposit is required to start development. You can pay securely using Stripe or crypto (with a 20% SISO coin bonus).",startAt:new Date(Date.now()),endAt:new Date(Date.now()+1728e5),category:"Deposit: £1,000",priority:"high",owner:{name:"Finance Team",image:"https://api.dicebear.com/7.x/initials/svg?seed=FT"},status:{name:"Awaiting Your Action",color:"#FF0000"},actionButton:"Pay Now",actionLink:"/financial"},{id:"4",name:"Phase 1: Initial Development",description:"Our team is currently designing the UI and wireframes for your app. You'll be able to review them soon.",startAt:new Date(Date.now()),endAt:new Date(Date.now()+30*864e5),category:"Phase 1: 30%",priority:"medium",owner:{name:"Development Team",image:"https://api.dicebear.com/7.x/initials/svg?seed=DT"},status:{name:"In Development",color:"#F59E0B"},actionButton:"View Progress",actionLink:"/projects/ubahcrypt"},{id:"5",name:"Phase 2: Core Development",description:"We're building the core functionality of your app, including user login and payment gateway integration.",startAt:new Date(Date.now()),endAt:new Date(Date.now()+60*864e5),category:"Phase 2: 0%",priority:"medium",owner:{name:"Development Team",image:"https://api.dicebear.com/7.x/initials/svg?seed=DT"},status:{name:"In Development",color:"#F59E0B"},actionButton:"View Progress",actionLink:"/projects/ubahcrypt"},{id:"6",name:"Client Kickoff Call",description:"We discussed your project goals and expectations during the kickoff call.",startAt:new Date("2025-04-30"),endAt:new Date("2025-04-30"),category:"Completed",priority:"medium",owner:{name:"Your Project Manager",image:"https://api.dicebear.com/7.x/initials/svg?seed=PM"},status:{name:"Done",color:"#10B981"},completedAt:new Date("2025-04-30")},{id:"7",name:"Review Phase 1 Deliverables",description:"We've completed the UI designs and wireframes. Please review and provide feedback or approval.",startAt:new Date(Date.now()),endAt:new Date(Date.now()+5*864e5),category:"Phase 1: 50%",priority:"high",owner:{name:"Your Project Manager",image:"https://api.dicebear.com/7.x/initials/svg?seed=PM"},status:{name:"Awaiting Your Action",color:"#FF0000"},actionButton:"Review Now",actionLink:"/projects/ubahcrypt"},{id:"8",name:"Collect Phase 1 Instalment",description:"A £1,500 instalment is due for the completion of Phase 1. Pay securely to continue development.",startAt:new Date(Date.now()),endAt:new Date(Date.now()+3*864e5),category:"Instalment: £1,500",priority:"high",owner:{name:"Finance Team",image:"https://api.dicebear.com/7.x/initials/svg?seed=FT"},status:{name:"Awaiting Your Action",color:"#FF0000"},actionButton:"Pay Now",actionLink:"/financial"},{id:"9",name:"Phase 3: Final Development",description:"We're polishing the app, adding final features, and preparing for launch.",startAt:new Date(Date.now()),endAt:new Date(Date.now()+30*864e5),category:"Phase 3: 0%",priority:"medium",owner:{name:"Development Team",image:"https://api.dicebear.com/7.x/initials/svg?seed=DT"},status:{name:"In Development",color:"#F59E0B"},actionButton:"View Progress",actionLink:"/projects/ubahcrypt"},{id:"10",name:"Project Completed",description:"Congratulations! Your app has been successfully launched and transferred to your hosting provider.",startAt:new Date("2025-05-30"),endAt:new Date("2025-05-30"),category:"Completed",priority:"low",owner:{name:"Your Project Manager",image:"https://api.dicebear.com/7.x/initials/svg?seed=PM"},status:{name:"Done",color:"#10B981"},completedAt:new Date("2025-05-30")}];function st(){const[t,s]=F.useState([]),[r,d]=F.useState(null),[m,o]=F.useState(!0),[h,i]=F.useState(!1),{toast:n}=Y(),{user:c}=J(),v=a=>{var u;const l={pending:{name:"Awaiting Your Action",color:"#FF0000"},in_progress:{name:"In Development",color:"#F59E0B"},completed:{name:"Done",color:"#10B981"}},x={urgent:"🔴",high:"🟠",medium:"🟡",low:"🟢"};return{id:a.id,name:a.title,description:a.description||"No description provided",startAt:new Date(a.created_at||Date.now()),endAt:new Date(a.due_date||Date.now()+7*24*60*60*1e3),category:`${x[a.priority||"medium"]} ${((u=a.category)==null?void 0:u.toUpperCase())||"GENERAL"}`,priority:a.priority||"medium",owner:{name:"SISO Team",image:"https://api.dicebear.com/7.x/initials/svg?seed=SISO"},status:l[a.status||"pending"],completedAt:a.completed_at?new Date(a.completed_at):void 0}},f=()=>T(this,null,function*(){try{o(!0),console.log("Fetching tasks for user:",c==null?void 0:c.id);let a=M.from("tasks").select("id, title, description, created_at, due_date, category, priority, status, completed_at, assigned_to, created_by");c!=null&&c.id&&(a=a.or(`assigned_to.eq.${c.id},created_by.eq.${c.id}`));const{data:l,error:x}=yield a.order("created_at",{ascending:!1});if(x)console.error("Error fetching tasks:",x),n({variant:"destructive",title:"Error loading tasks",description:"Could not load tasks from database. Using sample data."}),s(E);else{const u=l.map(v);s(u.length>0?u:E)}}catch(a){console.error("Database connection error:",a),n({variant:"destructive",title:"Database connection error",description:"Using sample data while connection is restored."}),s(E)}finally{o(!1)}});F.useEffect(()=>{f()},[c]);const k=a=>T(this,null,function*(){const{active:l,over:x}=a;if(!x)return;const b={"Awaiting Your Action":"pending","In Development":"in_progress",Done:"completed"}[x.id];try{const{error:g}=yield M.from("tasks").update({status:b}).eq("id",l.id);if(g){n({variant:"destructive",title:"Error updating task",description:"Could not update task status in database."});return}s(D=>D.map(p=>{if(p.id===l.id){const Q=x.id==="Awaiting Your Action"?"#FF0000":x.id==="In Development"?"#F59E0B":"#10B981",Z=A(y({},p),{status:{name:x.id,color:Q}});return n({title:"Task Status Updated",description:`"${p.name}" moved to ${x.id}`}),Z}return p}))}catch(g){console.error("Error updating task status:",g),n({variant:"destructive",title:"Update failed",description:"Could not update task status."})}}),N=a=>{s(l=>l.map(x=>x.id===a.id?a:x)),d(null),n({title:"Task updated",description:"Task details have been updated successfully."})};return m?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(fe,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading tasks..."})]}):e.jsxs("div",{className:"p-4",children:[e.jsx(tt,{task:r,isOpen:!!r,onClose:()=>d(null),onUpdateTask:N}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Qe,{onDragEnd:k,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:at.filter(a=>a.name!=="Done").map(a=>e.jsxs(Ge,{id:a.name,className:"bg-[#1A1A1A]/80 border border-[#333] hover:border-[#444] rounded-xl",children:[e.jsx(Je,{name:a.name,color:a.name==="Awaiting Your Action"?"#FF5555":"#FFAA33"}),e.jsxs(Xe,{children:[t.filter(l=>l.status.name===a.name).map((l,x,u)=>e.jsxs(L.Fragment,{children:[e.jsx(He,{id:l.id,name:l.name,parent:a.name,index:x,className:"bg-transparent shadow-none p-0",children:e.jsx("div",{onClick:()=>d(l),children:e.jsx(G,A(y({},l),{completedAt:l.completedAt,onDueDateChange:b=>T(this,null,function*(){if(b)try{const{error:g}=yield M.from("tasks").update({due_date:b.toISOString()}).eq("id",l.id);if(g){n({variant:"destructive",title:"Error updating due date",description:"Could not update task due date."});return}s(D=>D.map(p=>p.id===l.id?A(y({},p),{endAt:b}):p)),n({title:"Due date updated",description:`Task due date changed to ${b.toLocaleDateString()}`})}catch(g){console.error("Error updating due date:",g),n({variant:"destructive",title:"Update failed",description:"Could not update due date."})}})}))})}),x<u.length-1&&e.jsx("div",{className:"h-px bg-white/40 my-3 mx-4"})]},l.id)),t.filter(l=>l.status.name===a.name).length===0&&e.jsx("div",{className:"flex items-center justify-center h-28 border border-dashed border-[#333] rounded-lg bg-[#1f2533]/30 text-sm text-muted-foreground",children:"No tasks in this section"})]})]},a.name))})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-[#1A1A1A]/80 border border-[#333] hover:border-[#444] rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"Completed Tasks"}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>i(!h),className:"text-green-400 hover:text-green-300 hover:bg-green-500/10",children:h?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Show Completed (",t.filter(a=>a.status.name==="Done").length,")"]})})]}),h&&e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.filter(a=>a.status.name==="Done").length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No completed tasks yet."}):t.filter(a=>a.status.name==="Done").map((a,l,x)=>e.jsxs(L.Fragment,{children:[e.jsx("div",{onClick:()=>d(a),children:e.jsx(G,A(y({},a),{onDueDateChange:u=>T(this,null,function*(){if(u)try{const{error:b}=yield M.from("tasks").update({due_date:u.toISOString()}).eq("id",a.id);if(b){n({variant:"destructive",title:"Error updating due date",description:"Could not update task due date."});return}s(g=>g.map(D=>D.id===a.id?A(y({},D),{endAt:u}):D)),n({title:"Due date updated",description:`Task due date changed to ${u.toLocaleDateString()}`})}catch(b){console.error("Error updating due date:",b),n({variant:"destructive",title:"Update failed",description:"Could not update due date."})}})}))}),l<x.length-1&&e.jsx("div",{className:"h-px bg-white/40 my-3 mx-4"})]},a.id))})]})})]})]})}function jt(){const t=$(),s=ye(),{toast:r}=Y(),{user:d,loading:m}=J(),{data:o,isLoading:h,error:i,refetch:n}=Be(),c=s.pathname==="/projects/tasks";return F.useEffect(()=>{!m&&!d&&(console.log("No authenticated user, redirecting to auth"),r({title:"Authentication Required",description:"Please sign in to view your projects",variant:"destructive"}),t("/auth"))},[d,m,t,r]),m?e.jsx(U,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded mb-4"})]})})}):e.jsx(U,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(Ve,{className:"mb-6",children:e.jsxs(Ke,{children:[e.jsx(S,{children:e.jsxs(V,{href:"/home",className:"inline-flex items-center gap-1.5 text-siso-text hover:text-white",children:[e.jsx(Ne,{size:16,strokeWidth:2,"aria-hidden":"true"}),"Home"]})}),e.jsx(K,{}),c?e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx(V,{href:"/projects",className:"inline-flex items-center gap-1.5 text-siso-text hover:text-white",children:"Tasks"})}),e.jsx(K,{}),e.jsx(S,{children:e.jsx(W,{children:"Active Tasks"})})]}):e.jsx(S,{children:e.jsx(W,{children:"Projects"})})]})}),e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-to-r from-[#9b87f5] to-[#6E59A5] mb-2",children:c?"Tasks":"Projects"}),e.jsx("p",{className:"text-siso-text",children:c?"Track and manage your tasks efficiently":"Monitor and manage your projects"})]})}),c?e.jsx(st,{}):e.jsx("div",{className:"space-y-8",children:e.jsx(I,{className:"p-6 bg-black/30 border border-siso-text/10",children:h?e.jsx("div",{className:"animate-pulse space-y-8",children:e.jsx("div",{className:"h-64 bg-black/20 rounded-lg"})}):i?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(De,{className:"h-12 w-12 text-[#9b87f5] mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Failed to Load Project"}),e.jsx("p",{className:"text-siso-text mb-4 max-w-md",children:i instanceof Error?i.message:"There was an error loading your project"}),e.jsx(j,{onClick:()=>n(),className:"bg-[#9b87f5] hover:bg-[#9b87f5]/80",children:"Retry"})]}):e.jsx(We,{name:o==null?void 0:o.name,description:o==null?void 0:o.description,created_at:o==null?void 0:o.created_at,status:o==null?void 0:o.status,onSelect:()=>{var v;return t(`/projects/${(v=o==null?void 0:o.name)==null?void 0:v.toLowerCase()}`)}})})})]})})}export{jt as default};
