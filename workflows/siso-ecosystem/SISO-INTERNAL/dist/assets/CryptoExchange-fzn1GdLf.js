var X=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var D=(t,s,a)=>s in t?X(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,k=(t,s)=>{for(var a in s||(s={}))q.call(s,a)&&D(t,a,s[a]);if(E)for(var a of E(s))W.call(s,a)&&D(t,a,s[a]);return t},U=(t,s)=>Z(t,ee(s));var $=(t,s)=>{var a={};for(var r in t)q.call(t,r)&&s.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&E)for(var r of E(t))s.indexOf(r)<0&&W.call(t,r)&&(a[r]=t[r]);return a};var T=(t,s,a)=>new Promise((r,n)=>{var d=o=>{try{c(a.next(o))}catch(x){n(x)}},m=o=>{try{c(a.throw(o))}catch(x){n(x)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(d,m);c((a=a.apply(t,s)).next())});import{j as e,m as i,bj as V,O as te,r as l,c1 as se,bf as C,f as P,c2 as J,c3 as ae,c4 as ie,c5 as re,c6 as G,bO as oe,B as ne,c7 as le,c8 as ce,bo as de,c9 as xe}from"./vendor-C50ijZWh.js";import{A as M}from"./AppLayout-BhL6t15E.js";import{h as j,I as Y,d as N,u as H,s as f,C as _,a as O,b as I,c as A}from"./index-Blbobipf.js";import{S as L}from"./scroll-area-D4x0YgaW.js";import{D as me,a as ue,b as he,c as pe}from"./dialog-CB9qAGL5.js";import{S as ge,a as be,b as fe,c as ve,d as B}from"./select-Ba1tjTaP.js";import{bK as je}from"./libs-B3eAAgHd.js";import{F as Ne}from"./FloatingOrbs-BtBv6Li9.js";import{S as ye,a as we,b as Se,c as Te,d as ke}from"./sheet-EfhB7uWf.js";import"./MainLayout-CYr31jBl.js";import"./supabase-D8k0GRjn.js";const Ce=({showHistory:t,setShowHistory:s})=>e.jsxs(i.div,{className:"flex items-center justify-between",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-siso-red to-siso-orange bg-clip-text text-transparent",children:"Swap Points"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(!t),className:"p-2 hover:bg-siso-text/5 rounded-lg transition-colors relative group",title:"Transaction History",children:[e.jsx(V,{className:"w-5 h-5 text-siso-text/60 relative z-10"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-siso-red/10 to-siso-orange/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(i.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 hover:bg-siso-text/5 rounded-lg transition-colors relative group",title:"Exchange Settings",children:[e.jsx(te,{className:"w-5 h-5 text-siso-text/60 relative z-10"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-siso-red/10 to-siso-orange/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),Fe=({transactions:t})=>e.jsxs(i.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-black/20 rounded-lg p-4 border border-siso-text/10 backdrop-blur",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-siso-text-bold",children:"Transaction History"}),e.jsx(L,{className:"h-[300px]",children:e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 bg-black/30 rounded-lg border border-siso-text/5 hover:border-siso-text/20 transition-all duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-siso-text/80",children:[s.points_exchanged.toLocaleString()," Points â†’ ",s.tokens_received.toLocaleString()," Tokens"]}),e.jsx("span",{className:j("text-xs px-2 py-1 rounded-full font-medium",s.status==="completed"&&"bg-green-500/20 text-green-400",s.status==="failed"&&"bg-red-500/20 text-red-400",s.status==="pending"&&"bg-yellow-500/20 text-yellow-400"),children:s.status})]}),e.jsx("div",{className:"text-xs text-siso-text/60 mt-1",children:new Date(s.created_at).toLocaleString()})]},s.id))})})]}),Ee=({userPoints:t,sisoTokens:s,loading:a,onExchange:r})=>{const[n,d]=l.useState(""),m=o=>{const x=Math.floor(t*o/100);d(x.toString())},c=n?parseInt(n)/1e3:0;return e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-siso-text/60 uppercase tracking-wider",children:"From"}),e.jsxs(i.div,{className:"bg-black/20 rounded-lg p-4 border border-siso-text/10 hover:border-siso-text/20 transition-all duration-300 relative group backdrop-blur",whileHover:{scale:1.01},transition:{duration:.2},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-siso-red/5 to-siso-orange/5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i.div,{className:"w-8 h-8 rounded-full bg-gradient-to-br from-siso-red to-siso-orange flex items-center justify-center relative",whileHover:{scale:1.1},transition:{duration:.2},children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:"SP"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-siso-red to-siso-orange blur-lg opacity-50"})]}),e.jsx("span",{className:"font-semibold text-siso-text-bold",children:"SISO Points"})]}),e.jsxs("div",{className:"text-sm text-siso-text/60",children:["Balance: ",t.toLocaleString()]})]}),e.jsx(Y,{type:"number",value:n,onChange:o=>d(o.target.value),placeholder:"0.0",className:"bg-transparent border-none text-2xl font-bold text-siso-text-bold placeholder:text-siso-text/30 focus-visible:ring-0 relative z-10"}),e.jsx("div",{className:"flex gap-2 mt-2",children:[25,50,75,100].map(o=>e.jsxs(i.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(o),className:"px-2 py-1 text-xs rounded-md bg-white/5 hover:bg-white/10 text-siso-text-bold transition-colors relative group",children:[o,"%",e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-siso-red/10 to-siso-orange/10 rounded-md opacity-0 group-hover:opacity-100 transition-opacity"})]},o))})]})]})]}),e.jsx(i.div,{className:"flex justify-center -my-2",animate:{rotate:a?360:0},transition:{duration:1,repeat:a?1/0:0,ease:"linear"},children:e.jsxs(i.div,{className:"w-10 h-10 rounded-full bg-black/20 border border-siso-text/10 flex items-center justify-center relative group backdrop-blur",whileHover:{scale:1.1,rotate:180},transition:{duration:.3},children:[e.jsx(se,{className:"w-5 h-5 text-siso-text/60 relative z-10"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-siso-red/10 to-siso-orange/10 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-siso-text/60 uppercase tracking-wider",children:"To"}),e.jsxs(i.div,{className:"bg-black/20 rounded-lg p-4 border border-siso-text/10 hover:border-siso-text/20 transition-all duration-300 relative group backdrop-blur",whileHover:{scale:1.01},transition:{duration:.2},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-siso-red/5 to-siso-orange/5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i.div,{className:"w-8 h-8 rounded-full bg-gradient-to-br from-siso-red to-siso-orange flex items-center justify-center relative",whileHover:{scale:1.1},transition:{duration:.2},children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:"ST"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-siso-red to-siso-orange blur-lg opacity-50"})]}),e.jsx("span",{className:"font-semibold text-siso-text-bold",children:"SISO Tokens"})]}),e.jsxs("div",{className:"text-sm text-siso-text/60",children:["Balance: ",s.toLocaleString()]})]}),e.jsx(Y,{type:"text",value:c?c.toLocaleString():"",readOnly:!0,placeholder:"0.0",className:"bg-transparent border-none text-2xl font-bold text-siso-text-bold placeholder:text-siso-text/30 focus-visible:ring-0 relative z-10"})]})]})]}),e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-center p-2 rounded-lg bg-black/10 backdrop-blur relative overflow-hidden group",children:[e.jsx("div",{className:"relative z-10",children:"1 SISO Token = 1,000 SISO Points"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 ease-in-out"})]}),e.jsx(i.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(N,{onClick:()=>r(parseInt(n)),disabled:a||!n,className:j("w-full h-12 bg-gradient-to-r from-siso-red to-siso-orange relative group overflow-hidden","hover:from-siso-red/90 hover:to-siso-orange/90","text-white font-semibold rounded-lg transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed"),children:a?e.jsx(i.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(C,{className:"w-5 h-5"})}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"relative z-10",children:"Swap Points for Tokens"}),e.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-500 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})})})]})},He=({userPoints:t})=>{const[s,a]=l.useState(!1),[r,n]=l.useState(0),[d,m]=l.useState([]),[c,o]=l.useState(!1),{toast:x}=H();l.useEffect(()=>{const u=()=>T(void 0,null,function*(){try{const{data:{session:p}}=yield f.auth.getSession();if(!p)return;const{data:y}=yield f.from("profiles").select("siso_tokens").eq("id",p.user.id).single();y&&n(y.siso_tokens||0);const{data:w}=yield f.from("user_crypto_history").select("*").eq("user_id",p.user.id).order("created_at",{ascending:!1});w&&m(w)}catch(p){console.error("Error fetching user data:",p)}});u();const h=f.channel("crypto-updates").on("postgres_changes",{event:"*",schema:"public",table:"crypto_transactions"},p=>{console.log("Transaction update:",p),u()}).subscribe();return()=>{f.removeChannel(h)}},[]);const b=u=>T(void 0,null,function*(){if(!u||u<=0){x({variant:"destructive",title:"Invalid amount",description:"Please enter a valid number of points to exchange."});return}if(u>t){x({variant:"destructive",title:"Insufficient points",description:"You don't have enough points for this exchange."});return}try{a(!0);const{data:{session:h}}=yield f.auth.getSession();if(!h){x({variant:"destructive",title:"Authentication required",description:"Please sign in to exchange points."});return}const{data:p,error:y}=yield f.from("crypto_transactions").insert([{user_id:h.user.id,points_exchanged:u,tokens_received:u/1e3,transaction_type:"exchange"}]).select().single();if(y)throw y;if(p.status==="completed"){const w=document.querySelector(".exchange-container");if(w){const g=document.createElement("div");g.className="success-particle",w.appendChild(g),setTimeout(()=>g.remove(),1e3)}x({title:"Exchange successful",description:`Converted ${u} points to ${u/1e3} SISO tokens.`})}else x({variant:"destructive",title:"Exchange failed",description:"Failed to process the exchange. Please try again."})}catch(h){x({variant:"destructive",title:"Exchange failed",description:h.message})}finally{a(!1)}});return e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6 exchange-container relative backdrop-blur-lg bg-siso-bg-alt/30 p-6 rounded-2xl border border-siso-text/10 shadow-xl",children:[e.jsx(Ce,{showHistory:c,setShowHistory:o}),e.jsx(P,{mode:"wait",children:c?e.jsx(Fe,{transactions:d}):e.jsx(Ee,{userPoints:t,sisoTokens:r,loading:s,onExchange:b})})]})},_e=({nft:t,isOpen:s,onClose:a})=>t?e.jsx(me,{open:s,onOpenChange:a,children:e.jsxs(ue,{className:"max-w-2xl bg-black/90 border-siso-text/10 backdrop-blur-xl",children:[e.jsx(he,{children:e.jsx(pe,{className:"text-xl font-bold bg-gradient-to-r from-siso-red to-siso-orange bg-clip-text text-transparent",children:t.name})}),e.jsxs(i.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},whileHover:{scale:1.02},className:"relative rounded-lg overflow-hidden shadow-2xl",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full rounded-lg object-cover aspect-square"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]}),e.jsx(L,{className:"h-[400px]",children:e.jsxs(i.div,{className:"space-y-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:[t.description&&e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsx("h3",{className:"text-sm font-medium text-siso-text/60 mb-2",children:"Description"}),e.jsx("p",{className:"text-siso-text leading-relaxed",children:t.description})]}),t.attributes&&t.attributes.length>0&&e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[e.jsx("h3",{className:"text-sm font-medium text-siso-text/60 mb-3",children:"Attributes"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.attributes.map((r,n)=>e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5+n*.1},className:j("bg-siso-text/5 p-3 rounded-lg border border-siso-text/10","hover:border-siso-text/20 transition-all duration-300","backdrop-blur-sm"),children:[e.jsx("div",{className:"text-xs text-siso-text/60 mb-1",children:r.trait_type}),e.jsx("div",{className:"text-sm font-medium text-siso-text-bold",children:r.value})]},n))})]})]})})]})]})}):null,Oe=({viewMode:t,setViewMode:s,sortOrder:a,setSortOrder:r,filterAttribute:n,setFilterAttribute:d,uniqueAttributes:m})=>e.jsxs(i.div,{className:"flex flex-wrap gap-4 items-center justify-between",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"icon",onClick:()=>s("grid"),className:j("transition-all duration-300",t==="grid"?"bg-siso-text/10 hover:bg-siso-text/20":""),children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>s("list"),className:j("transition-all duration-300",t==="list"?"bg-siso-text/10 hover:bg-siso-text/20":""),children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>r(a==="asc"?"desc":"asc"),className:"transition-all duration-300 hover:bg-siso-text/10",children:a==="asc"?e.jsx(ie,{className:"h-4 w-4"}):e.jsx(re,{className:"h-4 w-4"})})]}),e.jsxs(ge,{value:n,onValueChange:d,children:[e.jsx(be,{className:"w-[180px] bg-black/20 border-siso-text/10",children:e.jsx(fe,{placeholder:"Filter by attribute"})}),e.jsxs(ve,{children:[e.jsx(B,{value:"all",children:"All Attributes"}),m.map(c=>e.jsx(B,{value:c,children:c},c))]})]})]}),Ie=({nft:t,viewMode:s,index:a,onClick:r})=>e.jsx(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:a*.1},whileHover:{scale:1.02},className:"h-full",children:e.jsx("div",{className:j("bg-background/50 cursor-pointer h-full","hover:bg-background/60 transition-all duration-300","border border-siso-text/10 hover:border-siso-text/20","backdrop-blur-sm shadow-lg hover:shadow-xl rounded-lg"),onClick:r,children:e.jsxs("div",{className:j("p-4",s==="list"?"flex items-center gap-4":""),children:[e.jsx(i.div,{className:j("relative overflow-hidden rounded-lg",s==="list"?"w-24 h-24":"w-full aspect-square"),whileHover:{scale:1.05},transition:{duration:.2},children:e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transform transition-transform duration-300"})}),e.jsxs("div",{className:"flex-1 mt-4",children:[e.jsx("h3",{className:"font-semibold text-siso-text-bold text-lg",children:t.name}),t.description&&s==="list"&&e.jsx("p",{className:"text-sm text-siso-text/80 mt-1 line-clamp-2",children:t.description}),t.attributes&&t.attributes.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.attributes.slice(0,3).map((n,d)=>e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-siso-text/10 text-siso-text/80",children:[n.trait_type,": ",n.value]},d))})]})]})})}),Ae=({loading:t,filteredNFTs:s,viewMode:a,onRefresh:r,onSelectNFT:n})=>e.jsx(P,{mode:"wait",children:t?e.jsx(i.div,{className:"flex justify-center p-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(C,{className:"h-6 w-6 animate-spin text-siso-red"})}):s.length>0?e.jsx(i.div,{className:j("grid gap-4",a==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 auto-rows-fr":"grid-cols-1"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.map((d,m)=>e.jsx(Ie,{nft:d,viewMode:a,index:m,onClick:()=>n(d)},m))}):e.jsxs(i.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("p",{className:"text-siso-text/60 mb-4",children:"No NFTs found in your wallet"}),e.jsx(N,{onClick:r,className:"bg-gradient-to-r from-siso-red to-siso-orange hover:opacity-90",children:"Refresh NFTs"})]})}),Pe=()=>{const[t,s]=l.useState([]),[a,r]=l.useState(!1),[n,d]=l.useState("grid"),[m,c]=l.useState("asc"),[o,x]=l.useState(null),[b,u]=l.useState("all"),{toast:h}=H(),p=()=>T(void 0,null,function*(){try{r(!0);const{data:{session:g}}=yield f.auth.getSession();if(!g){h({variant:"destructive",title:"Authentication required",description:"Please sign in to view your NFTs."});return}const{data:v}=yield f.from("profiles").select("solana_wallet_address").eq("id",g.user.id).single();if(!(v!=null&&v.solana_wallet_address)){h({variant:"destructive",title:"Wallet not connected",description:"Please connect your Solana wallet to view your NFTs."});return}const{data:S,error:F}=yield f.functions.invoke("fetch-solana-nfts",{body:{walletAddress:v.solana_wallet_address}});if(F)throw F;const Q=[...S||[]].sort((z,R)=>m==="asc"?z.name.localeCompare(R.name):R.name.localeCompare(z.name));s(Q)}catch(g){console.error("Error fetching NFTs:",g),h({variant:"destructive",title:"Error fetching NFTs",description:g.message})}finally{r(!1)}});l.useEffect(()=>{p()},[m]);const y=()=>{const g=new Set;return t.forEach(v=>{var S;(S=v.attributes)==null||S.forEach(F=>{g.add(F.trait_type)})}),Array.from(g)},w=t.filter(g=>{var v;return b==="all"?!0:(v=g.attributes)==null?void 0:v.some(S=>S.trait_type===b)});return{nfts:t,loading:a,viewMode:n,setViewMode:d,sortOrder:m,setSortOrder:c,selectedNFT:o,setSelectedNFT:x,filterAttribute:b,setFilterAttribute:u,filteredNFTs:w,fetchNFTs:p,getUniqueAttributes:y}},Le=()=>{const{loading:t,viewMode:s,setViewMode:a,sortOrder:r,setSortOrder:n,selectedNFT:d,setSelectedNFT:m,filterAttribute:c,setFilterAttribute:o,filteredNFTs:x,fetchNFTs:b,getUniqueAttributes:u}=Pe();return e.jsxs(_,{className:"bg-black/20 border-siso-text/10 backdrop-blur-sm",children:[e.jsxs(O,{className:"space-y-4",children:[e.jsx(I,{className:"text-siso-text-bold flex items-center gap-2",children:e.jsxs(i.div,{initial:{scale:.9},animate:{scale:1},className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-6 w-6 text-siso-orange"}),"Your NFT Collection"]})}),e.jsx(Oe,{viewMode:s,setViewMode:a,sortOrder:r,setSortOrder:n,filterAttribute:c,setFilterAttribute:o,uniqueAttributes:u()})]}),e.jsx(A,{children:e.jsx(Ae,{loading:t,filteredNFTs:x,viewMode:s,onRefresh:b,onSelectNFT:m})}),e.jsx(_e,{nft:d,isOpen:!!d,onClose:()=>m(null)})]})},ze=l.createContext({}),K=l.forwardRef((t,s)=>{const u=t,{options:a,globalOptions:r={resize:!0,useWorker:!0},manualstart:n=!1,children:d}=u,m=$(u,["options","globalOptions","manualstart","children"]),c=l.useRef(null),o=l.useCallback(h=>{if(h!==null){if(c.current)return;c.current=je.create(h,U(k({},r),{resize:!0}))}else c.current&&(c.current.reset(),c.current=null)},[r]),x=l.useCallback((h={})=>{var p;return(p=c.current)==null?void 0:p.call(c,k(k({},a),h))},[a]),b=l.useMemo(()=>({fire:x}),[x]);return l.useImperativeHandle(s,()=>b,[b]),l.useEffect(()=>{n||x()},[n,x]),e.jsxs(ze.Provider,{value:b,children:[e.jsx("canvas",k({ref:o},m)),d]})});K.displayName="Confetti";const Re=()=>{const[t,s]=l.useState(null),[a,r]=l.useState(!0),[n,d]=l.useState(0),m=l.useRef(null);H(),l.useEffect(()=>{{s({status:"pending"}),r(!1);return}},[]);const c=()=>T(void 0,null,function*(){if(!(t!=null&&t.metadata))return;const o=`Just minted my Welcome NFT on SISO Resource Hub! ðŸŽ‰
Check out my NFT: ${t.metadata.name}
#SISOHub #NFT`;try{navigator.share?yield navigator.share({title:"My Welcome NFT",text:o,url:window.location.href}):window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(o)}`,"_blank")}catch(x){console.error("Error sharing:",x)}});return a?e.jsxs(_,{className:"bg-black/20 border-siso-text/10",children:[e.jsx(O,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-siso-orange"}),"Welcome NFT"]})}),e.jsx(A,{children:e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(C,{className:"h-6 w-6 animate-spin text-siso-orange"})})})]}):t?e.jsxs(e.Fragment,{children:[e.jsx(K,{ref:m}),e.jsxs(_,{className:"bg-black/20 border-siso-text/10 relative overflow-hidden",children:[e.jsx(O,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-siso-orange"}),"Welcome NFT"]})}),e.jsx(A,{children:e.jsxs(P,{mode:"wait",children:[t.status==="pending"&&e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-siso-text",children:[e.jsx(C,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Minting your welcome NFT..."})]}),e.jsx("div",{className:"w-full h-2 bg-siso-text/10 rounded-full overflow-hidden",children:e.jsx(i.div,{className:"h-full bg-gradient-to-r from-siso-red to-siso-orange",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"linear"}})})]}),t.status==="completed"&&t.metadata&&e.jsxs(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"space-y-4",children:[e.jsxs(i.div,{className:"relative cursor-pointer perspective-1000",style:{transform:`rotateY(${n}deg)`},onMouseMove:o=>{const x=o.currentTarget.getBoundingClientRect(),u=((o.clientX-x.left)/x.width-.5)*30;d(u)},onMouseLeave:()=>d(0),children:[e.jsx("img",{src:t.metadata.image,alt:t.metadata.name,className:"w-full aspect-square rounded-lg object-cover shadow-xl transition-transform duration-300 hover:scale-[1.02]"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-siso-red/20 to-siso-orange/20 rounded-lg pointer-events-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-siso-text-bold text-xl",children:t.metadata.name}),e.jsx("p",{className:"text-sm text-siso-text/80",children:t.metadata.description}),e.jsxs("p",{className:"text-xs text-siso-text/60 font-mono break-all",children:["Mint address: ",t.metadata.mint_address]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(N,{onClick:c,className:"flex-1 bg-gradient-to-r from-siso-red to-siso-orange hover:opacity-90",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs(N,{onClick:()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(`Just minted my Welcome NFT on SISO Resource Hub! ðŸŽ‰
Check out my NFT: ${t.metadata.name}
#SISOHub #NFT`)}`,"_blank"),variant:"outline",className:"flex-1",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Tweet"]})]})]}),t.status==="failed"&&e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-red-500",children:[e.jsx("p",{children:"Failed to mint NFT"}),t.error_message&&e.jsx("p",{className:"text-sm mt-1",children:t.error_message})]})]})})]})]}):null},De=()=>{const[t,s]=l.useState(!0);return l.useEffect(()=>{const a=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",a),window.addEventListener("offline",r),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",r)}},[]),e.jsxs(i.div,{className:"flex items-center gap-2 text-sm",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(ce,{className:`h-4 w-4 ${t?"text-green-500":"text-red-500"}`}),e.jsx("span",{className:"text-siso-text/80",children:t?"Connected":"Offline"}),e.jsx(de,{className:"h-4 w-4 text-siso-orange ml-2"}),e.jsx("span",{className:"text-siso-text/80",children:"Solana Network"})]})},qe=()=>e.jsx(L,{className:"h-[500px] pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-siso-text/60"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter Transactions"})]}),e.jsx(N,{variant:"ghost",size:"sm",className:"text-xs",children:"Clear All"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"bg-black/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-siso-text",children:"Points Exchange"}),e.jsx("span",{className:"text-xs text-siso-text/60",children:"2 min ago"})]}),e.jsx("p",{className:"text-xs text-siso-text/80 mt-1",children:"Converted 1000 points to SISO tokens"})]})})]})}),Ze=()=>{const[t,s]=l.useState(0),[a,r]=l.useState(!0),{toast:n}=H();l.useEffect(()=>{T(void 0,null,function*(){try{s(750)}catch(o){console.error("Error fetching user points:",o),n({variant:"destructive",title:"Error",description:"Failed to load user points. Please try again later."})}finally{r(!1)}})},[]);const d={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return a?e.jsx(M,{children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(C,{className:"h-6 w-6 animate-spin text-siso-red"})})}):e.jsx(M,{children:e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(Ne,{}),e.jsxs(i.div,{className:"container mx-auto p-6 space-y-8 relative z-10",variants:m,initial:"hidden",animate:"visible",children:[e.jsxs(i.div,{className:"flex flex-col space-y-4 bg-black/20 p-6 rounded-lg backdrop-blur-sm border border-siso-text/5 hover:border-siso-text/10 transition-all duration-300",variants:d,children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.div,{animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,repeatType:"reverse"},children:e.jsx(le,{className:"w-8 h-8 text-gradient bg-gradient-to-r from-siso-red to-siso-orange"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-siso-red to-siso-orange bg-clip-text text-transparent",children:"Crypto Exchange"})]}),e.jsx(De,{})]}),e.jsx("p",{className:"text-siso-text/80 ml-11",children:"Convert your SISO Points to SISO Tokens and manage your NFTs"}),e.jsx("div",{className:"flex items-center justify-between ml-11",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-2 hover:border-siso-text/20 hover:bg-black/40 transition-all duration-300",children:[e.jsx(V,{className:"h-4 w-4"}),"Transaction History"]})}),e.jsxs(Se,{children:[e.jsx(Te,{children:e.jsx(ke,{children:"Transaction History"})}),e.jsx("div",{className:"mt-4",children:e.jsx(qe,{})})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(i.div,{className:"flex flex-col space-y-4",variants:d,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-siso-text-bold",children:"Swap Your Points"}),e.jsxs("div",{className:"text-sm text-siso-text/60",children:["Balance: ",t.toLocaleString()," Points"]})]}),e.jsx(i.div,{className:"bg-black/40 backdrop-blur-lg rounded-xl border border-siso-text/10 p-6 hover:border-siso-text/20 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-siso-red/5",whileHover:{scale:1.01},transition:{duration:.2},children:e.jsx(He,{userPoints:t})}),e.jsx(Re,{})]}),e.jsxs(i.div,{className:"flex flex-col space-y-4",variants:d,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-siso-text-bold",children:"Your NFT Gallery"}),e.jsx("div",{className:"text-sm text-siso-text/60",children:"Connected to Solana"})]}),e.jsx(i.div,{className:"bg-black/40 backdrop-blur-lg rounded-xl border border-siso-text/10 p-6 hover:border-siso-text/20 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-siso-orange/5",whileHover:{scale:1.01},transition:{duration:.2},children:e.jsx(Le,{})})]})]})]})]})})};export{Ze as default};
