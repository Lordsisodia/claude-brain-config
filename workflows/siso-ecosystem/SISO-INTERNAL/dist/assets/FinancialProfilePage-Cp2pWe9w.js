var j=(x,h,r)=>new Promise((i,e)=>{var b=t=>{try{a(r.next(t))}catch(l){e(l)}},d=t=>{try{a(r.throw(t))}catch(l){e(l)}},a=t=>t.done?i(t.value):Promise.resolve(t.value).then(b,d);a((r=r.apply(x,h)).next())});import{r as v,j as s,aD as w,O as y,aV as f,aY as P}from"./vendor-C50ijZWh.js";import{F as g}from"./FinancialLayout-DzwIZMik.js";import{u as _,P as k}from"./useProfileData-CcGAPxlT.js";import{u as C,d as c,C as p,s as T}from"./index-Blbobipf.js";import{T as U,a as S,b as m,c as u}from"./tabs-CsM4ZGNr.js";import"./libs-B3eAAgHd.js";import"./AppLayout-BhL6t15E.js";import"./MainLayout-CYr31jBl.js";import"./textarea-B56zo4Tx.js";import"./typeHelpers-CXqKcVsn.js";import"./supabase-D8k0GRjn.js";function H(){const[x,h]=v.useState("profile"),{toast:r}=C(),{user:i,profile:e,loading:b,isEditing:d,formData:a,handleFormChange:t,setIsEditing:l}=_(),N=()=>j(this,null,function*(){if(i)try{const{error:o}=yield T.from("profiles").update({full_name:a.fullName,business_name:a.businessName,business_type:a.businessType,industry:a.industry,bio:a.bio,interests:a.interests?a.interests.split(",").map(n=>n.trim()):[],linkedin_url:a.linkedinUrl,website_url:a.websiteUrl,youtube_url:a.youtubeUrl,instagram_url:a.instagramUrl,twitter_url:a.twitterUrl,professional_role:a.professionalRole}).eq("id",i.id);if(o)throw o;r({title:"Profile updated",description:"Your profile has been successfully updated"}),l(!1)}catch(o){console.error("Error updating profile:",o),r({variant:"destructive",title:"Error updating profile",description:"There was an error updating your profile"})}});return b?s.jsx(g,{title:"Profile & Settings",children:s.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-siso-orange"})})}):s.jsx(g,{title:"Profile & Settings",children:s.jsxs(U,{defaultValue:"profile",className:"w-full",value:x,onValueChange:h,children:[s.jsxs(S,{className:"grid grid-cols-4 mb-8",children:[s.jsxs(m,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(w,{className:"h-4 w-4"}),s.jsx("span",{children:"User Profile"})]}),s.jsxs(m,{value:"settings",className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),s.jsx("span",{children:"Account Settings"})]}),s.jsxs(m,{value:"preferences",className:"flex items-center gap-2",children:[s.jsx(f,{className:"h-4 w-4"}),s.jsx("span",{children:"Preferences"})]}),s.jsxs(m,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(P,{className:"h-4 w-4"}),s.jsx("span",{children:"Notifications"})]})]}),s.jsxs(u,{value:"profile",className:"space-y-6",children:[d?s.jsxs("div",{className:"flex justify-end gap-2 mb-4",children:[s.jsx(c,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(c,{onClick:N,children:"Save Changes"})]}):s.jsx("div",{className:"flex justify-end mb-4",children:s.jsx(c,{onClick:()=>l(!0),children:"Edit Profile"})}),s.jsx(k,{email:i==null?void 0:i.email,fullName:e==null?void 0:e.full_name,points:(e==null?void 0:e.points)||0,rank:(e==null?void 0:e.rank)||"Bronze",businessName:e==null?void 0:e.business_name,businessType:e==null?void 0:e.business_type,industry:e==null?void 0:e.industry,interests:e==null?void 0:e.interests,bio:e==null?void 0:e.bio,linkedinUrl:e==null?void 0:e.linkedin_url,websiteUrl:e==null?void 0:e.website_url,youtubeUrl:e==null?void 0:e.youtube_url,instagramUrl:e==null?void 0:e.instagram_url,twitterUrl:e==null?void 0:e.twitter_url,professionalRole:e==null?void 0:e.professional_role,isEditing:d,formData:a,onFormChange:t})]}),s.jsx(u,{value:"settings",children:s.jsxs(p,{className:"bg-black/20 border-siso-text/10 backdrop-blur-sm p-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Account Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx("label",{htmlFor:"current-password",className:"text-sm",children:"Current Password"}),s.jsx("input",{id:"current-password",type:"password",className:"bg-siso-bg border border-siso-border rounded-md px-3 py-2"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx("label",{htmlFor:"new-password",className:"text-sm",children:"New Password"}),s.jsx("input",{id:"new-password",type:"password",className:"bg-siso-bg border border-siso-border rounded-md px-3 py-2"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx("label",{htmlFor:"confirm-password",className:"text-sm",children:"Confirm New Password"}),s.jsx("input",{id:"confirm-password",type:"password",className:"bg-siso-bg border border-siso-border rounded-md px-3 py-2"})]}),s.jsx(c,{children:"Update Password"})]})]})}),s.jsx(u,{value:"preferences",children:s.jsxs(p,{className:"bg-black/20 border-siso-text/10 backdrop-blur-sm p-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Preferences"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-siso-text/70",children:"Receive emails about your account activity"})]}),s.jsx("div",{className:"h-6 w-12 bg-siso-text/20 rounded-full cursor-pointer relative",children:s.jsx("div",{className:"h-5 w-5 bg-siso-orange rounded-full absolute left-1 top-0.5"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Push Notifications"}),s.jsx("p",{className:"text-sm text-siso-text/70",children:"Receive push notifications on your device"})]}),s.jsx("div",{className:"h-6 w-12 bg-siso-text/20 rounded-full cursor-pointer relative",children:s.jsx("div",{className:"h-5 w-5 bg-siso-text/60 rounded-full absolute right-1 top-0.5"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing Communications"}),s.jsx("p",{className:"text-sm text-siso-text/70",children:"Receive updates about new features and offers"})]}),s.jsx("div",{className:"h-6 w-12 bg-siso-text/20 rounded-full cursor-pointer relative",children:s.jsx("div",{className:"h-5 w-5 bg-siso-orange rounded-full absolute left-1 top-0.5"})})]}),s.jsx(c,{children:"Save Preferences"})]})]})}),s.jsx(u,{value:"notifications",children:s.jsxs(p,{className:"bg-black/20 border-siso-text/10 backdrop-blur-sm p-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Notification History"}),s.jsx("div",{className:"space-y-4",children:Array(3).fill(0).map((o,n)=>s.jsxs("div",{className:"flex items-start gap-4 p-3 border-b border-siso-text/10",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-siso-orange/20 flex items-center justify-center",children:s.jsx(f,{className:"h-5 w-5 text-siso-orange"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Payment Successful"}),s.jsxs("p",{className:"text-sm text-siso-text/70",children:["Your payment for invoice INV-00",n+1," has been processed successfully."]}),s.jsxs("p",{className:"text-xs text-siso-text/50 mt-1",children:[new Date(Date.now()-n*864e5).toLocaleDateString()," at ",new Date(Date.now()-n*864e5).toLocaleTimeString()]})]})]},n))})]})})]})})}export{H as default};
