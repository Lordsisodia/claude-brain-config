var q=Object.defineProperty,A=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var R=(n,t,a)=>t in n?q(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,m=(n,t)=>{for(var a in t||(t={}))H.call(t,a)&&R(n,a,t[a]);if(S)for(var a of S(t))L.call(t,a)&&R(n,a,t[a]);return n},g=(n,t)=>A(n,G(t));var w=(n,t,a)=>new Promise((p,x)=>{var N=l=>{try{f(a.next(l))}catch(j){x(j)}},k=l=>{try{f(a.throw(l))}catch(j){x(j)}},f=l=>l.done?p(l.value):Promise.resolve(l.value).then(N,k);f((a=a.apply(n,t)).next())});import{r as y,j as e,b5 as O,bq as V,aX as $,N as U,bo as F,aY as P,bg as Y,ah as I,aa as J,aU as K}from"./vendor-C50ijZWh.js";import{d as Q,C as W,a as D,b as z,g as Z,B,P as _,c as E}from"./index-Blbobipf.js";import"./libs-B3eAAgHd.js";import"./supabase-D8k0GRjn.js";const re=()=>{const[n,t]=y.useState("deployFeature"),[a,p]=y.useState(null),[x,N]=y.useState(!1),k={deployFeature:{id:"deploy-feature",name:"Deploy Feature",description:"Create branches, setup database, fetch docs, and create tasks",steps:[{id:"create-github-branch",mcp:"github",action:"Create feature branch",status:"pending"},{id:"create-supabase-branch",mcp:"supabase",action:"Create database branch",status:"pending"},{id:"fetch-docs",mcp:"context7",action:"Fetch documentation",status:"pending"},{id:"create-tasks",mcp:"notion",action:"Create task list",status:"pending",dependsOn:["create-github-branch"]}]},codeReview:{id:"code-review",name:"Code Review",description:"Analyze PR changes, run security checks, search best practices",steps:[{id:"get-pr",mcp:"github",action:"Get PR changes",status:"pending"},{id:"security-check",mcp:"supabase",action:"Run security advisors",status:"pending",dependsOn:["get-pr"]},{id:"best-practices",mcp:"exa",action:"Search best practices",status:"pending",dependsOn:["get-pr"]},{id:"create-summary",mcp:"notion",action:"Create review summary",status:"pending",dependsOn:["security-check","best-practices"]}]}},f={github:"bg-gray-500",supabase:"bg-green-500",context7:"bg-blue-500",notion:"bg-black",exa:"bg-purple-500"},l={github:e.jsx(K,{className:"w-4 h-4"}),supabase:e.jsx(F,{className:"w-4 h-4"}),context7:e.jsx(I,{className:"w-4 h-4"}),notion:e.jsx(J,{className:"w-4 h-4"}),exa:e.jsx(I,{className:"w-4 h-4"})},j=()=>w(void 0,null,function*(){if(!a)return;N(!0);const s=[...a.steps];let i=0;s.forEach(c=>c.status="pending"),p(g(m({},a),{status:"running",steps:s,progress:0}));const v=c=>w(void 0,null,function*(){const r=s[c];if(r.dependsOn&&!r.dependsOn.every(b=>{var h;return((h=s.find(M=>M.id===b))==null?void 0:h.status)==="success"})){r.status="skipped";return}r.status="running",p(d=>g(m({},d),{steps:[...s]})),yield new Promise(d=>setTimeout(d,1e3+Math.random()*2e3)),Math.random()>.1?(r.status="success",r.duration=Math.floor(Math.random()*3e3)+500,r.result={data:`Result from ${r.mcp}`}):(r.status="error",r.error="Simulated error for demonstration"),i++;const o=i/s.length*100;p(d=>g(m({},d),{steps:[...s],progress:o,status:r.status==="error"?"failed":d.status}))});yield w(void 0,null,function*(){const c=new Set;for(;c.size<s.length;){const r=s.filter((o,d)=>c.has(o.id)?!1:!o.dependsOn||o.dependsOn.length===0?!0:o.dependsOn.every(b=>{const h=s.find(M=>M.id===b);return h&&c.has(h.id)&&h.status==="success"}));if(r.length===0)break;yield Promise.all(r.map(o=>w(void 0,null,function*(){const d=s.findIndex(b=>b.id===o.id);yield v(d),c.add(o.id)})))}});const C=s.every(c=>c.status==="success"||c.status==="skipped");p(c=>g(m({},c),{status:C?"completed":"failed",progress:100})),N(!1)});y.useEffect(()=>{const s=k[n];p(g(m({},s),{status:"idle",progress:0}))},[n]);const T=s=>{switch(s){case"success":return e.jsx($,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(Y,{className:"w-5 h-5 text-red-500"});case"running":return e.jsx(O,{className:"w-5 h-5 text-blue-500 animate-spin"});case"skipped":return e.jsx(P,{className:"w-5 h-5 text-gray-400"});default:return e.jsx(P,{className:"w-5 h-5 text-gray-500"})}},X=(s,i)=>!s.dependsOn||s.dependsOn.length===0?null:e.jsx(e.Fragment,{children:s.dependsOn.map(v=>{const u=a.steps.findIndex(C=>C.id===v);return u===-1?null:e.jsx("svg",{className:"absolute pointer-events-none",style:{top:`${Math.min(u,i)*120+60}px`,height:`${Math.abs(i-u)*120}px`,left:"50%",transform:"translateX(-50%)",zIndex:0},children:e.jsx("path",{d:`M 150 ${u<i?0:Math.abs(i-u)*120} 
                    L 150 ${u<i?Math.abs(i-u)*120:0}`,stroke:"#94a3b8",strokeWidth:"2",strokeDasharray:"5,5",fill:"none"})},`${s.id}-${v}`)})});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"MCP Workflow Visualizer"}),e.jsx("p",{className:"text-muted-foreground",children:"See how workflows execute across multiple MCPs"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:n,onChange:s=>t(s.target.value),className:"px-3 py-2 border rounded-md",disabled:x,children:[e.jsx("option",{value:"deployFeature",children:"Deploy Feature"}),e.jsx("option",{value:"codeReview",children:"Code Review"})]}),e.jsx(Q,{onClick:j,disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Run Workflow"]})})]})]}),a&&e.jsxs(W,{children:[e.jsxs(D,{children:[e.jsx(z,{children:a.name}),e.jsx(Z,{children:a.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4",children:[e.jsx(B,{variant:a.status==="completed"?"default":a.status==="failed"?"destructive":a.status==="running"?"secondary":"outline",children:a.status}),a.status==="running"&&e.jsx("div",{className:"flex-1",children:e.jsx(_,{value:a.progress,className:"h-2"})})]})]}),e.jsx(E,{children:e.jsx("div",{className:"relative space-y-4",children:a.steps.map((s,i)=>e.jsxs("div",{className:"relative z-10",children:[X(s,i),e.jsxs("div",{className:`
                    flex items-center space-x-4 p-4 rounded-lg border
                    ${s.status==="running"?"border-blue-500 bg-blue-50 dark:bg-blue-950":""}
                    ${s.status==="success"?"border-green-500 bg-green-50 dark:bg-green-950":""}
                    ${s.status==="error"?"border-red-500 bg-red-50 dark:bg-red-950":""}
                    ${s.status==="skipped"?"opacity-50":""}
                  `,children:[e.jsx("div",{className:`p-2 rounded-full text-white ${f[s.mcp]}`,children:l[s.mcp]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:s.action}),e.jsx(B,{variant:"outline",className:"text-xs",children:s.mcp}),s.duration&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.duration,"ms"]})]}),s.dependsOn&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Depends on: ",s.dependsOn.join(", ")]}),s.error&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:s.error})]}),T(s.status)]})]},s.id))})})]}),e.jsxs(W,{children:[e.jsx(D,{children:e.jsx(z,{children:"How It Works"})}),e.jsxs(E,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Steps execute in parallel when possible"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Dependencies ensure proper execution order"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{children:"Failed steps can be retried automatically"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Each MCP handles its specific domain"})]})]})]})]})};export{re as default};
