var $t=Object.defineProperty,zt=Object.defineProperties;var qt=Object.getOwnPropertyDescriptors;var st=Object.getOwnPropertySymbols;var Wt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var Me=(n,t,a)=>t in n?$t(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,u=(n,t)=>{for(var a in t||(t={}))Wt.call(t,a)&&Me(n,a,t[a]);if(st)for(var a of st(t))Bt.call(t,a)&&Me(n,a,t[a]);return n},h=(n,t)=>zt(n,qt(t));var ve=(n,t,a)=>Me(n,typeof t!="symbol"?t+"":t,a);var C=(n,t,a)=>new Promise((r,l)=>{var o=b=>{try{y(a.next(b))}catch(v){l(v)}},d=b=>{try{y(a.throw(b))}catch(v){l(v)}},y=b=>b.done?r(b.value):Promise.resolve(b.value).then(o,d);y((a=a.apply(n,t)).next())});import{r as L,j as e,m as q,ca as Ot,dh as yt,f as Se,aX as bt,bf as at,bu as wt,bv as vt,bw as Ht,dX as Gt,bT as Qt,c9 as Kt,aM as Jt,d9 as Yt,aY as he,b3 as rt,bn as it,at as Ve,aC as Xt,bV as Zt,R as _e,am as Ce,af as jt,X as kt,bA as Re,a$ as Ut,aW as lt,b0 as Pe,dL as es,b7 as ts,eS as ss,di as as,bX as rs,av as is,n as ls,o as os,dx as Nt,y as ns,e0 as cs,bt as ds,cB as ms,aI as us,aH as gs,eT as hs,by as xs,aK as ps,cx as fs}from"./vendor-C50ijZWh.js";import{A as ot}from"./AdminLayout-BZL16QJ9.js";import{s as I,d as F,C as _t,a as Ct,b as St,c as Tt,B as X,I as V,h as _,g as ys,K as se,D as bs,t as ws,v as vs,Q as je}from"./index-Blbobipf.js";import{D as $e,f as js,a as ze,b as qe,c as We,e as Dt}from"./dialog-CB9qAGL5.js";import{a$ as B,cj as ks,ck as Ns,aV as _s,aW as Cs}from"./libs-B3eAAgHd.js";import{v as ne}from"./voiceService--omXRrmC.js";import{S as nt,a as ct,b as dt,c as mt,d as U}from"./select-Ba1tjTaP.js";import{S as Ss}from"./scroll-area-D4x0YgaW.js";import{F as Ts}from"./FloatingActionButton-Djfv_Njm.js";import"./supabase-D8k0GRjn.js";class W{static getDailyRoutine(){return C(this,arguments,function*(t=new Date,a="morning"){try{const{data:{user:r}}=yield I.auth.getUser();if(!r)return null;const l=B(t,"yyyy-MM-dd");let{data:o,error:d}=yield I.from("daily_routines").select("*").eq("user_id",r.id).eq("date",l).eq("routine_type",a).single();if(d&&d.code!=="PGRST116")return console.error("Error fetching daily routine:",d),null;if(!o){const y=[{id:"1",title:"Wake Up",completed:!1,description:"Start the day before midday to maximize productivity."},{id:"2",title:"Get Blood Flowing (5 min)",completed:!1,description:"Max rep push-ups (Target PB: 30).",logField:"Log reps: ____"},{id:"3",title:"Hydrate (5 min)",completed:!1,description:"Drink 500 ml water to start the day."},{id:"4",title:"Supplements & Pre-Workout (5 min)",completed:!1,description:"Take omega-3, multivitamin, ashwagandha, and pre-workout."},{id:"5",title:"Shower & Brush Teeth (25 min)",completed:!1,description:"Cold shower to wake up."},{id:"6",title:"Review & Plan Day (15 min)",completed:!1,description:"Go through tasks, prioritize, and allocate time slots."},{id:"7",title:"Meditation (2 min)",completed:!1,description:"Meditate to set an innovative mindset for creating business value."}],b={user_id:r.id,date:l,routine_type:a,items:y,completed_count:0,total_count:y.length,completion_percentage:0},{data:v,error:w}=yield I.from("daily_routines").insert(b).select().single();if(w)return console.error("Error creating daily routine:",w),null;o=v}return h(u({},o),{date:o.date,items:o.items||[]})}catch(r){return console.error("Failed to get daily routine:",r),null}})}static updateDailyRoutine(t){return C(this,null,function*(){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return!1;const r=t.items.filter(d=>d.completed).length,l=t.items.length>0?r/t.items.length*100:0,{error:o}=yield I.from("daily_routines").update({items:t.items,completed_count:r,total_count:t.items.length,completion_percentage:l,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("date",t.date).eq("routine_type",t.routine_type);return o?(console.error("Error updating daily routine:",o),!1):!0}catch(a){return console.error("Failed to update daily routine:",a),!1}})}static getDailyWorkout(){return C(this,arguments,function*(t=new Date){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return null;const r=B(t,"yyyy-MM-dd");let{data:l,error:o}=yield I.from("daily_workouts").select("*").eq("user_id",a.id).eq("date",r).single();if(o&&o.code!=="PGRST116")return console.error("Error fetching daily workout:",o),null;if(!l){const d=[{id:"1",title:"Push-ups",completed:!1,target:"50 reps",logged:""},{id:"2",title:"Squats",completed:!1,target:"100 reps",logged:""},{id:"3",title:"Plank",completed:!1,target:"2 minutes",logged:""},{id:"4",title:"Burpees",completed:!1,target:"20 reps",logged:""},{id:"5",title:"Mountain Climbers",completed:!1,target:"50 reps",logged:""}],y={user_id:a.id,date:r,exercises:d,total_exercises:d.length,completed_exercises:0,completion_percentage:0},{data:b,error:v}=yield I.from("daily_workouts").insert(y).select().single();if(v)return console.error("Error creating daily workout:",v),null;l=b}return h(u({},l),{exercises:l.exercises||[]})}catch(a){return console.error("Failed to get daily workout:",a),null}})}static updateDailyWorkout(t){return C(this,null,function*(){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return!1;const r=t.exercises.filter(d=>d.completed).length,l=t.exercises.length>0?r/t.exercises.length*100:0,{error:o}=yield I.from("daily_workouts").update({exercises:t.exercises,completed_exercises:r,total_exercises:t.exercises.length,completion_percentage:l,duration_minutes:t.duration_minutes,notes:t.notes,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("date",t.date);return o?(console.error("Error updating daily workout:",o),!1):!0}catch(a){return console.error("Failed to update daily workout:",a),!1}})}static getDailyHealth(){return C(this,arguments,function*(t=new Date){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return null;const r=B(t,"yyyy-MM-dd");let{data:l,error:o}=yield I.from("daily_health").select("*").eq("user_id",a.id).eq("date",r).single();if(o&&o.code!=="PGRST116")return console.error("Error fetching daily health:",o),null;if(!l){const d=[{id:"1",title:"Take vitamins/supplements",completed:!1},{id:"2",title:"Drink 2L+ water",completed:!1},{id:"3",title:"No smoking THC",completed:!1},{id:"4",title:"Eat balanced meals",completed:!1},{id:"5",title:"Get 7+ hours sleep",completed:!1}],y={user_id:a.id,date:r,health_checklist:d,meals:{breakfast:"",lunch:"",dinner:"",snacks:""},macros:{calories:"",protein:"",carbs:"",fats:""},water_intake_ml:0,milk_intake_ml:0,sleep_hours:0},{data:b,error:v}=yield I.from("daily_health").insert(y).select().single();if(v)return console.error("Error creating daily health:",v),null;l=b}return h(u({},l),{health_checklist:l.health_checklist||[],meals:l.meals||{breakfast:"",lunch:"",dinner:"",snacks:""},macros:l.macros||{calories:"",protein:"",carbs:"",fats:""}})}catch(a){return console.error("Failed to get daily health:",a),null}})}static updateDailyHealth(t){return C(this,null,function*(){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return!1;const{error:r}=yield I.from("daily_health").update({health_checklist:t.health_checklist,meals:t.meals,macros:t.macros,water_intake_ml:t.water_intake_ml,milk_intake_ml:t.milk_intake_ml,sleep_hours:t.sleep_hours,energy_level:t.energy_level,mood_level:t.mood_level,notes:t.notes,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("date",t.date);return r?(console.error("Error updating daily health:",r),!1):!0}catch(a){return console.error("Failed to update daily health:",a),!1}})}static updateMilkIntake(t,a){return C(this,null,function*(){try{const{data:{user:r}}=yield I.auth.getUser();if(!r)return!1;const l=B(t,"yyyy-MM-dd"),{error:o}=yield I.from("daily_health").update({milk_intake_ml:a,updated_at:new Date().toISOString()}).eq("user_id",r.id).eq("date",l);return o?(console.error("Error updating milk intake:",o),!1):!0}catch(r){return console.error("Failed to update milk intake:",r),!1}})}static getDailyHabits(){return C(this,arguments,function*(t=new Date){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return null;const r=B(t,"yyyy-MM-dd");let{data:l,error:o}=yield I.from("daily_habits").select("*").eq("user_id",a.id).eq("date",r).single();if(o&&o.code!=="PGRST116")return console.error("Error fetching daily habits:",o),null;if(!l){const d={user_id:a.id,date:r,screen_time_minutes:0,bullshit_content_minutes:0,no_weed:!1,no_scrolling:!1,deep_work_hours:0,light_work_hours:0,habits_data:{lightFocusTasks:[{id:"1",title:"",completed:!1},{id:"2",title:"",completed:!1},{id:"3",title:"",completed:!1},{id:"4",title:"",completed:!1},{id:"5",title:"",completed:!1}]}},{data:y,error:b}=yield I.from("daily_habits").insert(d).select().single();if(b)return console.error("Error creating daily habits:",b),null;l=y}return(!l.habits_data||!l.habits_data.lightFocusTasks)&&(l.habits_data=h(u({},l.habits_data),{lightFocusTasks:[{id:"1",title:"",completed:!1},{id:"2",title:"",completed:!1},{id:"3",title:"",completed:!1},{id:"4",title:"",completed:!1},{id:"5",title:"",completed:!1}]})),l}catch(a){return console.error("Failed to get daily habits:",a),null}})}static updateDailyHabits(t){return C(this,null,function*(){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return!1;const{error:r}=yield I.from("daily_habits").update({screen_time_minutes:t.screen_time_minutes,bullshit_content_minutes:t.bullshit_content_minutes,no_weed:t.no_weed,no_scrolling:t.no_scrolling,deep_work_hours:t.deep_work_hours,light_work_hours:t.light_work_hours,habits_data:t.habits_data,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("date",t.date);return r?(console.error("Error updating daily habits:",r),!1):!0}catch(a){return console.error("Failed to update daily habits:",a),!1}})}static getDailyReflections(){return C(this,arguments,function*(t=new Date){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return null;const r=B(t,"yyyy-MM-dd");let{data:l,error:o}=yield I.from("daily_reflections").select("*").eq("user_id",a.id).eq("date",r).single();if(o&&o.code!=="PGRST116")return console.error("Error fetching daily reflections:",o),null;if(!l){const d={user_id:a.id,date:r,went_well:["","",""],even_better_if:["","","","",""],analysis:["","",""],patterns:["","",""],changes:["","",""]},{data:y,error:b}=yield I.from("daily_reflections").insert(d).select().single();if(b)return console.error("Error creating daily reflections:",b),null;l=y}return l}catch(a){return console.error("Failed to get daily reflections:",a),null}})}static updateDailyReflections(t){return C(this,null,function*(){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return!1;const{error:r}=yield I.from("daily_reflections").update({went_well:t.went_well,even_better_if:t.even_better_if,analysis:t.analysis,patterns:t.patterns,changes:t.changes,overall_rating:t.overall_rating,key_learnings:t.key_learnings,tomorrow_focus:t.tomorrow_focus,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("date",t.date);return r?(console.error("Error updating daily reflections:",r),!1):!0}catch(a){return console.error("Failed to update daily reflections:",a),!1}})}static migrateLocalStorageData(){return C(this,arguments,function*(t=new Date){try{const a=B(t,"yyyy-MM-dd"),r=(f,S)=>{try{const N=localStorage.getItem(`lifelock-${a}-${f}`);return N?JSON.parse(N):S}catch(N){return S}},l=r("morningRoutine",null);if(l){const f={date:a,routine_type:"morning",items:l,completed_count:l.filter(S=>S.completed).length,total_count:l.length,completion_percentage:l.filter(S=>S.completed).length/l.length*100};yield this.updateDailyRoutine(f)}const o=r("workoutItems",null);if(o){const f={date:a,exercises:o,total_exercises:o.length,completed_exercises:o.filter(S=>S.completed).length,completion_percentage:o.filter(S=>S.completed).length/o.length*100};yield this.updateDailyWorkout(f)}const d=r("healthItems",null),y=r("macros",{calories:"",protein:"",carbs:"",fats:""});if(d){const f={date:a,health_checklist:d,meals:{breakfast:"",lunch:"",dinner:"",snacks:""},macros:y,water_intake_ml:0,milk_intake_ml:0,sleep_hours:0};yield this.updateDailyHealth(f)}const b=r("workHours",{deepFocus:"",lightFocus:""}),v=r("lightFocusTasks",[{id:"1",title:"",completed:!1},{id:"2",title:"",completed:!1},{id:"3",title:"",completed:!1},{id:"4",title:"",completed:!1},{id:"5",title:"",completed:!1}]),w={date:a,screen_time_minutes:0,bullshit_content_minutes:0,no_weed:!1,no_scrolling:!1,deep_work_hours:parseFloat(b.deepFocus)||0,light_work_hours:parseFloat(b.lightFocus)||0,habits_data:{lightFocusTasks:v}};return yield this.updateDailyHabits(w),console.log(`✅ Successfully migrated localStorage data for ${a}`),!0}catch(a){return console.error("Failed to migrate localStorage data:",a),!1}})}static getAllDailyData(){return C(this,arguments,function*(t=new Date){console.log("LifeLockService: Starting getAllDailyData for",B(t,"yyyy-MM-dd"));try{const{data:{user:r},error:l}=yield I.auth.getUser();if(l||!r)return console.error("LifeLockService: Authentication failed:",l),{routine:null,workout:null,health:null,habits:null,reflections:null};console.log("LifeLockService: User authenticated:",r.id)}catch(r){return console.error("LifeLockService: Authentication error:",r),{routine:null,workout:null,health:null,habits:null,reflections:null}}const a={routine:null,workout:null,health:null,habits:null,reflections:null};try{console.log("LifeLockService: Loading routine data...");const r=this.getDailyRoutine(t),l=new Promise((o,d)=>setTimeout(()=>d(new Error("Routine timeout")),5e3));a.routine=yield Promise.race([r,l]),console.log("LifeLockService: Routine data loaded successfully")}catch(r){console.error("LifeLockService: Failed to load routine data:",r),a.routine=null}try{console.log("LifeLockService: Loading workout data...");const r=this.getDailyWorkout(t),l=new Promise((o,d)=>setTimeout(()=>d(new Error("Workout timeout")),5e3));a.workout=yield Promise.race([r,l]),console.log("LifeLockService: Workout data loaded successfully")}catch(r){console.error("LifeLockService: Failed to load workout data:",r),a.workout=null}try{console.log("LifeLockService: Loading health data...");const r=this.getDailyHealth(t),l=new Promise((o,d)=>setTimeout(()=>d(new Error("Health timeout")),5e3));a.health=yield Promise.race([r,l]),console.log("LifeLockService: Health data loaded successfully")}catch(r){console.error("LifeLockService: Failed to load health data:",r),a.health=null}try{console.log("LifeLockService: Loading habits data...");const r=this.getDailyHabits(t),l=new Promise((o,d)=>setTimeout(()=>d(new Error("Habits timeout")),5e3));a.habits=yield Promise.race([r,l]),console.log("LifeLockService: Habits data loaded successfully")}catch(r){console.error("LifeLockService: Failed to load habits data:",r),a.habits=null}try{console.log("LifeLockService: Loading reflections data...");const r=this.getDailyReflections(t),l=new Promise((o,d)=>setTimeout(()=>d(new Error("Reflections timeout")),5e3));a.reflections=yield Promise.race([r,l]),console.log("LifeLockService: Reflections data loaded successfully")}catch(r){console.error("LifeLockService: Failed to load reflections data:",r),a.reflections=null}return console.log("LifeLockService: Completed getAllDailyData with results:",a),a})}}class ge{static getTasksForDate(){return C(this,arguments,function*(t=new Date,a,r){try{const{data:{user:l}}=yield I.auth.getUser();if(!l)return[];const o=B(t,"yyyy-MM-dd");let d=I.from("tasks").select("*").eq("assigned_to",l.id).or(`due_date.eq.${o},created_at.gte.${o}T00:00:00,created_at.lt.${o}T23:59:59`);a&&(d=d.eq("work_type",a)),r&&(d=d.eq("category",r)),d=d.order("priority",{ascending:!1}).order("focus_level",{ascending:!1}).order("created_at",{ascending:!0});const{data:y,error:b}=yield d;return b?(console.error("Error fetching enhanced tasks:",b),[]):(y||[]).map(v=>this.mapTaskFromDB(v))}catch(l){return console.error("Failed to fetch enhanced tasks:",l),[]}})}static getDeepFocusTasksForDate(){return C(this,arguments,function*(t=new Date){return this.getTasksForDate(t,"deep_focus")})}static getLightFocusTasksForDate(){return C(this,arguments,function*(t=new Date){return this.getTasksForDate(t,"light_focus")})}static createEnhancedTask(t){return C(this,null,function*(){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return null;const r={title:t.title,description:t.description,category:t.category||"main",priority:t.priority||"medium",work_type:t.work_type||"deep_focus",focus_level:t.focus_level||3,energy_level:t.energy_level||"medium",estimated_duration:t.estimated_duration,due_date:t.due_date,time_block_start:t.time_block_start,time_block_end:t.time_block_end,project_id:t.project_id,tags:t.tags,subtasks:t.subtasks,notes:t.notes,flow_state_potential:t.flow_state_potential||3,effort_points:t.effort_points||1,lifelock_sync:t.lifelock_sync!==!1,auto_schedule:t.auto_schedule||!1,dependencies:t.dependencies,template_id:t.template_id,context_switching_cost:t.context_switching_cost||0,status:"pending",assigned_to:a.id,created_by:a.id},{data:l,error:o}=yield I.from("tasks").insert(r).select().single();return o?(console.error("Error creating enhanced task:",o),null):(t.lifelock_sync!==!1&&t.due_date&&(yield this.syncTasksToLifeLock(new Date(t.due_date))),this.mapTaskFromDB(l))}catch(a){return console.error("Failed to create enhanced task:",a),null}})}static updateTaskCompletion(t,a,r){return C(this,null,function*(){try{const{data:{user:l}}=yield I.auth.getUser();if(!l)return!1;const{error:o}=yield I.from("tasks").update({status:a?"done":"pending",completed_at:a?new Date().toISOString():null,actual_duration:r==null?void 0:r.actual_duration,updated_at:new Date().toISOString()}).eq("id",t).eq("assigned_to",l.id);return o?(console.error("Error updating task completion:",o),!1):(r&&a&&(yield this.recordTaskAnalytics(t,r)),yield this.syncTasksToLifeLock(new Date),!0)}catch(l){return console.error("Failed to update task completion:",l),!1}})}static recordTaskAnalytics(t,a){return C(this,null,function*(){try{const{data:{user:r}}=yield I.auth.getUser();if(!r)return!1;const l={user_id:r.id,task_id:t,date:B(new Date,"yyyy-MM-dd"),planned_duration:a.planned_duration,actual_duration:a.actual_duration,focus_quality:a.focus_quality,difficulty_rating:a.difficulty_rating,satisfaction_rating:a.satisfaction_rating,energy_level_start:a.energy_level_start,energy_level_end:a.energy_level_end,distractions_count:a.distractions_count||0,context_switches:a.context_switches||0,work_environment:a.work_environment,noise_level:a.noise_level},{error:o}=yield I.from("task_analytics").insert(l);return o?(console.error("Error recording task analytics:",o),!1):!0}catch(r){return console.error("Failed to record task analytics:",r),!1}})}static recordDeepWorkSession(t){return C(this,null,function*(){try{const{data:{user:a}}=yield I.auth.getUser();if(!a)return null;const r={user_id:a.id,date:t.date||B(new Date,"yyyy-MM-dd"),start_time:t.start_time,end_time:t.end_time,planned_duration:t.planned_duration,actual_duration:t.actual_duration,focus_quality:t.focus_quality,distractions_count:t.distractions_count||0,environment_rating:t.environment_rating,energy_start:t.energy_start,energy_end:t.energy_end,session_notes:t.session_notes,technique_used:t.technique_used,tasks_completed:t.tasks_completed,session_type:t.session_type||"deep_focus"},{data:l,error:o}=yield I.from("deep_work_sessions").insert(r).select().single();return o?(console.error("Error recording deep work session:",o),null):l}catch(a){return console.error("Failed to record deep work session:",a),null}})}static getTaskStats(){return C(this,arguments,function*(t=new Date(Date.now()-30*24*60*60*1e3),a=new Date){try{const{data:{user:r}}=yield I.auth.getUser();if(!r)return null;const{data:l,error:o}=yield I.rpc("get_task_stats",{user_uuid:r.id,date_from:B(t,"yyyy-MM-dd"),date_to:B(a,"yyyy-MM-dd")});return o?(console.error("Error getting task stats:",o),null):l[0]||null}catch(r){return console.error("Failed to get task stats:",r),null}})}static autoScheduleTasks(){return C(this,arguments,function*(t=new Date,a=9,r=17){try{const{data:l,error:o}=yield I.rpc("auto_schedule_tasks",{target_date:B(t,"yyyy-MM-dd"),start_hour:a,end_hour:r});return o?(console.error("Error auto-scheduling tasks:",o),[]):l||[]}catch(l){return console.error("Failed to auto-schedule tasks:",l),[]}})}static syncTasksToLifeLock(){return C(this,arguments,function*(t=new Date){try{const{data:a,error:r}=yield I.rpc("sync_tasks_to_lifelock",{target_date:B(t,"yyyy-MM-dd")});return r?(console.error("Error syncing tasks to LifeLock:",r),!1):a||!1}catch(a){return console.error("Failed to sync tasks to LifeLock:",a),!1}})}static createTaskFromTemplate(t,a,r){return C(this,null,function*(){try{const{data:{user:l}}=yield I.auth.getUser();if(!l)return null;const{data:o,error:d}=yield I.from("task_templates").select("*").eq("id",t).eq("user_id",l.id).single();if(d||!o)return console.error("Error fetching task template:",d),null;const y=u({title:(r==null?void 0:r.title)||o.name,description:(r==null?void 0:r.description)||o.description,category:(r==null?void 0:r.category)||o.category,priority:(r==null?void 0:r.priority)||o.priority,work_type:(r==null?void 0:r.work_type)||o.work_type,estimated_duration:(r==null?void 0:r.estimated_duration)||o.estimated_duration,focus_level:(r==null?void 0:r.focus_level)||o.focus_level,energy_level:(r==null?void 0:r.energy_level)||o.energy_level,flow_state_potential:(r==null?void 0:r.flow_state_potential)||o.flow_state_potential,effort_points:(r==null?void 0:r.effort_points)||o.effort_points,tags:(r==null?void 0:r.tags)||o.tags,subtasks:(r==null?void 0:r.subtasks)||o.subtasks,notes:(r==null?void 0:r.notes)||o.template_notes,template_id:t,due_date:a?B(a,"yyyy-MM-dd"):void 0},r);return this.createEnhancedTask(y)}catch(l){return console.error("Failed to create task from template:",l),null}})}static mapTaskFromDB(t){return{id:t.id,title:t.title,description:t.description,category:t.category,priority:t.priority,status:t.status,work_type:t.work_type||"deep_focus",focus_level:t.focus_level||3,energy_level:t.energy_level||"medium",estimated_duration:t.estimated_duration,actual_duration:t.actual_duration,due_date:t.due_date,time_block_start:t.time_block_start,time_block_end:t.time_block_end,project_id:t.project_id,tags:t.tags,subtasks:t.subtasks,notes:t.notes,flow_state_potential:t.flow_state_potential||3,effort_points:t.effort_points||1,lifelock_sync:t.lifelock_sync!==!1,auto_schedule:t.auto_schedule||!1,dependencies:t.dependencies,template_id:t.template_id,context_switching_cost:t.context_switching_cost||0,assigned_to:t.assigned_to,created_by:t.created_by,created_at:t.created_at,updated_at:t.updated_at,completed_at:t.completed_at}}}class Ds{constructor(){ve(this,"groq");ve(this,"isConfigured");this.isConfigured=!1,this.isConfigured&&(this.groq=new ks({apiKey:void 0,dangerouslyAllowBrowser:!0}))}chatWithGrok(t){return C(this,null,function*(){var a,r;if(!this.isConfigured)return{message:"Groq API is not configured. Please add VITE_GROQ_API_KEY to your environment variables."};try{const l=this.buildSystemPrompt(t),o=this.buildUserPrompt(t),y=((r=(a=(yield this.groq.chat.completions.create({messages:[{role:"system",content:l},{role:"user",content:o}],model:"llama3-8b-8192",temperature:.7,max_tokens:1500})).choices[0])==null?void 0:a.message)==null?void 0:r.content)||"No response generated";return this.parseGrokResponse(y,t)}catch(l){return console.error("Groq API Error:",l),{message:"Sorry, I encountered an error while processing your request. Please try again."}}})}buildSystemPrompt(t){return`You are an AI task management assistant for SISO Agency. You help with:
1. Creating tasks from natural language descriptions
2. Analyzing workloads and productivity
3. Prioritizing tasks based on deadlines and importance
4. Creating project plans with multiple tasks
5. Optimizing schedules and workflows

Current task context:
- Total tasks: ${t.tasks.length}
- Active tasks: ${t.tasks.filter(a=>!a.completed).length}
- Overdue tasks: ${t.tasks.filter(a=>a.status==="overdue").length}

Available categories: development, design, marketing, client, admin
Available priorities: high, medium, low
Available statuses: not-started, in-progress, blocked, done, overdue, due-today, upcoming

TASK CREATION GUIDELINES:
- When users ask to create tasks, ALWAYS respond with properly formatted JSON
- Break down complex requests into multiple specific tasks
- Assign appropriate categories based on task content
- Set realistic priorities and due dates
- Include descriptions and subtasks when helpful
- Generate unique IDs using timestamp + random

JSON RESPONSE FORMAT for creating tasks:
{
  "message": "I've created [X] tasks for you:",
  "tasks": [
    {
      "id": "task-[timestamp]-[random]",
      "title": "Clear, actionable task title",
      "completed": false,
      "status": "not-started",
      "priority": "high|medium|low",
      "category": "development|design|marketing|client|admin",
      "description": "Detailed description of what needs to be done",
      "estimatedHours": [number],
      "dueDate": "YYYY-MM-DD" (if mentioned or can be inferred),
      "tags": ["relevant", "tags"],
      "subtasks": [
        {
          "id": "subtask-[timestamp]-[random]",
          "title": "Specific subtask",
          "completed": false
        }
      ]
    }
  ]
}

INTELLIGENT CATEGORIZATION:
- "development", "coding", "programming", "bug", "feature" → development
- "design", "ui", "ux", "mockup", "wireframe", "logo" → design  
- "marketing", "social media", "content", "seo", "campaign" → marketing
- "client", "meeting", "call", "presentation", "proposal" → client
- "admin", "documentation", "planning", "organization" → admin

PRIORITY ASSIGNMENT:
- high: urgent, deadline soon, critical, important, asap
- medium: normal timeline, moderate importance
- low: nice-to-have, future, when time permits

Always be helpful, specific, and create actionable tasks that move projects forward.`}buildUserPrompt(t){let a=`User request: "${t.message}"`;return t.action&&(a+=`
Action type: ${t.action}`),t.tasks.length>0&&(a+=`

Current tasks:
`,t.tasks.slice(0,5).forEach(r=>{a+=`- ${r.title} (${r.status}, ${r.priority} priority, ${r.category})
`}),t.tasks.length>5&&(a+=`... and ${t.tasks.length-5} more tasks
`)),this.isTaskCreationRequest(t.message)&&(a+=`

This appears to be a task creation request. Please create specific, actionable tasks with proper categorization and respond in JSON format.`),a}isTaskCreationRequest(t){const a=["create","add","make","build","develop","design","implement","task","todo","need to","should","must","have to","project","feature","fix","update","improve"],r=t.toLowerCase();return a.some(l=>r.includes(l))}parseGrokResponse(t,a){try{const l=t.match(/\{[\s\S]*\}/);if(l){const o=JSON.parse(l[0]);return o.tasks&&Array.isArray(o.tasks)&&(o.tasks=o.tasks.map(d=>this.validateAndEnhanceTask(d))),{message:o.message||t,tasks:o.tasks||void 0,analysis:o.analysis||void 0}}}catch(l){console.warn("JSON parsing failed, falling back to text extraction:",l)}const r=this.extractTasksFromText(t,a.message);return{message:t,tasks:r.length>0?r:void 0}}validateAndEnhanceTask(t){const a=Date.now(),r=Math.random().toString(36).substring(2,8);return{id:t.id||`task-${a}-${r}`,title:t.title||"Untitled Task",completed:!1,status:t.status||"not-started",priority:t.priority||"medium",category:t.category||this.inferCategory(t.title||""),description:t.description||"",estimatedHours:t.estimatedHours||void 0,dueDate:t.dueDate||void 0,tags:t.tags||[],subtasks:t.subtasks||[]}}inferCategory(t){const a=t.toLowerCase();return a.match(/\b(code|coding|program|develop|bug|feature|api|database|frontend|backend)\b/)?"development":a.match(/\b(design|ui|ux|mockup|wireframe|logo|brand|visual)\b/)?"design":a.match(/\b(marketing|social|content|seo|campaign|promotion|ads)\b/)?"marketing":a.match(/\b(client|meeting|call|presentation|proposal|demo)\b/)?"client":"admin"}extractTasksFromText(t,a){const r=[];return t.split(`
`).forEach((o,d)=>{const y=[/^[\s]*[-*•]\s*(.+)$/,/^[\s]*\d+[\.)]\s*(.+)$/,/^[\s]*Task:\s*(.+)$/i,/^[\s]*TODO:\s*(.+)$/i,/^[\s]*-\s*\[[ x]\]\s*(.+)$/];for(const b of y){const v=o.match(b);if(v&&v[1]){const w=v[1].trim();if(w.length>3&&w.length<150){const f=Date.now(),S=Math.random().toString(36).substring(2,8);r.push({id:`extracted-${f}-${d}-${S}`,title:w,completed:!1,status:"not-started",priority:this.inferPriority(w,a),category:this.inferCategory(w),description:`Extracted from: "${a}"`,tags:this.extractTags(w)});break}}}}),r}inferPriority(t,a){const r=`${t} ${a}`.toLowerCase();return r.match(/\b(urgent|critical|asap|immediately|high|important|priority)\b/)?"high":r.match(/\b(low|later|someday|nice|optional|when time)\b/)?"low":"medium"}extractTags(t){const a=[],r=t.toLowerCase();return r.includes("react")&&a.push("react"),(r.includes("ui")||r.includes("interface"))&&a.push("ui"),r.includes("api")&&a.push("api"),r.includes("mobile")&&a.push("mobile"),r.includes("web")&&a.push("web"),a}analyzeWorkload(t){return C(this,null,function*(){return this.chatWithGrok({message:"Please analyze my current workload and provide insights on productivity, task distribution, and recommendations for improvement.",tasks:t,action:"analyze"})})}suggestTaskPriorities(t){return C(this,null,function*(){return this.chatWithGrok({message:"Help me prioritize these tasks based on deadlines, importance, and dependencies. Suggest which tasks I should focus on first.",tasks:t,action:"prioritize"})})}createProjectPlan(t,a){return C(this,null,function*(){return this.chatWithGrok({message:`Create a detailed project plan for: ${t}. Break it down into specific, actionable tasks with priorities, categories, and estimated timelines.`,tasks:a,action:"plan"})})}optimizeSchedule(t){return C(this,null,function*(){return this.chatWithGrok({message:"Analyze my current tasks and suggest ways to optimize my schedule for better productivity and time management.",tasks:t,action:"optimize"})})}createTasksFromDescription(t,a){return C(this,null,function*(){return this.chatWithGrok({message:`Create specific, actionable tasks for: ${t}. Include proper categorization, priorities, and break down complex work into manageable tasks.`,tasks:a,action:"create"})})}isReady(){return this.isConfigured}}const Ae=new Ds;class Is{constructor(){ve(this,"isGrokReady");this.isGrokReady=Ae.isReady()}processCommand(t,a){return C(this,null,function*(){try{const r=yield this.parseUserInput(t);return yield this.executeCommand(r,a)}catch(r){return console.error("AI Command Processing Error:",r),{success:!1,message:"I encountered an error processing your request. Please try again or rephrase your command."}}})}parseUserInput(t){return C(this,null,function*(){if(!this.isGrokReady)return this.fallbackParsing(t);try{const a=`
        Parse this user command for a daily task tracker into a structured command:
        User input: "${t}"
        
        Available actions: add, delete, complete, clear, search, help
        Available targets: all, deep_focus, light_focus, morning_routine, workout, health
        Available priorities: high, medium, low
        
        Respond with JSON only:
        {
          "action": "add|delete|complete|clear|search|help",
          "target": "all|deep_focus|light_focus|morning_routine|workout|health",
          "content": "task description if adding",
          "priority": "high|medium|low if adding"
        }
        
        Examples:
        - "delete all deep focus tasks" -> {"action": "delete", "target": "deep_focus"}
        - "add high priority task to review client proposals" -> {"action": "add", "target": "deep_focus", "content": "review client proposals", "priority": "high"}
        - "complete all morning routine" -> {"action": "complete", "target": "morning_routine"}
        - "clear all tasks" -> {"action": "clear", "target": "all"}
      `,l=(yield Ae.chatWithGrok({message:a,tasks:[],action:"analyze"})).message.match(/\{[\s\S]*\}/);if(l){const o=JSON.parse(l[0]);return{action:o.action||"help",target:o.target||"all",content:o.content,priority:o.priority}}}catch(a){console.error("Grok parsing failed:",a)}return this.fallbackParsing(t)})}fallbackParsing(t){const a=t.toLowerCase();let r="help";a.includes("add")||a.includes("create")?r="add":a.includes("delete")||a.includes("remove")||a.includes("clear")?r=a.includes("all")?"clear":"delete":a.includes("complete")||a.includes("finish")||a.includes("done")?r="complete":(a.includes("search")||a.includes("find"))&&(r="search");let l="all";a.includes("deep focus")||a.includes("deep work")?l="deep_focus":a.includes("light focus")||a.includes("light work")?l="light_focus":a.includes("morning")||a.includes("routine")?l="morning_routine":a.includes("workout")||a.includes("exercise")?l="workout":(a.includes("health")||a.includes("supplement"))&&(l="health");let o;if(r==="add"){const y=a.match(/add\s+(.*?)(?:\s+to|$)/);o=y?y[1]:t.replace(/add\s*/,"")}let d;return a.includes("high priority")||a.includes("urgent")?d="high":a.includes("low priority")||a.includes("later")?d="low":r==="add"&&(d="medium"),{action:r,target:l,content:o,priority:d}}executeCommand(t,a){return C(this,null,function*(){switch(t.action){case"add":return this.handleAddTask(t,a);case"delete":return this.handleDeleteTasks(t,a);case"complete":return this.handleCompleteTasks(t,a);case"clear":return this.handleClearTasks(t,a);case"search":return this.handleSearchTasks(t,a);case"help":default:return this.handleHelp()}})}handleAddTask(t,a){return C(this,null,function*(){if(!t.content)return{success:!1,message:"Please specify what task you'd like to add."};const r={id:`task-${Date.now()}-${Math.random().toString(36).substring(2,8)}`,title:t.content,completed:!1,priority:t.priority||"medium",category:t.target};if(this.isGrokReady&&t.target==="deep_focus")try{const l=yield Ae.createTasksFromDescription(t.content,[]);if(l.tasks&&l.tasks.length>0)return{success:!0,message:`I've created ${l.tasks.length} enhanced task(s) for deep focus work.`,tasks:l.tasks.map(o=>({id:o.id,title:o.title,completed:!1,priority:o.priority,category:"deep_focus",notes:o.description}))}}catch(l){console.error("Grok task enhancement failed:",l)}return{success:!0,message:`Added "${t.content}" to ${t.target.replace("_"," ")} tasks with ${t.priority} priority.`,tasks:[r]}})}handleDeleteTasks(t,a){const r=t.target==="all"?"all sections":t.target.replace("_"," ");return Promise.resolve({success:!0,message:`Cleared all tasks from ${r}.`,actions:[{type:"clear_tasks",description:`Clear ${r}`,executed:!0}]})}handleCompleteTasks(t,a){const r=t.target==="all"?"all sections":t.target.replace("_"," ");return Promise.resolve({success:!0,message:`Marked all tasks in ${r} as completed! 🎉`,actions:[{type:"complete_tasks",description:`Complete all tasks in ${r}`,executed:!0}]})}handleClearTasks(t,a){const r=t.target==="all"?"all sections":t.target.replace("_"," ");return Promise.resolve({success:!0,message:`Cleared all tasks from ${r}.`,actions:[{type:"clear_tasks",description:`Clear all tasks from ${r}`,executed:!0}]})}handleSearchTasks(t,a){var d;const r=[...a.deepFocus,...a.lightFocus,...a.morningRoutine,...a.workout,...a.health],l=((d=t.content)==null?void 0:d.toLowerCase())||"",o=r.filter(y=>{var b;return y.title.toLowerCase().includes(l)||((b=y.notes)==null?void 0:b.toLowerCase().includes(l))});return Promise.resolve({success:!0,message:`Found ${o.length} tasks matching your search.`,tasks:o})}handleHelp(){return Promise.resolve({success:!0,message:`
🤖 **Daily Tracker AI Assistant Commands:**

**Add Tasks:**
- "Add high priority task review client proposals"
- "Create deep focus task for coding the new feature"
- "Add workout push-ups to routine"

**Complete Tasks:**
- "Complete all morning routine"
- "Mark all deep focus tasks as done"
- "Finish all workout tasks"

**Delete/Clear:**
- "Delete all deep focus tasks"  
- "Clear all light focus work"
- "Remove all tasks"

**Search:**
- "Search for client tasks"
- "Find all high priority items"

**Task Categories:**
- **Deep Focus:** Important work requiring high concentration
- **Light Focus:** Easier tasks, administrative work
- **Morning Routine:** Daily startup activities
- **Workout:** Exercise and fitness tasks
- **Health:** Supplements, nutrition, wellness

Just speak naturally! I'll understand and execute your commands.
    `.trim()})}quickComplete(t){return C(this,null,function*(){return this.handleCompleteTasks({action:"complete",target:t},{})})}quickClear(t){return C(this,null,function*(){return this.handleClearTasks({action:"clear",target:t},{})})}quickAdd(t,a,r="medium"){return C(this,null,function*(){return this.handleAddTask({action:"add",target:t,content:a,priority:r},{})})}isReady(){return!0}getServiceStatus(){return{grokReady:this.isGrokReady,fallbackReady:!0}}}const ut=new Is,Ls=({currentTasks:n,onTasksUpdate:t,className:a=""})=>{const[r,l]=L.useState(!1),[o,d]=L.useState(""),[y,b]=L.useState(!1),[v,w]=L.useState(!1),[f,S]=L.useState([]),[N,E]=L.useState({grokReady:!1,fallbackReady:!0}),[g,R]=L.useState(!0),[A,$]=L.useState(null),P=L.useRef(null),G=L.useRef(null);L.useEffect(()=>{const x=ut.getServiceStatus();E(x),C(void 0,null,function*(){const M=ne.isSpeechRecognitionSupported();let O=!1;try{O=yield ne.checkMicrophonePermissions()}catch(K){console.warn("🎤 [AI ASSISTANT] Microphone check failed:",K)}const re=M&&O;R(re),console.log("🎤 [AI ASSISTANT] Voice support:",{speechSupported:M,micPermission:O,supported:re})}),f.length===0&&S([{id:"welcome",type:"assistant",content:`🤖 **Daily Tracker AI Ready!**

I can help you manage your daily tasks with natural language commands:

• "**Complete all morning routine**"
• "**Add high priority task review client proposals**"
• "**Delete all deep focus tasks**"
• "**Clear all light work**"

Just tell me what you want to do!${g?`

🎤 **Voice commands are supported!**`:""}`,timestamp:new Date}])},[]),L.useEffect(()=>{J()},[f]);const J=()=>{var x;(x=P.current)==null||x.scrollIntoView({behavior:"smooth"})},Q=x=>C(void 0,null,function*(){if(x.preventDefault(),!o.trim()||y)return;const j={id:`user-${Date.now()}`,type:"user",content:o,timestamp:new Date};S(M=>[...M,j]),d(""),b(!0);try{const M=yield ut.processCommand(o,n),O={id:`assistant-${Date.now()}`,type:"assistant",content:M.message,timestamp:new Date,actions:M.actions,tasks:M.tasks};S(re=>[...re,O]),M.success&&M.actions&&k(M.actions,M.tasks)}catch(M){const O={id:`error-${Date.now()}`,type:"assistant",content:"I encountered an error processing your request. Please try again.",timestamp:new Date};S(re=>[...re,O])}finally{b(!1)}}),k=(x,j)=>{x.forEach(M=>{switch(M.type){case"clear_tasks":Object.keys(n).forEach(O=>{t(O,"clear")});break;case"complete_tasks":Object.keys(n).forEach(O=>{t(O,"complete_all")});break;default:j&&t("deepFocus","add",j)}})},ie=()=>C(void 0,null,function*(){if(console.log("🎤 [AI ASSISTANT] Voice input requested"),$(null),!g){const x="Voice recognition not supported. Please use Chrome, Edge, or Safari with microphone permissions.";$(x),console.error("❌ [AI ASSISTANT] Voice not supported:",x);return}if(v){console.log("🛑 [AI ASSISTANT] Stopping voice input"),ne.stopListening(),w(!1);return}console.log("🎤 [AI ASSISTANT] Starting voice input"),w(!0);try{yield ne.startListening((x,j)=>C(void 0,null,function*(){if(console.log("📝 [AI ASSISTANT] Voice transcript:",{transcript:x,isFinal:j}),j&&x.trim()){console.log("✅ [AI ASSISTANT] Final voice input received:",x),w(!1),d(x);const M={id:Date.now().toString(),type:"user",content:`🎤 ${x}`,timestamp:new Date};S(O=>[...O,M]),setTimeout(()=>{const O={preventDefault:()=>{}};d(x),Q(O)},200)}}),x=>{console.error("❌ [AI ASSISTANT] Voice error:",x),$(x),w(!1);const j={id:Date.now().toString(),type:"assistant",content:`❌ **Voice Error**: ${x}

Please try again or use text input.`,timestamp:new Date};S(M=>[...M,j])},{language:"en-US",continuous:!1,interimResults:!0})}catch(x){w(!1);const j=x instanceof Error?x.message:"Voice input failed";$(j),console.error("❌ [AI ASSISTANT] Failed to start voice input:",x);const M={id:Date.now().toString(),type:"assistant",content:`❌ **Voice Setup Failed**: ${j}

Please check your microphone permissions and try again.`,timestamp:new Date};S(O=>[...O,M])}}),ae=[{label:"Complete Morning Routine",command:"complete all morning routine"},{label:"Clear Deep Focus",command:"delete all deep focus tasks"},{label:"Add High Priority Task",command:"add high priority task "},{label:"Complete All Tasks",command:"complete all tasks"}],D=x=>{switch(x){case"high":return"bg-red-500/20 text-red-300 border-red-500/50";case"medium":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/50";case"low":return"bg-green-500/20 text-green-300 border-green-500/50";default:return"bg-gray-500/20 text-gray-300 border-gray-500/50"}};return r?e.jsx(q.div,{className:`fixed bottom-6 right-6 z-50 ${a}`,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},transition:{type:"spring",stiffness:300,damping:25},children:e.jsxs(_t,{className:"w-96 h-[500px] bg-gray-900/95 border-orange-500/50 shadow-2xl backdrop-blur-sm",children:[e.jsxs(Ct,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(St,{className:"flex items-center text-orange-400 text-lg",children:[e.jsx(yt,{className:"h-5 w-5 mr-2"}),"Daily Tracker AI",e.jsxs("div",{className:"flex items-center ml-2 space-x-1",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${N.grokReady?"bg-green-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-xs text-gray-400",children:N.grokReady?"Enhanced":"Basic"})]})]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"text-gray-400 hover:text-white h-8 w-8 p-0",children:"×"})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:ae.map((x,j)=>e.jsx(F,{variant:"outline",size:"sm",onClick:()=>d(x.command),className:"text-xs h-6 px-2 bg-gray-800/50 border-gray-600 text-gray-300 hover:bg-gray-700",children:x.label},j))})]}),e.jsxs(Tt,{className:"flex flex-col h-full p-0",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 space-y-3 max-h-80",children:[e.jsx(Se,{children:f.map(x=>e.jsx(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`flex ${x.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${x.type==="user"?"bg-orange-600 text-white":"bg-gray-800 text-gray-100 border border-gray-700"}`,children:[e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:x.content}),x.actions&&e.jsx("div",{className:"mt-2 space-y-1",children:x.actions.map((j,M)=>e.jsxs("div",{className:"flex items-center text-xs text-gray-300",children:[e.jsx(bt,{className:"h-3 w-3 mr-1 text-green-500"}),j.description]},M))}),x.tasks&&e.jsx("div",{className:"mt-2 space-y-1",children:x.tasks.map((j,M)=>e.jsxs("div",{className:"text-xs bg-gray-700/50 rounded p-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:j.title}),j.priority&&e.jsx(X,{variant:"outline",className:`text-xs ${D(j.priority)}`,children:j.priority})]}),j.notes&&e.jsx("div",{className:"text-gray-400 mt-1",children:j.notes})]},M))}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:x.timestamp.toLocaleTimeString()})]})},x.id))}),y&&e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-3 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 animate-spin mr-2 text-orange-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Processing..."})]})}),e.jsx("div",{ref:P})]}),e.jsx("div",{className:"border-t border-gray-700 p-4",children:e.jsxs("form",{onSubmit:Q,className:"flex space-x-2",children:[e.jsx(V,{ref:G,value:o,onChange:x=>d(x.target.value),placeholder:"Tell me what to do with your tasks...",className:"flex-1 bg-gray-800 border-gray-600 text-white placeholder:text-gray-400 focus:border-orange-500",disabled:y}),e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:ie,className:`px-3 transition-all ${v?"bg-red-600 text-white border-red-600 hover:bg-red-700 animate-pulse":"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700"}`,disabled:y,children:v?e.jsx(wt,{className:"h-4 w-4"}):e.jsx(vt,{className:"h-4 w-4"})}),e.jsx(F,{type:"submit",size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white px-3",disabled:y||!o.trim(),children:y?e.jsx(at,{className:"h-4 w-4 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4"})})]})})]})]})}):e.jsx(q.div,{className:`fixed bottom-6 right-6 z-50 ${a}`,initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:e.jsxs(F,{onClick:()=>l(!0),size:"lg",className:"h-14 w-14 rounded-full bg-orange-600 hover:bg-orange-700 shadow-lg group relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-orange-600 to-yellow-600 rounded-full opacity-75 group-hover:opacity-100 blur-sm transition-opacity"}),e.jsx("div",{className:"relative",children:e.jsx(Ot,{className:"h-6 w-6 text-white"})}),y&&e.jsx("div",{className:"absolute -top-1 -right-1",children:e.jsx("div",{className:"h-4 w-4 bg-blue-500 rounded-full animate-pulse"})})]})})},gt=({workType:n,onTasksImport:t,currentDate:a,existingTaskIds:r=[]})=>{const[l,o]=L.useState(!1),[d,y]=L.useState([]),[b,v]=L.useState([]),[w,f]=L.useState([]),[S,N]=L.useState(""),[E,g]=L.useState("all"),[R,A]=L.useState("all"),[$,P]=L.useState(!1);L.useEffect(()=>{l&&G()},[l,n]),L.useEffect(()=>{let D=d.filter(x=>{var j;return!(r.includes(x.id)||x.work_type!==n||S&&!x.title.toLowerCase().includes(S.toLowerCase())&&!((j=x.description)!=null&&j.toLowerCase().includes(S.toLowerCase()))||E!=="all"&&x.category!==E||R!=="all"&&x.priority!==R)});v(D)},[d,S,E,R,n,r]);const G=()=>C(void 0,null,function*(){P(!0);try{const D=yield ge.getTasksForDate(a,n),x=yield ge.getTasksForDate(new Date,n),j=[...D,...x].filter((M,O,re)=>O===re.findIndex(K=>K.id===M.id));y(j)}catch(D){console.error("Failed to load available tasks:",D)}finally{P(!1)}}),J=D=>{f(x=>x.includes(D)?x.filter(j=>j!==D):[...x,D])},Q=()=>{const x=d.filter(j=>w.includes(j.id)).map(j=>h(u({},j),{due_date:B(a,"yyyy-MM-dd")}));t(x),f([]),o(!1)},k=D=>{switch(D){case"critical":return"bg-red-600 text-white";case"urgent":return"bg-orange-600 text-white";case"high":return"bg-yellow-600 text-white";case"medium":return"bg-blue-600 text-white";case"low":return"bg-gray-600 text-white";default:return"bg-gray-600 text-white"}},ae={deep_focus:{title:"Deep Focus Tasks",description:"Import tasks that require deep concentration and focus",icon:e.jsx(rt,{className:"h-4 w-4"}),color:"orange"},light_focus:{title:"Light Focus Tasks",description:"Import tasks for lighter cognitive load work",icon:e.jsx(it,{className:"h-4 w-4"}),color:"green"}}[n];return e.jsxs($e,{open:l,onOpenChange:o,children:[e.jsx(js,{asChild:!0,children:e.jsxs(F,{variant:"outline",size:"sm",className:`
            border-2 transition-all duration-200 hover:scale-105
            ${n==="deep_focus"?"border-orange-500 text-orange-400 hover:bg-orange-500/10":"border-green-500 text-green-400 hover:bg-green-500/10"}
          `,children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Import Tasks"]})}),e.jsxs(ze,{className:"max-w-4xl max-h-[80vh] bg-gray-900 border-gray-700",children:[e.jsxs(qe,{children:[e.jsxs(We,{className:"flex items-center gap-2 text-white",children:[ae.icon,ae.title]}),e.jsx(Dt,{className:"text-gray-400",children:ae.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(V,{placeholder:"Search tasks...",value:S,onChange:D=>N(D.target.value),className:"pl-10 bg-gray-800 border-gray-600 text-white"})]}),e.jsxs(nt,{value:E,onValueChange:g,children:[e.jsx(ct,{className:"w-full sm:w-[180px] bg-gray-800 border-gray-600 text-white",children:e.jsx(dt,{placeholder:"Category"})}),e.jsxs(mt,{className:"bg-gray-800 border-gray-600",children:[e.jsx(U,{value:"all",className:"text-white hover:bg-gray-700",children:"All Categories"}),e.jsx(U,{value:"main",className:"text-white hover:bg-gray-700",children:"Main"}),e.jsx(U,{value:"deep_focus",className:"text-white hover:bg-gray-700",children:"Deep Focus"}),e.jsx(U,{value:"light_focus",className:"text-white hover:bg-gray-700",children:"Light Focus"}),e.jsx(U,{value:"client_work",className:"text-white hover:bg-gray-700",children:"Client Work"}),e.jsx(U,{value:"business_dev",className:"text-white hover:bg-gray-700",children:"Business Dev"}),e.jsx(U,{value:"learning",className:"text-white hover:bg-gray-700",children:"Learning"})]})]}),e.jsxs(nt,{value:R,onValueChange:A,children:[e.jsx(ct,{className:"w-full sm:w-[150px] bg-gray-800 border-gray-600 text-white",children:e.jsx(dt,{placeholder:"Priority"})}),e.jsxs(mt,{className:"bg-gray-800 border-gray-600",children:[e.jsx(U,{value:"all",className:"text-white hover:bg-gray-700",children:"All Priorities"}),e.jsx(U,{value:"critical",className:"text-white hover:bg-gray-700",children:"Critical"}),e.jsx(U,{value:"urgent",className:"text-white hover:bg-gray-700",children:"Urgent"}),e.jsx(U,{value:"high",className:"text-white hover:bg-gray-700",children:"High"}),e.jsx(U,{value:"medium",className:"text-white hover:bg-gray-700",children:"Medium"}),e.jsx(U,{value:"low",className:"text-white hover:bg-gray-700",children:"Low"})]})]})]}),w.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:[e.jsxs("span",{className:"text-blue-300 text-sm",children:[w.length," task",w.length!==1?"s":""," selected"]}),e.jsx(F,{onClick:Q,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Import Selected"})]})]}),e.jsx(Ss,{className:"h-[400px] w-full",children:$?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-400",children:"Loading tasks..."})}):b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[e.jsx(Kt,{className:"h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{children:"No tasks found matching your criteria"}),e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"space-y-2",children:b.map(D=>e.jsx("div",{className:`
                    p-4 rounded-lg border transition-all duration-200 cursor-pointer hover:border-opacity-80
                    ${w.includes(D.id)?"border-blue-500 bg-blue-900/20":"border-gray-600 bg-gray-800/50 hover:bg-gray-800"}
                  `,onClick:()=>J(D.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:w.includes(D.id)?e.jsx(Jt,{className:"h-4 w-4 text-blue-400"}):e.jsx(Yt,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-white truncate",children:D.title}),D.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:D.description})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:e.jsx(X,{className:`text-xs ${k(D.priority)}`,children:D.priority})})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-400",children:[D.estimated_duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"h-3 w-3"}),D.estimated_duration,"m"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(rt,{className:"h-3 w-3"}),"Focus: ",D.focus_level,"/5"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(it,{className:"h-3 w-3"}),"Flow: ",D.flow_state_potential,"/5"]}),D.effort_points&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(X,{variant:"outline",className:"text-xs border-gray-500 text-gray-300",children:[D.effort_points,"pt"]})})]}),D.tags&&D.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[D.tags.slice(0,3).map((x,j)=>e.jsx(X,{variant:"secondary",className:"text-xs bg-gray-700 text-gray-300",children:x},j)),D.tags.length>3&&e.jsxs(X,{variant:"secondary",className:"text-xs bg-gray-700 text-gray-300",children:["+",D.tags.length-3]})]})]})]})},D.id))})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-700",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[b.length," task",b.length!==1?"s":""," available"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{variant:"outline",onClick:()=>o(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Cancel"}),e.jsxs(F,{onClick:Q,disabled:w.length===0,className:`
                ${n==="deep_focus"?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"} text-white
              `,children:["Import ",w.length>0?`(${w.length})`:""]})]})]})]})]})},Fs={yellow:{card:"bg-yellow-900/20 border-yellow-700/50 hover:bg-yellow-900/25",title:"text-yellow-400",icon:"text-yellow-500",progress:"bg-yellow-600",progressBg:"bg-yellow-900/30",divider:"border-yellow-600/50"},purple:{card:"bg-purple-900/20 border-purple-700/50 hover:bg-purple-900/25",title:"text-purple-400",icon:"text-purple-500",progress:"bg-purple-600",progressBg:"bg-purple-900/30",divider:"border-purple-600/50"},green:{card:"bg-green-900/20 border-green-700/50 hover:bg-green-900/25",title:"text-green-400",icon:"text-green-500",progress:"bg-green-600",progressBg:"bg-green-900/30",divider:"border-green-600/50"},red:{card:"bg-red-900/20 border-red-700/50 hover:bg-red-900/25",title:"text-red-400",icon:"text-red-500",progress:"bg-red-600",progressBg:"bg-red-900/30",divider:"border-red-600/50"},pink:{card:"bg-pink-900/20 border-pink-700/50 hover:bg-pink-900/25",title:"text-pink-400",icon:"text-pink-500",progress:"bg-pink-600",progressBg:"bg-pink-900/30",divider:"border-pink-600/50"},indigo:{card:"bg-indigo-900/20 border-indigo-700/50 hover:bg-indigo-900/25",title:"text-indigo-400",icon:"text-indigo-500",progress:"bg-indigo-600",progressBg:"bg-indigo-900/30",divider:"border-indigo-600/50"},orange:{card:"bg-orange-900/20 border-orange-700/50 hover:bg-orange-900/25",title:"text-orange-400",icon:"text-orange-500",progress:"bg-orange-600",progressBg:"bg-orange-900/30",divider:"border-orange-600/50"},blue:{card:"bg-blue-900/20 border-blue-700/50 hover:bg-blue-900/25",title:"text-blue-400",icon:"text-blue-500",progress:"bg-blue-600",progressBg:"bg-blue-900/30",divider:"border-blue-600/50"}},me=({title:n,description:t,icon:a,emoji:r,color:l,children:o,className:d,headerContent:y,progress:b,badge:v,isCompact:w=!1,onClick:f,isCollapsible:S=!1,defaultCollapsed:N=!1,showCollapseWhenComplete:E=!1,completedTasksCount:g=0,totalTasksCount:R=0})=>{const A=Fs[l],[$,P]=L.useState(N),G=S&&(!E||E&&g===R&&R>0),J=Q=>{Q.stopPropagation(),P(!$)};return e.jsx("div",{className:_("w-full transition-transform duration-200",f&&"cursor-pointer hover:scale-[1.02]"),onClick:f,children:e.jsxs(_t,{className:_(A.card,"transition-all duration-200 flex flex-col",w&&"shadow-sm",!w&&"shadow-lg",d),children:[e.jsxs(Ct,{className:_(w?"p-4 sm:p-5 pb-3 sm:pb-4":"p-4 sm:p-5 lg:p-6","relative shrink-0"),children:[b!==void 0&&e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 overflow-hidden rounded-t-lg",children:e.jsx("div",{className:_("h-full transition-all duration-500",A.progress),style:{width:`${b}%`}})}),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(St,{className:_("flex items-center gap-2 flex-wrap",A.title,w?"text-base sm:text-lg":"text-lg sm:text-xl"),children:[e.jsx(a,{className:_(A.icon,w?"h-4 w-4 sm:h-5 sm:w-5":"h-5 w-5 sm:h-6 sm:w-6")}),r&&e.jsx("span",{className:"text-base sm:text-lg",children:r}),e.jsx("span",{className:"font-semibold truncate",children:n}),G&&g===R&&R>0&&e.jsx(Ve,{className:"h-4 w-4 text-green-500 ml-1"})]}),t&&!$&&e.jsx(ys,{className:_("text-gray-300 mt-2 leading-relaxed",w?"text-xs sm:text-sm":"text-sm sm:text-base"),children:t}),$&&G&&e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[g,"/",R," tasks completed ✓"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsx(X,{variant:v.variant||"outline",className:_("shrink-0",w?"text-xs px-2 py-1":"text-xs sm:text-sm px-2 py-1"),children:v.label}),G&&e.jsx(F,{variant:"ghost",size:"sm",onClick:J,className:_("h-8 w-8 p-0 md:hidden",A.icon,"hover:bg-gray-700/50"),children:$?e.jsx(Xt,{className:"h-4 w-4"}):e.jsx(Zt,{className:"h-4 w-4"})})]})]}),y&&!$&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:_("border-t my-4",A.divider)}),e.jsx("div",{className:"space-y-3",children:y})]})]}),e.jsx(Se,{children:!$&&e.jsx(q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsx(Tt,{className:_("flex-1 min-h-0",w?"p-4 sm:p-5 pt-0":"p-4 sm:p-5 lg:p-6 pt-0"),children:o})})})]})})},Ms={sm:"gap-2 sm:gap-3",md:"gap-3 sm:gap-4 lg:gap-5",lg:"gap-4 sm:gap-6 lg:gap-8"},As={full:"col-span-full",half:"col-span-full sm:col-span-1",third:"col-span-full sm:col-span-1 lg:col-span-1","two-thirds":"col-span-full sm:col-span-2 lg:col-span-2"},Es=({items:n,columns:t={mobile:1,tablet:2,desktop:3},gap:a="md",className:r,animate:l=!0})=>{const o=[...n].sort((v,w)=>v.priority===void 0&&w.priority===void 0?0:v.priority===void 0?1:w.priority===void 0?-1:v.priority-w.priority),d=_("grid",t.mobile===1&&"grid-cols-1",t.mobile===2&&"grid-cols-1 xs:grid-cols-2",t.tablet===2&&"md:grid-cols-2",t.tablet===3&&"md:grid-cols-3",t.tablet===4&&"md:grid-cols-4",t.desktop===2&&"lg:grid-cols-2",t.desktop===3&&"lg:grid-cols-3",t.desktop===4&&"lg:grid-cols-4",t.desktop===5&&"lg:grid-cols-5",t.desktop===6&&"lg:grid-cols-6",Ms[a],r),y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:l?.1:0}}},b={hidden:{opacity:0,y:l?20:0,scale:l?.95:1},visible:{opacity:1,y:0,scale:1,transition:{duration:.3,ease:"easeOut"}}};return e.jsx(q.div,{className:d,variants:y,initial:"hidden",animate:"visible",children:e.jsx(Se,{children:o.map(v=>e.jsx(q.div,{className:_("h-full",v.span&&As[v.span]),variants:b,layout:!0,children:v.content},v.id))})})},ht=({title:n,subtitle:t,children:a,className:r,action:l,collapsible:o=!1,defaultCollapsed:d=!1,noPadding:y=!1,id:b})=>{const[v,w]=_e.useState(d),f=()=>{o&&w(!v)};return e.jsxs(q.section,{id:b,className:_("relative",r),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(n||t||l)&&e.jsx("div",{className:_("mb-4 sm:mb-6",y?"":"px-1"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:_("flex-1",o&&"cursor-pointer select-none"),onClick:f,children:[n&&e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white flex items-center gap-2",children:[o&&e.jsx(q.div,{animate:{rotate:v?0:90},transition:{duration:.2},children:e.jsx(Ce,{className:"h-5 w-5 text-gray-400"})}),n]}),t&&e.jsx("p",{className:"text-sm sm:text-base text-gray-400 mt-1",children:t})]}),l&&e.jsxs(F,{variant:"ghost",size:"sm",onClick:l.onClick,className:"text-gray-300 hover:text-white hover:bg-gray-700",children:[l.icon,l.label]})]})}),e.jsx(q.div,{animate:{height:v?0:"auto",opacity:v?0:1},transition:{duration:.3},style:{overflow:"hidden"},children:e.jsx("div",{className:_(y?"":"px-1"),children:a})})]})},ke=({className:n,color:t="gray"})=>{const a={gray:"border-gray-700",orange:"border-orange-600/50",yellow:"border-yellow-600/50"};return e.jsx("div",{className:_("border-t my-6 sm:my-8",a[t],n)})},It={default:{bg:"bg-gray-700",fill:"bg-gray-400",text:"text-gray-400",ring:"ring-gray-600"},success:{bg:"bg-green-900/30",fill:"bg-green-500",text:"text-green-400",ring:"ring-green-600"},warning:{bg:"bg-yellow-900/30",fill:"bg-yellow-500",text:"text-yellow-400",ring:"ring-yellow-600"},danger:{bg:"bg-red-900/30",fill:"bg-red-500",text:"text-red-400",ring:"ring-red-600"}},Lt={sm:{height:"h-2",text:"text-xs",icon:"h-3 w-3",circular:"h-12 w-12"},md:{height:"h-3",text:"text-sm",icon:"h-4 w-4",circular:"h-16 w-16"},lg:{height:"h-4",text:"text-base",icon:"h-5 w-5",circular:"h-20 w-20"}},Ps=({value:n,max:t=100,label:a,size:r="md",color:l="default",showPercentage:o=!0,showIcon:d=!1,animate:y=!0,className:b})=>{const v=Math.min(n/t*100,100),w=It[l],f=Lt[r];return e.jsxs("div",{className:_("w-full",b),children:[(a||o)&&e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a&&e.jsx("span",{className:_("font-medium",f.text,w.text),children:a}),e.jsxs("div",{className:"flex items-center gap-2",children:[d&&v===100&&e.jsx(Ve,{className:_(f.icon,"text-green-500")}),o&&e.jsxs("span",{className:_(f.text,w.text),children:[Math.round(v),"%"]})]})]}),e.jsx("div",{className:_("w-full rounded-full overflow-hidden",w.bg,f.height),children:e.jsx(q.div,{className:_("h-full rounded-full",w.fill),initial:y?{width:0}:{width:`${v}%`},animate:{width:`${v}%`},transition:{duration:.5,ease:"easeOut"}})})]})},Vs=({value:n,max:t=100,size:a="md",color:r="default",showPercentage:l=!0,animate:o=!0,className:d})=>{const y=Math.min(n/t*100,100),b=It[r],v=Lt[a],w=a==="sm"?18:a==="md"?26:34,f=a==="sm"?3:a==="md"?4:5,S=2*Math.PI*w,N=S-y/100*S;return e.jsxs("div",{className:_("relative inline-flex",v.circular,d),children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",children:[e.jsx("circle",{cx:"50%",cy:"50%",r:w,fill:"none",stroke:"currentColor",strokeWidth:f,className:_("text-gray-700")}),e.jsx(q.circle,{cx:"50%",cy:"50%",r:w,fill:"none",stroke:"currentColor",strokeWidth:f,strokeLinecap:"round",className:b.text,initial:o?{strokeDashoffset:S}:{strokeDashoffset:N},animate:{strokeDashoffset:N},transition:{duration:.5,ease:"easeOut"},style:{strokeDasharray:S}})]}),l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:_(v.text,b.text,"font-semibold"),children:[Math.round(y),"%"]})})]})},xt=n=>{const{variant:t="linear"}=n;switch(t){case"circular":return e.jsx(Vs,u({},n));case"linear":default:return e.jsx(Ps,u({},n))}},Rs=({sections:n,className:t})=>{const a=n.reduce((o,d)=>o+d.completed,0),r=n.reduce((o,d)=>o+d.total,0),l=r>0?a/r*100:0;return e.jsxs("div",{className:_("bg-gray-800/50 rounded-lg p-4 sm:p-6 space-y-4",t),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(jt,{className:"h-5 w-5 text-yellow-500"}),"Daily Progress"]}),e.jsxs("span",{className:"text-2xl font-bold text-orange-400",children:[Math.round(l),"%"]})]}),e.jsx(xt,{value:l,color:l===100?"success":l>=70?"warning":"default",size:"lg",showPercentage:!1}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-4",children:n.map(o=>{const d=o.total>0?o.completed/o.total*100:0;return e.jsxs(q.div,{className:"flex items-center gap-3 p-3 bg-gray-700/30 rounded-lg",whileHover:{scale:1.02},children:[o.icon||e.jsx(Ve,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-300",children:o.label}),e.jsxs("p",{className:"text-xs text-gray-500",children:[o.completed,"/",o.total," completed"]})]}),e.jsx(xt,{value:d,variant:"circular",size:"sm",color:o.color||(d===100?"success":"default")})]},o.id)})})]})},pt={low:{color:"text-green-400",icon:e.jsx(he,{className:"h-3 w-3"})},medium:{color:"text-yellow-400",icon:e.jsx(Pe,{className:"h-3 w-3"})},high:{color:"text-orange-400",icon:e.jsx(lt,{className:"h-3 w-3"})},urgent:{color:"text-red-400",icon:e.jsx(lt,{className:"h-3 w-3 animate-pulse"})}},$s=n=>{const a=new Date().getTime()-n.getTime(),r=Math.floor(a/(1e3*60*60*24)),l=Math.floor(a/(1e3*60*60)),o=Math.floor(a/(1e3*60));return r>0?r===1?"1 day ago":`${r} days ago`:l>0?l===1?"1 hour ago":`${l} hours ago`:o>0?o===1?"1 minute ago":`${o} minutes ago`:"Just now"},zs=({task:n,onReopen:t})=>{const a=n.completedAt||new Date,r=$s(a);return e.jsx(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-green-900/10 border border-green-500/20 rounded-lg p-4 hover:bg-green-900/15 transition-all",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Re,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:"font-medium text-sm text-green-100 line-through decoration-green-500/50",children:n.title}),n.priority&&e.jsx("div",{className:_("flex items-center",pt[n.priority].color),children:pt[n.priority].icon})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:n.category&&e.jsx(X,{variant:"outline",className:"text-xs border-green-500/30 text-green-400 bg-green-500/10",children:n.category})}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-300",children:[e.jsx(Ut,{className:"h-3 w-3"}),e.jsx("span",{children:r})]})]}),n.description&&e.jsx("p",{className:"text-xs text-green-200/70 leading-relaxed",children:n.description}),e.jsx("div",{className:"bg-green-500/10 rounded-md p-2 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-green-300/80",children:"Completed on:"}),e.jsx("span",{className:"text-green-300 font-medium",children:a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})}),t&&e.jsx(F,{size:"sm",variant:"outline",onClick:()=>t(n.id),className:"text-xs border-green-500/30 text-green-400 hover:bg-green-500/20 hover:border-green-500/50",children:"Reopen Task"})]})]})})},qs=({isOpen:n,onClose:t,completedTasks:a,onTaskReopen:r})=>e.jsx($e,{open:n,onOpenChange:t,children:e.jsxs(ze,{className:"max-w-2xl max-h-[80vh] bg-gray-900 border-gray-700 text-white",children:[e.jsx(qe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(We,{className:"flex items-center gap-2 text-green-400",children:[e.jsx(jt,{className:"h-5 w-5"}),"Completed Tasks",e.jsx(X,{variant:"outline",className:"bg-green-500/10 text-green-400 border-green-500/30",children:a.length})]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"h-6 w-6 p-0 text-gray-400 hover:text-white",children:e.jsx(kt,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Re,{className:"w-12 h-12 text-green-400 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-gray-400 text-lg font-medium",children:"No completed tasks yet"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Complete some tasks to see them here!"})]}):e.jsx("div",{className:"space-y-3",children:a.sort((l,o)=>{const d=l.completedAt||new Date;return(o.completedAt||new Date).getTime()-d.getTime()}).map(l=>e.jsx(zs,{task:l,onReopen:r},l.id))})}),a.length>0&&e.jsx("div",{className:"border-t border-gray-700 pt-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[e.jsxs("span",{children:["Total completed: ",a.length," tasks"]}),e.jsx("span",{children:"Keep up the great work! 🎉"})]})})]})}),Ne={low:{color:"text-green-400",icon:e.jsx(is,{className:"h-3 w-3"})},medium:{color:"text-yellow-400",icon:e.jsx(he,{className:"h-3 w-3"})},high:{color:"text-orange-400",icon:e.jsx(Pe,{className:"h-3 w-3"})},urgent:{color:"text-red-400",icon:e.jsx(Pe,{className:"h-3 w-3 animate-pulse"})}},ft={yellow:"bg-yellow-900/10 border-transparent hover:bg-yellow-900/15 hover:border-white",purple:"bg-purple-900/10 border-transparent hover:bg-purple-900/15 hover:border-white",green:"bg-green-900/10 border-transparent hover:bg-green-900/15 hover:border-white",red:"bg-red-900/10 border-transparent hover:bg-red-900/15 hover:border-white",pink:"bg-pink-900/10 border-transparent hover:bg-pink-900/15 hover:border-white",indigo:"bg-indigo-900/10 border-transparent hover:bg-indigo-900/15 hover:border-white",orange:"bg-orange-900/10 border-transparent hover:bg-orange-900/15 hover:border-white",blue:"bg-blue-900/10 border-transparent hover:bg-blue-900/15 hover:border-white"},Ws=({id:n,title:t,completed:a,description:r,priority:l,category:o,dueDate:d,logField:y,logValue:b,completedAt:v,onToggle:w,onUpdate:f,onDelete:S,onStartFocusSession:N,editable:E=!1,variant:g="default",color:R="yellow",className:A,completedTasks:$=[]})=>{const[P,G]=_e.useState(!1),[J,Q]=_e.useState(t),[k,ie]=_e.useState(!1),ae=()=>{f&&J.trim()&&(f(n,"title",J),G(!1))},D=x=>{x.key==="Enter"?ae():x.key==="Escape"&&(Q(t),G(!1))};return g==="compact"?e.jsxs(q.div,{className:_("flex items-center space-x-2 p-2 rounded-md transition-colors",ft[R],a&&"opacity-60",A),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{x:5},children:[e.jsx(se,{checked:a,onCheckedChange:()=>w(n),className:_("border-gray-600",a&&"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600")}),e.jsx("span",{className:_("text-sm text-gray-200 flex-1",a&&"line-through"),children:t}),l&&e.jsx("div",{className:_("flex items-center",Ne[l].color),children:Ne[l].icon})]}):e.jsxs(q.div,{className:_("p-3 sm:p-4 rounded-lg border transition-all",ft[R],a&&"opacity-70",A),initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(se,{checked:a,onCheckedChange:()=>w(n),className:_("mt-1 border-gray-600",a&&"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600")}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[P?e.jsx(V,{value:J,onChange:x=>Q(x.target.value),onBlur:ae,onKeyDown:D,className:"bg-transparent border-gray-600 text-white text-sm sm:text-base",autoFocus:!0}):e.jsx("h4",{className:_("font-medium text-sm sm:text-base",a?"text-gray-400 line-through":"text-white"),children:t}),e.jsxs(bs,{children:[e.jsx(ws,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-white",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(vs,{align:"end",className:"bg-gray-800 border-gray-700",children:[e.jsxs(je,{onClick:()=>ie(!0),className:"text-gray-300 hover:text-white hover:bg-gray-700",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Show Completed Tasks"]}),N&&!a&&(o==="deep_focus"||o==="light_focus")&&e.jsxs(je,{onClick:()=>N(n),className:"text-orange-400 hover:text-orange-300 hover:bg-gray-700",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Start Focus Session"]}),E&&e.jsxs(je,{onClick:()=>G(!0),className:"text-gray-300 hover:text-white hover:bg-gray-700",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Edit Task"]}),S&&e.jsxs(je,{onClick:()=>S(n),className:"text-red-400 hover:text-red-300 hover:bg-gray-700",children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Delete Task"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l&&e.jsx("div",{className:_("flex items-center",Ne[l].color),children:Ne[l].icon}),o&&e.jsx(X,{variant:"outline",className:"text-xs border-blue-500/50 text-blue-400 bg-blue-500/10",children:o}),d&&e.jsxs(X,{variant:"outline",className:"text-xs border-gray-500/50 text-gray-400 bg-gray-500/10",children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),d]})]}),r&&e.jsx("p",{className:_("text-xs sm:text-sm leading-relaxed",a?"text-gray-500":"text-gray-300"),children:r}),y&&e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400",children:y}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{value:b||"",onChange:x=>f==null?void 0:f(n,"logValue",x.target.value),placeholder:"Enter value...",className:"bg-gray-800 border border-gray-600 text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",disabled:a}),!a&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const x=parseInt(b||"0"),j=Math.max(0,x-5);f==null||f(n,"logValue",j.toString())},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2 min-w-[28px]",children:"-5"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const j=parseInt(b||"0")+5;f==null||f(n,"logValue",j.toString())},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2 min-w-[28px]",children:"+5"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const j=parseInt(b||"0")+10;f==null||f(n,"logValue",j.toString())},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2 min-w-[28px]",children:"+10"})]})]})]})]})]}),e.jsx(qs,{isOpen:k,onClose:()=>ie(!1),completedTasks:$,onTaskReopen:x=>{f==null||f(x,"completed",!1),ie(!1)}})]})},Ee=({tasks:n,onToggle:t,onUpdate:a,onDelete:r,onStartFocusSession:l,onClick:o,variant:d="default",color:y,emptyMessage:b="No tasks yet",className:v,completedTasks:w=[]})=>n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400",children:e.jsx("p",{children:b})}):e.jsx("div",{className:_(d==="compact"?"space-y-1":"space-y-3",v),children:n.map((f,S)=>e.jsx("div",{onClick:()=>o==null?void 0:o(f),className:o?"cursor-pointer":"",children:e.jsx(Ws,h(u({},f),{onToggle:t,onUpdate:a,onDelete:r,onStartFocusSession:l,variant:d,color:y,completedTasks:w}))},f.id))}),ye=n=>{const t={orange:{border:"border-transparent hover:border-white",bg:"bg-orange-500/10",text:"text-orange-300",checkbox:"border-orange-500 data-[state=checked]:bg-orange-500 data-[state=checked]:border-orange-500"},yellow:{border:"border-transparent hover:border-white",bg:"bg-yellow-500/10",text:"text-yellow-300",checkbox:"border-yellow-500 data-[state=checked]:bg-yellow-500 data-[state=checked]:border-yellow-500"},green:{border:"border-transparent hover:border-white",bg:"bg-green-500/10",text:"text-green-300",checkbox:"border-green-500 data-[state=checked]:bg-green-500 data-[state=checked]:border-green-500"},red:{border:"border-transparent hover:border-white",bg:"bg-red-500/10",text:"text-red-300",checkbox:"border-red-500 data-[state=checked]:bg-red-500 data-[state=checked]:border-red-500"},pink:{border:"border-transparent hover:border-white",bg:"bg-pink-500/10",text:"text-pink-300",checkbox:"border-pink-500 data-[state=checked]:bg-pink-500 data-[state=checked]:border-pink-500"},blue:{border:"border-transparent hover:border-white",bg:"bg-blue-500/10",text:"text-blue-300",checkbox:"border-blue-500 data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"},purple:{border:"border-transparent hover:border-white",bg:"bg-purple-500/10",text:"text-purple-300",checkbox:"border-purple-500 data-[state=checked]:bg-purple-500 data-[state=checked]:border-purple-500"},indigo:{border:"border-transparent hover:border-white",bg:"bg-indigo-500/10",text:"text-indigo-300",checkbox:"border-indigo-500 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500"}};return t[n]||t.orange},Bs=n=>{switch(n){case"urgent":return"border-red-500/50 text-red-400 bg-red-500/10";case"high":return"border-orange-500/50 text-orange-400 bg-orange-500/10";case"medium":return"border-yellow-500/50 text-yellow-400 bg-yellow-500/10";case"low":return"border-green-500/50 text-green-400 bg-green-500/10";default:return"border-gray-500/50 text-gray-400 bg-gray-500/10"}},ue=({children:n,task:t,onSwipeComplete:a,onSwipeDelete:r,onSwipeEdit:l,onUpdate:o,color:d="orange",variant:y="default",showPriority:b=!1,showDuration:v=!1,showLog:w=!1,placeholder:f,className:S,swipeThreshold:N=100})=>{const[E,g]=L.useState(null),R=ls(0),A=os(R,[-200,0,200],[.8,1,.8]),$=(G,J)=>{const Q=J.offset.x,k=J.velocity.x;Q>N||k>500?(a==null||a(),g(null),R.set(0)):Q<-N||k<-500?(l==null||l(),g(null),R.set(0)):(g(null),R.set(0))},P=(G,J)=>{const Q=J.offset.x;Q>50?g("right"):Q<-50?g("left"):g(null)};return t?e.jsx(Os,{task:t,onSwipeComplete:a,onSwipeDelete:r,onSwipeEdit:l,onUpdate:o,color:d,variant:y,showPriority:b,showDuration:v,showLog:w,placeholder:f,className:S}):e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(q.div,{drag:"x",dragConstraints:{left:-200,right:200},dragElastic:.1,onDrag:P,onDragEnd:$,className:_("relative bg-gradient-to-r from-gray-800/60 to-gray-900/40 backdrop-blur-sm rounded-lg border border-gray-700/50 touch-pan-y",S),style:{x:R,opacity:A},children:n}),e.jsx(Se,{children:E&&e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:_("absolute inset-0 flex items-center justify-center rounded-lg",E==="right"?"bg-green-500/20 border-green-500/50":"bg-red-500/20 border-red-500/50"),children:e.jsx("div",{className:"flex items-center space-x-2 text-white font-medium",children:E==="right"?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-5 w-5 text-green-400"}),e.jsx("span",{children:"Complete"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"h-5 w-5 text-red-400"}),e.jsx("span",{children:"Edit"})]})})})})]})},Os=({task:n,onSwipeComplete:t,onSwipeDelete:a,onSwipeEdit:r,onUpdate:l,color:o="orange",variant:d="default",showPriority:y=!1,showDuration:b=!1,showLog:v=!1,placeholder:w,className:f})=>{const S=()=>d==="editable"?e.jsxs("div",{className:"p-3 flex items-center space-x-3",children:[e.jsx(q.div,{whileTap:{scale:.9},className:"flex-shrink-0",children:e.jsx(se,{checked:n.completed,onCheckedChange:t,className:_("border-2 h-5 w-5 rounded-md transition-colors",ye(o).checkbox)})}),e.jsx("div",{className:"flex-1",children:e.jsx(V,{value:n.title,onChange:N=>l==null?void 0:l("title",N.target.value),className:"bg-transparent border-none text-white p-0 focus:ring-0 text-sm h-6",placeholder:w||"Enter task..."})})]}):d==="workout"?e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q.div,{whileTap:{scale:.9},className:"flex-shrink-0",children:e.jsx(se,{checked:n.completed,onCheckedChange:t,className:_("border-2 h-5 w-5 rounded-md transition-colors",ye(o).checkbox)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:_("font-medium text-sm",n.completed?"line-through text-gray-500":"text-white"),children:n.title}),n.description&&e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:n.description})]})]}),v&&e.jsx("div",{className:"ml-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{value:n.logValue||"",onChange:N=>l==null?void 0:l("logValue",N.target.value),className:"bg-gray-800 border border-gray-600 text-white text-xs h-8 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",placeholder:n.logField||"Log result..."}),!n.completed&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const N=parseInt(n.logValue||"0"),E=Math.max(0,N-5);l==null||l("logValue",E.toString())},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[24px]",children:"-5"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const E=parseInt(n.logValue||"0")+5;l==null||l("logValue",E.toString())},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[24px]",children:"+5"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const E=parseInt(n.logValue||"0")+10;l==null||l("logValue",E.toString())},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[24px]",children:"+10"})]})]})})]}):d==="compact"?e.jsxs("div",{className:"p-2 flex items-center space-x-2",children:[e.jsx(q.div,{whileTap:{scale:.9},className:"flex-shrink-0",children:e.jsx(se,{checked:n.completed,onCheckedChange:t,className:_("border-2 h-4 w-4 rounded-md transition-colors",ye(o).checkbox)})}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:_("font-medium text-xs",n.completed?"line-through text-gray-500":"text-white"),children:n.title})})]}):e.jsxs("div",{className:"p-3 flex items-center space-x-3",children:[e.jsx(q.div,{whileTap:{scale:.9},className:"flex-shrink-0",children:e.jsx(se,{checked:n.completed,onCheckedChange:t,className:_("border-2 h-5 w-5 rounded-md transition-colors",ye(o).checkbox)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:_("font-medium text-sm truncate",n.completed?"line-through text-gray-500":"text-white"),children:n.title}),y&&n.priority&&e.jsx(X,{variant:"outline",className:_("text-xs px-2 py-0.5 ml-2",Bs(n.priority)),children:n.priority})]}),n.description&&e.jsx("p",{className:"text-gray-400 text-xs mt-1 truncate",children:n.description}),b&&n.estimatedDuration&&e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(he,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-400",children:[n.estimatedDuration,"h"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx(q.div,{whileTap:{scale:.9},className:"p-1 rounded-full hover:bg-gray-700 transition-colors",onClick:r,children:e.jsx(Nt,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),e.jsx(Ce,{className:"h-3 w-3 -ml-1"})]})]})]});return e.jsx(ue,{onSwipeComplete:t,onSwipeDelete:a,onSwipeEdit:r,color:o,className:f,children:e.jsx("div",{className:_("bg-gradient-to-r from-gray-800/60 to-gray-900/40 backdrop-blur-sm rounded-lg border transition-colors",ye(o).border,n.completed&&"border-green-500/50 bg-green-500/10"),children:S()})})},sa=()=>{var Ye,Xe,Ze,Ue,et,tt;const n=ns(),[t]=cs(),a=t.get("date"),r=L.useMemo(()=>a?Ns(a):new Date,[a]),l=L.useMemo(()=>B(r,"yyyy-MM-dd"),[r]),[o,d]=L.useState(!0),[y,b]=L.useState(null),[v,w]=L.useState(null),[f,S]=L.useState(null),[N,E]=L.useState(null),[g,R]=L.useState(null),A=(y==null?void 0:y.items)||[{id:"1",title:"Wake Up",completed:!1,description:"Start the day before midday to maximize productivity."},{id:"2",title:"Get Blood Flowing (5 min)",completed:!1,description:"Max rep push-ups (Target PB: 30).",logField:"Log reps: ____"},{id:"3",title:"Hydrate (5 min)",completed:!1,description:"Drink 500 ml water to start the day."},{id:"4",title:"Supplements & Pre-Workout (5 min)",completed:!1,description:"Take omega-3, multivitamin, ashwagandha, and pre-workout."},{id:"5",title:"Shower & Brush Teeth (25 min)",completed:!1,description:"Cold shower to wake up."},{id:"6",title:"Review & Plan Day (15 min)",completed:!1,description:"Go through tasks, prioritize, and allocate time slots."},{id:"7",title:"Meditation (2 min)",completed:!1,description:"Meditate to set an innovative mindset for creating business value."}],$=s=>{if(y){const i=h(u({},y),{items:s});b(i),W.updateDailyRoutine(i)}},[P,G]=L.useState([]),[J,Q]=L.useState(!0),[k,ie]=L.useState(null),[ae,D]=L.useState(!1);L.useEffect(()=>{let s=!0;const i=()=>C(void 0,null,function*(){if(s){Q(!0),console.log("Loading enhanced tasks for date:",l);try{const p=yield ge.getDeepFocusTasksForDate(r);if(!s)return;console.log("Loaded enhanced tasks successfully:",p),G(p)}catch(p){console.error("Failed to load enhanced tasks:",p),s&&G([])}finally{s&&Q(!1)}}}),c=setTimeout(()=>{i()},200);return()=>{s=!1,clearTimeout(c)}},[l]);const x=(s,i)=>C(void 0,null,function*(){try{const c=P.find(T=>T.id===s),p=c?{planned_duration:c.estimated_duration,actual_duration:c.actual_duration,focus_quality:8,energy_level_start:7,energy_level_end:6,distractions_count:0}:void 0;(yield ge.updateTaskCompletion(s,i,p))&&(G(T=>T.map(Y=>Y.id===s?h(u({},Y),{status:i?"done":"pending"}):Y)),yield ge.syncTasksToLifeLock(r))}catch(c){console.error("Failed to update enhanced task:",c)}}),j=((Ye=N==null?void 0:N.habits_data)==null?void 0:Ye.lightFocusTasks)||[{id:"1",title:"",completed:!1},{id:"2",title:"",completed:!1},{id:"3",title:"",completed:!1},{id:"4",title:"",completed:!1},{id:"5",title:"",completed:!1}],M=s=>{if(N){const i=h(u({},N),{habits_data:h(u({},N.habits_data),{lightFocusTasks:s})});E(i),W.updateDailyHabits(i)}},O=s=>C(void 0,null,function*(){try{const i=[...P,...s];G(i);for(const p of s)yield ge.updateTask(p.id,{due_date:B(r,"yyyy-MM-dd")});const c=document.createElement("div");c.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",c.textContent=`✅ ${s.length} deep focus task${s.length!==1?"s":""} imported successfully!`,document.body.appendChild(c),setTimeout(()=>c.remove(),3e3)}catch(i){console.error("Failed to import deep focus tasks:",i);const c=document.createElement("div");c.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",c.textContent="❌ Failed to import tasks",document.body.appendChild(c),setTimeout(()=>c.remove(),3e3)}}),re=s=>C(void 0,null,function*(){try{const i=s.map(T=>({id:T.id,title:T.title,completed:!1,description:T.description})),c=[...j];let p=0;if(i.forEach(T=>{const Y=c.findIndex(Le=>!Le.title&&p<5);Y!==-1&&(c[Y]=T,p++)}),p<i.length){const T=i.slice(p);c.push(...T)}M(c);const m=document.createElement("div");m.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",m.textContent=`✅ ${s.length} light focus task${s.length!==1?"s":""} imported successfully!`,document.body.appendChild(m),setTimeout(()=>m.remove(),3e3)}catch(i){console.error("Failed to import light focus tasks:",i);const c=document.createElement("div");c.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",c.textContent="❌ Failed to import tasks",document.body.appendChild(c),setTimeout(()=>c.remove(),3e3)}}),K=(v==null?void 0:v.exercises)||[{id:"1",title:"Push-ups",completed:!1,target:"50 reps",logged:""},{id:"2",title:"Squats",completed:!1,target:"100 reps",logged:""},{id:"3",title:"Plank",completed:!1,target:"2 minutes",logged:""},{id:"4",title:"Burpees",completed:!1,target:"20 reps",logged:""},{id:"5",title:"Mountain Climbers",completed:!1,target:"50 reps",logged:""}],oe=s=>{if(v){const i=h(u({},v),{exercises:s});w(i),W.updateDailyWorkout(i)}},Z=(f==null?void 0:f.health_checklist)||[{id:"1",title:"Take vitamins/supplements",completed:!1},{id:"2",title:"Drink 2L+ water",completed:!1},{id:"3",title:"No smoking THC",completed:!1},{id:"4",title:"Eat balanced meals",completed:!1},{id:"5",title:"Get 7+ hours sleep",completed:!1}],ce=s=>{if(f){const i=h(u({},f),{health_checklist:s});S(i),W.updateDailyHealth(i)}},be=(f==null?void 0:f.meals)||{breakfast:"",lunch:"",dinner:"",snacks:""},we=s=>{if(f){const i=h(u({},f),{meals:s});S(i),W.updateDailyHealth(i)}},ee=(f==null?void 0:f.macros)||{calories:"",protein:"",carbs:"",fats:""},te=s=>{if(f){const i=h(u({},f),{macros:s});S(i),W.updateDailyHealth(i)}},xe={bullshitContentTime:((Xe=N==null?void 0:N.bullshit_content_minutes)==null?void 0:Xe.toString())||"",noWeed:(N==null?void 0:N.no_weed)||!1,noScrolling:(N==null?void 0:N.no_scrolling)||!1},pe=s=>{if(N){const i=h(u({},N),{bullshit_content_minutes:parseInt(s.bullshitContentTime)||0,no_weed:s.noWeed,no_scrolling:s.noScrolling});E(i),W.updateDailyHabits(i)}},[z,H]=L.useState({wentWell:(g==null?void 0:g.went_well)||["","",""],evenBetterIf:(g==null?void 0:g.even_better_if)||["","","","",""],analysis:(g==null?void 0:g.analysis)||["","",""],patterns:(g==null?void 0:g.patterns)||["","",""],changes:(g==null?void 0:g.changes)||["","",""],bedtime:(g==null?void 0:g.bedtime)||"",sleepQuality:((Ze=g==null?void 0:g.sleep_quality)==null?void 0:Ze.toString())||"",meditationTime:((Ue=g==null?void 0:g.meditation_minutes)==null?void 0:Ue.toString())||"",meditated:(g==null?void 0:g.meditated)||!1,tomorrowTasks:(g==null?void 0:g.tomorrow_tasks)||["","",""]});L.useEffect(()=>{var s,i;g&&H({wentWell:g.went_well||["","",""],evenBetterIf:g.even_better_if||["","","","",""],analysis:g.analysis||["","",""],patterns:g.patterns||["","",""],changes:g.changes||["","",""],bedtime:g.bedtime||"",sleepQuality:((s=g.sleep_quality)==null?void 0:s.toString())||"",meditationTime:((i=g.meditation_minutes)==null?void 0:i.toString())||"",meditated:g.meditated||!1,tomorrowTasks:g.tomorrow_tasks||["","",""]})},[g]);const Te={deepFocus:((et=N==null?void 0:N.deep_work_hours)==null?void 0:et.toString())||"",lightFocus:((tt=N==null?void 0:N.light_work_hours)==null?void 0:tt.toString())||""},De=s=>{if(N){const i=h(u({},N),{deep_work_hours:parseFloat(s.deepFocus)||0,light_work_hours:parseFloat(s.lightFocus)||0});E(i),W.updateDailyHabits(i)}},[Ie,fe]=L.useState(!1),[Be,Oe]=L.useState("");L.useEffect(()=>{let s=!0,i;const c=()=>C(void 0,null,function*(){if(s){console.log("AdminLifeLockDay: Loading LifeLock data for date:",l),d(!0),i=setTimeout(()=>{s&&(console.error("AdminLifeLockDay: Data loading timed out after 10 seconds"),b(null),w(null),S(null),E(null),R(null),d(!1))},1e4);try{const m=yield W.getAllDailyData(r);if(!s)return;clearTimeout(i),console.log("AdminLifeLockDay: Loaded LifeLock data successfully:",m),b(m.routine),w(m.workout),S(m.health),E(m.habits),R(m.reflections)}catch(m){console.error("AdminLifeLockDay: Failed to load LifeLock data:",m),clearTimeout(i),s&&(b(null),w(null),S(null),E(null),R(null))}finally{s&&(clearTimeout(i),d(!1))}}}),p=setTimeout(()=>{c()},100);return()=>{s=!1,clearTimeout(p),i&&clearTimeout(i)}},[l]);const He=s=>{const i=s==="next"?_s(r,1):Cs(r,1);n(`/admin/life-lock/day?date=${B(i,"yyyy-MM-dd")}`)},le=(s,i,c)=>{const p=s.map(m=>m.id===c?h(u({},m),{completed:!m.completed}):m);i(p)},de=(s,i,c,p,m)=>{const T=s.map(Y=>Y.id===c?h(u({},Y),{[p]:m}):Y);i(T)},Ft=s=>C(void 0,null,function*(){const i=s.toLowerCase();if((i.includes("morning routine")||i.includes("morning"))&&(i.includes("complete")||i.includes("check")||i.includes("done"))){const p=A.map(m=>h(u({},m),{completed:!0}));return $(p),"Morning routine completed! 🌅"}if(i.includes("deep focus")||i.includes("focus task")){if(i.includes("delete all")||i.includes("clear all"))return"Deep focus tasks cleared! 🧠";if(i.includes("complete")){for(const p of P)p.completed||(yield x(p.id,!0));return"Deep focus tasks completed! 🎯"}}if((i.includes("workout")||i.includes("exercise"))&&(i.includes("complete")||i.includes("done"))){const p=K.map(m=>h(u({},m),{completed:!0}));return oe(p),"Workout completed! 💪"}if((i.includes("health")||i.includes("supplement"))&&(i.includes("complete")||i.includes("done"))){const p=Z.map(m=>h(u({},m),{completed:!0}));return ce(p),"Health items completed! 🌱"}const c=i.match(/(\d+)\s*hours?/);if(c&&i.includes("log")){const p=c[1];if(i.includes("deep"))return De(h(u({},Te),{deepFocus:p})),`Logged ${p} hours of deep focus! 🧠`}return"I can help you complete morning routine, tasks, workout, or log hours. What would you like?"}),Ge=()=>C(void 0,null,function*(){if(!ne.isSpeechRecognitionSupported()){alert("Speech recognition not supported in your browser");return}if(Ie){ne.stopListening(),fe(!1);return}fe(!0);try{yield ne.startListening((s,i)=>C(void 0,null,function*(){if(Oe(s),i&&s){fe(!1);const c=yield Ft(s),p=document.createElement("div");p.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",p.textContent=c,document.body.appendChild(p),setTimeout(()=>p.remove(),3e3),Oe("")}}),s=>{console.error("Voice error:",s),fe(!1),alert("Voice recognition error: "+s)},{language:"en-US",continuous:!1,interimResults:!0})}catch(s){fe(!1),console.error("Failed to start voice input:",s)}}),Mt=(s,i,c)=>{try{switch(i){case"clear":(s==="all"||s==="deepFocus")&&G([]),(s==="all"||s==="lightFocus")&&M(m=>m.map(T=>h(u({},T),{completed:!1,title:""}))),(s==="all"||s==="morningRoutine")&&$(m=>m.map(T=>h(u({},T),{completed:!1}))),(s==="all"||s==="workout")&&oe(m=>m.map(T=>h(u({},T),{completed:!1,logged:""}))),(s==="all"||s==="health")&&ce(m=>m.map(T=>h(u({},T),{completed:!1})));break;case"complete_all":(s==="all"||s==="deepFocus")&&P.forEach(m=>{m.completed||x(m.id,!0)}),(s==="all"||s==="lightFocus")&&M(m=>m.map(T=>h(u({},T),{completed:!0}))),(s==="all"||s==="morningRoutine")&&$(m=>m.map(T=>h(u({},T),{completed:!0}))),(s==="all"||s==="workout")&&oe(m=>m.map(T=>h(u({},T),{completed:!0}))),(s==="all"||s==="health")&&ce(m=>m.map(T=>h(u({},T),{completed:!0})));break;case"add":if(c&&s==="deepFocus"){const m=c.map(T=>({id:T.id,title:T.title,completed:!1,notes:T.notes}));M(T=>{const Y=[...T];return m.forEach((Le,Fe)=>{Fe<Y.length&&!Y[Fe].title&&(Y[Fe]=Le)}),Y})}break;default:console.log(`Unknown action: ${i}`)}const p=document.createElement("div");p.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",p.textContent="✅ AI Command executed successfully!",document.body.appendChild(p),setTimeout(()=>p.remove(),2e3)}catch(p){console.error("AI task update error:",p);const m=document.createElement("div");m.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",m.textContent="❌ Failed to execute AI command",document.body.appendChild(m),setTimeout(()=>m.remove(),2e3)}},At=A.filter(s=>s.completed).length/A.length*100,Et=P.length>0?P.filter(s=>s.status==="done").length/P.length*100:0,Pt=j.filter(s=>s.completed&&s.title).length/j.filter(s=>s.title).length*100||0,Vt=K.filter(s=>s.completed).length/K.length*100,Rt=Z.filter(s=>s.completed).length/Z.length*100,Qe=[{id:"morning",label:"Morning Routine",completed:A.filter(s=>s.completed).length,total:A.length,color:"warning"},{id:"deepFocus",label:"Deep Focus",completed:P.filter(s=>s.status==="done").length,total:P.length,color:"default"},{id:"lightFocus",label:"Light Focus",completed:j.filter(s=>s.completed&&s.title).length,total:j.filter(s=>s.title).length,color:"success"},{id:"workout",label:"Workout",completed:K.filter(s=>s.completed).length,total:K.length,color:"danger"},{id:"health",label:"Health",completed:Z.filter(s=>s.completed).length,total:Z.length,color:"default"}],Ke=s=>{ie(s),D(!0)},Je=s=>{const i={id:s.id,title:s.title,description:s.description||"Light focus task",status:s.completed?"done":"in_progress",priority:"medium",category:"light_focus",work_type:"Light Focus",focus_level:"low",energy_level:"medium",estimated_duration:1,actual_duration:0,due_date:null,time_block_start:null,time_block_end:null,project_id:null,tags:[],subtasks:[],notes:"",flow_state_potential:"low",effort_points:1,dependencies:[],context_switching_cost:"low",assigned_to:null,created_by:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),completed_at:s.completed?new Date().toISOString():null,completed:s.completed};ie(i),D(!0)};return o?e.jsx(ot,{children:e.jsx("div",{className:"min-h-screen w-full bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-lg",children:"Loading your LifeLock data..."})})}):e.jsxs(ot,{children:[e.jsx("div",{className:"min-h-screen w-full bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-2 sm:p-4 md:p-6 lg:p-8 space-y-4 sm:space-y-6",children:[e.jsx(ht,{noPadding:!0,children:e.jsxs("div",{className:"space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>n("/admin/life-lock"),className:"text-gray-300 hover:text-white hover:bg-gray-700 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx(ds,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Calendar"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:Ge,className:`px-3 py-2 transition-all ${Ie?"bg-red-600 text-white border-red-600 hover:bg-red-700 animate-pulse":"bg-yellow-600 text-white border-yellow-600 hover:bg-yellow-700"}`,children:Ie?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Listening..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Voice"})]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3 bg-gray-800/50 rounded-lg p-3 sm:p-4",children:[e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>He("prev"),className:"text-gray-300 hover:text-white hover:bg-gray-700 p-2 sm:p-3 rounded-full","aria-label":"Previous day",children:e.jsx(ms,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-white font-semibold text-sm sm:text-base",children:B(r,"EEEE")}),e.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:B(r,"MMMM d, yyyy")})]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>He("next"),className:"text-gray-300 hover:text-white hover:bg-gray-700 p-2 sm:p-3 rounded-full","aria-label":"Next day",children:e.jsx(Ce,{className:"h-5 w-5"})})]})]})}),Be&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-900/20 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-yellow-200 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Listening:"})," ",Be]})}),e.jsx(ht,{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:Qe.slice(0,4).map(s=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-white font-semibold text-sm",children:s.label}),e.jsxs("div",{className:"text-gray-400 text-xs mt-1",children:[s.completed,"/",s.total]}),e.jsx("div",{className:"w-full bg-gray-700/60 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-green-500 h-2 rounded-full transition-all duration-500",style:{width:`${s.total>0?s.completed/s.total*100:0}%`}})})]},s.id))})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Rs,{sections:Qe})})]})}),e.jsx(Es,{columns:{mobile:1,tablet:2,desktop:3},gap:"md",items:[{id:"morning-routine",priority:1,span:"full",content:e.jsxs(me,{title:"Morning Routine",icon:us,emoji:"🌅",color:"yellow",progress:At,isCollapsible:!0,showCollapseWhenComplete:!0,completedTasksCount:A.filter(s=>s.completed).length,totalTasksCount:A.length,headerContent:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-yellow-300 mb-1.5 sm:mb-2 text-sm sm:text-base",children:"Coding My Brain"}),e.jsx("p",{className:"text-gray-200 text-xs sm:text-sm leading-relaxed",children:"I am Shaan Sisodia. I have been given divine purpose, and on this mission, temptation awaits on either side of the path. When I give in to temptation, I shall know I am astray. I will bring my family to a new age of freedom. I will not be distracted from the path."})]}),e.jsx(ke,{color:"yellow"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-yellow-300 mb-1.5 sm:mb-2 text-sm sm:text-base",children:"Flow State Rules"}),e.jsxs("ul",{className:"text-gray-200 text-xs sm:text-sm space-y-0.5 sm:space-y-1",children:[e.jsx("li",{children:"• No use of apps other than Notion."}),e.jsx("li",{children:"• No vapes or drugs (including weed)."}),e.jsx("li",{children:"• No more than 5 seconds until the next action."})]})]})]})}),children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"space-y-2",children:A.map(s=>e.jsx(ue,{task:{id:s.id,title:s.title,completed:s.completed,description:s.description,logField:s.logField},onSwipeComplete:()=>le(A,$,s.id),onSwipeEdit:()=>console.log("Edit task:",s.id),onUpdate:(i,c)=>de(A,$,s.id,i,c),color:"yellow"},s.id))})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Ee,{tasks:A.map(s=>({id:s.id,title:s.title,completed:s.completed,description:s.description,logField:s.logField})),onToggle:s=>le(A,$,s),onUpdate:(s,i,c)=>de(A,$,s,i,c),color:"yellow",variant:"default"})})]})},{id:"work-sessions",priority:2,span:"full",content:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(me,{title:"Deep Focus Work Session",description:"Tasks that require the most focus to create the most value. (8 hr minimum)",icon:yt,emoji:"🧠",color:"orange",progress:Et,headerContent:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white font-medium text-xs sm:text-sm block mb-1",children:"Total Work Hours Logged:"}),e.jsx(V,{value:Te.deepFocus,onChange:s=>De(i=>h(u({},i),{deepFocus:s.target.value})),className:"bg-gray-700 border-gray-600 text-white text-xs sm:text-sm h-8 sm:h-10",placeholder:"Enter hours..."})]}),e.jsx(ke,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:"Main Tasks:"}),e.jsx(gt,{workType:"deep_focus",onTasksImport:O,currentDate:r,existingTaskIds:P.map(s=>s.id)})]})]}),children:J?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-400",children:"Loading today's tasks..."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"space-y-2",children:P.length>0?P.map(s=>e.jsx(ue,{task:{id:s.id,title:s.title,completed:s.status==="done",description:s.description,priority:s.priority,category:s.category,estimatedDuration:s.estimated_duration},onSwipeComplete:()=>x(s.id,s.status!=="done"),onSwipeEdit:()=>Ke(s),color:"orange",showPriority:!0,showDuration:!0},s.id)):e.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No tasks found for today. Tasks will appear here when created in the task management system."})})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Ee,{tasks:P.map(s=>({id:s.id,title:s.title,completed:s.status==="done",priority:s.priority,category:s.category,description:s.description,dueDate:s.due_date,workType:s.work_type,focusLevel:s.focus_level,estimatedDuration:s.estimated_duration,effortPoints:s.effort_points})),onToggle:s=>{var i;return x(s,((i=P.find(c=>c.id===s))==null?void 0:i.status)!=="done")},onClick:s=>Ke(P.find(i=>i.id===s.id)),color:"orange",variant:"default",emptyMessage:"No tasks found for today. Tasks will appear here when created in the task management system."})})]})}),e.jsxs(me,{title:"Light Focus Work Session",description:"Tackle tasks that don't require as much cognitive load.",icon:gs,emoji:"☕",color:"green",progress:Pt,headerContent:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-white font-medium text-xs block mb-1",children:"Hours Logged:"}),e.jsx(V,{value:Te.lightFocus,onChange:s=>De(i=>h(u({},i),{lightFocus:s.target.value})),className:"bg-gray-700 border-gray-600 text-white text-xs h-7 w-16",placeholder:"0"})]}),e.jsx(gt,{workType:"light_focus",onTasksImport:re,currentDate:r,existingTaskIds:j.map(s=>s.id).filter(s=>typeof s=="string")})]})}),children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"space-y-2",children:j.map(s=>e.jsx(ue,{task:{id:s.id,title:s.title,completed:s.completed,isEditable:!0},onSwipeComplete:()=>le(j,M,s.id),onSwipeEdit:()=>Je(s),onUpdate:(i,c)=>de(j,M,s.id,i,c),color:"green",variant:"editable",placeholder:"Enter task..."},s.id))})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"space-y-1.5",children:j.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-green-900/10 border border-green-700/30 rounded-md hover:bg-green-900/15 transition-colors cursor-pointer",onClick:()=>Je(s),children:[e.jsx(se,{checked:s.completed,onCheckedChange:()=>le(j,M,s.id),className:"border-green-600 data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600 h-4 w-4 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx(V,{value:s.title,onChange:i=>de(j,M,s.id,"title",i.target.value),className:"bg-transparent border-none text-white p-0 focus:ring-0 text-sm h-6",placeholder:"Enter task..."})})]},s.id))})})]})]})},{id:"fitness-health",priority:3,span:"full",content:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(me,{title:"Home Workout Objective",icon:hs,emoji:"🏋️‍♂️",color:"red",progress:Vt,isCollapsible:!0,showCollapseWhenComplete:!0,completedTasksCount:K.filter(s=>s.completed).length,totalTasksCount:K.length,children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"space-y-2",children:K.map(s=>e.jsx(ue,{task:{id:s.id,title:s.title,completed:s.completed,description:s.target,logField:"Log your result...",logValue:s.logged},onSwipeComplete:()=>le(K,oe,s.id),onSwipeEdit:()=>console.log("Edit task:",s.id),onUpdate:(i,c)=>de(K,oe,s.id,i==="logValue"?"logged":i,c),color:"red",variant:"workout",showLog:!0},s.id))})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Ee,{tasks:K.map(s=>({id:s.id,title:s.title,completed:s.completed,description:s.target,logField:"Log your result...",logValue:s.logged})),onToggle:s=>le(K,oe,s),onUpdate:(s,i,c)=>de(K,oe,s,i==="logValue"?"logged":i,c),color:"red",variant:"default"})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(me,{title:"Health & Habits",icon:xs,emoji:"💚",color:"pink",progress:Rt,isCollapsible:!0,showCollapseWhenComplete:!1,completedTasksCount:Z.filter(s=>s.completed).length,totalTasksCount:Z.length,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-2 text-sm sm:text-base",children:"Health Non-Negotiables"}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"space-y-1.5",children:Z.map(s=>e.jsx(ue,{task:{id:s.id,title:s.title,completed:s.completed},onSwipeComplete:()=>le(Z,ce,s.id),onSwipeEdit:()=>console.log("Edit task:",s.id),color:"pink",variant:"compact"},s.id))})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Z.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-pink-900/10 border border-pink-700/30 rounded-md hover:bg-pink-900/15 transition-colors cursor-pointer",onClick:()=>le(Z,ce,s.id),children:[e.jsx(se,{checked:s.completed,onCheckedChange:()=>le(Z,ce,s.id),className:"border-pink-600 data-[state=checked]:bg-pink-600 data-[state=checked]:border-pink-600 h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:`text-sm flex-1 ${s.completed?"line-through text-gray-500":"text-gray-300"}`,children:s.title})]},s.id))})})]}),e.jsx(ke,{className:"my-4 sm:my-6"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-white mb-3 sm:mb-4 text-sm sm:text-base",children:"Screen Time & Habits"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs sm:text-sm font-medium block mb-1",children:"Bullshit Content (1 hr max):"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{value:xe.bullshitContentTime,onChange:s=>pe(i=>h(u({},i),{bullshitContentTime:s.target.value})),className:"bg-gray-800 border border-gray-600 text-white text-xs sm:text-sm h-8 sm:h-10 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",placeholder:"0 min"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const s=parseInt(xe.bullshitContentTime||"0"),i=Math.max(0,s-15);pe(c=>h(u({},c),{bullshitContentTime:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2 min-w-[32px]",children:"-15"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const i=parseInt(xe.bullshitContentTime||"0")+15;pe(c=>h(u({},c),{bullshitContentTime:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2 min-w-[32px]",children:"+15"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[e.jsx(se,{checked:xe.noWeed,onCheckedChange:s=>pe(i=>h(u({},i),{noWeed:!!s})),className:"mt-0.5"}),e.jsx("span",{className:"text-white text-xs sm:text-sm leading-tight",children:"No Weed, No Vapes"})]}),e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[e.jsx(se,{checked:xe.noScrolling,onCheckedChange:s=>pe(i=>h(u({},i),{noScrolling:!!s})),className:"mt-0.5"}),e.jsx("span",{className:"text-white text-xs sm:text-sm leading-tight",children:"No Scrolling"})]})]})]})]}),e.jsx(ke,{className:"my-4 sm:my-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2 text-sm sm:text-base",children:"Daily Calorie & Macro Tracker"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs font-medium mb-1 block",children:"🍳 Breakfast:"}),e.jsx("div",{className:"bg-black/20 rounded-md p-2 border border-gray-700/50",children:e.jsx(V,{value:be.breakfast,onChange:s=>we(i=>h(u({},i),{breakfast:s.target.value})),className:"bg-transparent border-none text-white text-sm h-6 w-full focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"What did you eat..."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs font-medium mb-1 block",children:"🥙 Lunch:"}),e.jsx("div",{className:"bg-black/20 rounded-md p-2 border border-gray-700/50",children:e.jsx(V,{value:be.lunch,onChange:s=>we(i=>h(u({},i),{lunch:s.target.value})),className:"bg-transparent border-none text-white text-sm h-6 w-full focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"What did you eat..."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs font-medium mb-1 block",children:"🍽️ Dinner:"}),e.jsx("div",{className:"bg-black/20 rounded-md p-2 border border-gray-700/50",children:e.jsx(V,{value:be.dinner,onChange:s=>we(i=>h(u({},i),{dinner:s.target.value})),className:"bg-transparent border-none text-white text-sm h-6 w-full focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"What did you eat..."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs font-medium mb-1 block",children:"🍿 Snacks:"}),e.jsx("div",{className:"bg-black/20 rounded-md p-2 border border-gray-700/50",children:e.jsx(V,{value:be.snacks,onChange:s=>we(i=>h(u({},i),{snacks:s.target.value})),className:"bg-transparent border-none text-white text-sm h-6 w-full focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"Any snacks..."})})]})]}),e.jsx("h4",{className:"font-semibold text-white mb-2 text-sm",children:"Daily Totals:"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs sm:text-sm font-medium",children:"Total Calories:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(V,{value:ee.calories,onChange:s=>te(i=>h(u({},i),{calories:s.target.value})),className:"bg-gray-800 border border-gray-600 text-white text-xs sm:text-sm h-8 sm:h-10 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",placeholder:"0"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const s=parseInt(ee.calories||"0"),i=Math.max(0,s-100);te(c=>h(u({},c),{calories:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"-100"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const i=parseInt(ee.calories||"0")+100;te(c=>h(u({},c),{calories:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"+100"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs sm:text-sm font-medium",children:"Total Protein:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(V,{value:ee.protein,onChange:s=>te(i=>h(u({},i),{protein:s.target.value})),className:"bg-gray-800 border border-gray-600 text-white text-xs sm:text-sm h-8 sm:h-10 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",placeholder:"0g"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const s=parseInt(ee.protein||"0"),i=Math.max(0,s-10);te(c=>h(u({},c),{protein:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"-10"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const i=parseInt(ee.protein||"0")+10;te(c=>h(u({},c),{protein:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"+10"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs sm:text-sm font-medium",children:"Total Carbs:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(V,{value:ee.carbs,onChange:s=>te(i=>h(u({},i),{carbs:s.target.value})),className:"bg-gray-800 border border-gray-600 text-white text-xs sm:text-sm h-8 sm:h-10 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",placeholder:"0g"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const s=parseInt(ee.carbs||"0"),i=Math.max(0,s-10);te(c=>h(u({},c),{carbs:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"-10"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const i=parseInt(ee.carbs||"0")+10;te(c=>h(u({},c),{carbs:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"+10"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white text-xs sm:text-sm font-medium",children:"Total Fats:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(V,{value:ee.fats,onChange:s=>te(i=>h(u({},i),{fats:s.target.value})),className:"bg-gray-800 border border-gray-600 text-white text-xs sm:text-sm h-8 sm:h-10 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",placeholder:"0g"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const s=parseInt(ee.fats||"0"),i=Math.max(0,s-5);te(c=>h(u({},c),{fats:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"-5"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const i=parseInt(ee.fats||"0")+5;te(c=>h(u({},c),{fats:i.toString()}))},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-1 min-w-[28px]",children:"+5"})]})]})]})]})]})]})})]})},{id:"nightly-checkout",priority:7,span:"full",content:e.jsx(me,{title:"Nightly Check-Out",icon:ps,color:"indigo",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-green-400 text-sm",children:"✓"})}),e.jsx("h4",{className:"font-semibold text-white text-base",children:"What went well today?"})]}),e.jsx("div",{className:"space-y-2",children:z.wentWell.map((s,i)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-400 text-sm mt-1",children:"•"}),e.jsx(V,{value:s,onChange:c=>{const p=[...z.wentWell];if(p[i]=c.target.value,H(m=>h(u({},m),{wentWell:p})),g){const m=h(u({},g),{went_well:p});W.updateDailyReflections(m)}if(i===z.wentWell.length-1&&c.target.value.trim()!==""){const m=[...p,""];H(T=>h(u({},T),{wentWell:m}))}},className:"bg-transparent border-none text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"Type something positive that happened today..."})]},i))})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-orange-400 text-sm",children:"⚡"})}),e.jsx("h4",{className:"font-semibold text-white text-base",children:"Even better if..."})]}),e.jsx("div",{className:"space-y-2",children:z.evenBetterIf.map((s,i)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-orange-400 text-sm mt-1",children:"•"}),e.jsx(V,{value:s,onChange:c=>{const p=[...z.evenBetterIf];if(p[i]=c.target.value,H(m=>h(u({},m),{evenBetterIf:p})),g){const m=h(u({},g),{even_better_if:p});W.updateDailyReflections(m)}if(i===z.evenBetterIf.length-1&&c.target.value.trim()!==""){const m=[...p,""];H(T=>h(u({},T),{evenBetterIf:m}))}},className:"bg-transparent border-none text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"What could have gone better or improved?"})]},i))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-purple-400 text-sm",children:"😴"})}),e.jsx("h4",{className:"font-semibold text-white text-base",children:"Sleep Tracking"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Bedtime:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{type:"time",value:z.bedtime||"",onChange:s=>{if(H(i=>h(u({},i),{bedtime:s.target.value})),g){const i=h(u({},g),{bedtime:s.target.value});W.updateDailyReflections(i)}},className:"bg-gray-800 border border-gray-600 text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const i=new Date().toTimeString().slice(0,5);if(H(c=>h(u({},c),{bedtime:i})),g){const c=h(u({},g),{bedtime:i});W.updateDailyReflections(c)}},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2",children:"Now"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Sleep Quality:"}),e.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsx(F,{size:"sm",variant:parseInt(z.sleepQuality)===s?"default":"outline",onClick:()=>{if(H(i=>h(u({},i),{sleepQuality:s.toString()})),g){const i=h(u({},g),{sleep_quality:s});W.updateDailyReflections(i)}},className:`w-8 h-8 text-xs ${parseInt(z.sleepQuality)===s?"bg-purple-500 text-white border-purple-500":"border-gray-600 text-gray-300 hover:bg-gray-700"}`,children:s},s))})]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-blue-400 text-sm",children:"🧘"})}),e.jsx("h4",{className:"font-semibold text-white text-base",children:"Meditation"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs",children:"Duration (minutes):"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{type:"number",value:z.meditationTime||"",onChange:s=>{if(H(i=>h(u({},i),{meditationTime:s.target.value})),g){const i=h(u({},g),{meditation_minutes:parseInt(s.target.value)||0});W.updateDailyReflections(i)}},className:"bg-gray-800 border border-gray-600 text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-gray-600 rounded px-2",placeholder:"0"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const s=parseInt(z.meditationTime||"0"),i=Math.max(0,s-5);if(H(c=>h(u({},c),{meditationTime:i.toString()})),g){const c=h(u({},g),{meditation_minutes:i});W.updateDailyReflections(c)}},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2 min-w-[28px]",children:"-5"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const i=parseInt(z.meditationTime||"0")+5;if(H(c=>h(u({},c),{meditationTime:i.toString()})),g){const c=h(u({},g),{meditation_minutes:i});W.updateDailyReflections(c)}},className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 text-xs h-8 px-2 min-w-[28px]",children:"+5"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{checked:z.meditated||!1,onCheckedChange:s=>{if(H(i=>h(u({},i),{meditated:!!s})),g){const i=h(u({},g),{meditated:!!s});W.updateDailyReflections(i)}}}),e.jsx("span",{className:"text-white text-xs",children:"Meditated today"})]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-400 text-sm",children:"📋"})}),e.jsx("h4",{className:"font-semibold text-white text-base",children:"Tomorrow"})]}),e.jsx("div",{className:"space-y-2",children:(z.tomorrowTasks||["","",""]).map((s,i)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-yellow-400 text-sm mt-1",children:"•"}),e.jsx(V,{value:s,onChange:c=>{const p=[...z.tomorrowTasks||["","",""]];if(p[i]=c.target.value,H(m=>h(u({},m),{tomorrowTasks:p})),g){const m=h(u({},g),{tomorrow_tasks:p});W.updateDailyReflections(m)}if(i===(z.tomorrowTasks||["","",""]).length-1&&c.target.value.trim()!==""){const m=[...p,""];H(T=>h(u({},T),{tomorrowTasks:m}))}},className:"bg-transparent border-none text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"Priority task for tomorrow..."})]},i))})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-blue-400 text-sm",children:"💡"})}),e.jsx("h4",{className:"font-semibold text-white text-base",children:"Deep Analysis & Insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-400 text-xs mb-3 flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:"Reflection on improvements"})]}),e.jsx("div",{className:"space-y-2",children:z.analysis.map((s,i)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-400 text-sm mt-1",children:"•"}),e.jsx(V,{value:s,onChange:c=>{const p=[...z.analysis];if(p[i]=c.target.value,H(m=>h(u({},m),{analysis:p})),g){const m=h(u({},g),{analysis:p});W.updateDailyReflections(m)}if(i===z.analysis.length-1&&c.target.value.trim()!==""){const m=[...p,""];H(T=>h(u({},T),{analysis:m}))}},className:"bg-transparent border-none text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"How can I improve in the areas mentioned above?"})]},i))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-400 text-xs mb-3 flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),e.jsx("span",{children:"Patterns & behaviors"})]}),e.jsx("div",{className:"space-y-2",children:z.patterns.map((s,i)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-purple-400 text-sm mt-1",children:"•"}),e.jsx(V,{value:s,onChange:c=>{const p=[...z.patterns];if(p[i]=c.target.value,H(m=>h(u({},m),{patterns:p})),g){const m=h(u({},g),{patterns:p});W.updateDailyReflections(m)}if(i===z.patterns.length-1&&c.target.value.trim()!==""){const m=[...p,""];H(T=>h(u({},T),{patterns:m}))}},className:"bg-transparent border-none text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"What patterns am I noticing in my behavior?"})]},i))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-400 text-xs mb-3 flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{children:"Environmental changes"})]}),e.jsx("div",{className:"space-y-2",children:z.changes.map((s,i)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-400 text-sm mt-1",children:"•"}),e.jsx(V,{value:s,onChange:c=>{const p=[...z.changes];if(p[i]=c.target.value,H(m=>h(u({},m),{changes:p})),g){const m=h(u({},g),{changes:p});W.updateDailyReflections(m)}if(i===z.changes.length-1&&c.target.value.trim()!==""){const m=[...p,""];H(T=>h(u({},T),{changes:m}))}},className:"bg-transparent border-none text-white text-sm h-8 flex-1 focus:ring-0 focus:outline-none focus:border-none p-0 shadow-none",placeholder:"What changes can I make to my environment?"})]},i))})]})]})]})]})})}]})]})}),e.jsx(Ls,{currentTasks:{deepFocus:P.map(s=>({id:s.id,title:s.title,completed:s.completed,priority:s.priority,category:"deep_focus",notes:s.description})),lightFocus:j,morningRoutine:A,workout:K,health:Z},onTasksUpdate:Mt}),e.jsx(Ts,{onQuickAdd:()=>console.log("Quick add task"),onVoiceInput:Ge,onTodayView:()=>n("/admin/life-lock"),onQuickTimer:()=>console.log("Quick timer"),onQuickPhoto:()=>console.log("Quick photo")}),e.jsx($e,{open:ae,onOpenChange:D,children:e.jsxs(ze,{className:"bg-gray-900 border-gray-700 text-white max-w-2xl",children:[e.jsxs(qe,{children:[e.jsxs(We,{className:"text-xl font-bold flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),e.jsx("span",{children:k==null?void 0:k.title})]}),e.jsxs(Dt,{className:"text-gray-300",children:[k==null?void 0:k.work_type," • ",k==null?void 0:k.category]})]}),k&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{variant:"outline",className:_("text-sm",k.status==="done"?"border-green-500 text-green-400 bg-green-500/10":"border-orange-500 text-orange-400 bg-orange-500/10"),children:k.status==="done"?"Completed":"In Progress"}),e.jsxs(X,{variant:"outline",className:_("text-sm",k.priority==="high"?"border-red-500 text-red-400 bg-red-500/10":k.priority==="medium"?"border-yellow-500 text-yellow-400 bg-yellow-500/10":"border-green-500 text-green-400 bg-green-500/10"),children:[k.priority," Priority"]})]}),e.jsx(F,{onClick:()=>D(!1),variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:e.jsx(kt,{className:"h-4 w-4"})})]}),k.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-gray-200",children:"Description"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:k.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide font-medium",children:"Focus Level"}),e.jsx("p",{className:"text-white capitalize",children:k.focus_level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide font-medium",children:"Energy Level"}),e.jsx("p",{className:"text-white capitalize",children:k.energy_level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide font-medium",children:"Estimated Duration"}),e.jsxs("p",{className:"text-white",children:[k.estimated_duration,"h"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide font-medium",children:"Flow State Potential"}),e.jsx("p",{className:"text-white capitalize",children:k.flow_state_potential})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide font-medium",children:"Effort Points"}),e.jsx("p",{className:"text-white",children:k.effort_points})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide font-medium",children:"Context Switch Cost"}),e.jsx("p",{className:"text-white capitalize",children:k.context_switching_cost})]})]})]}),(k.time_block_start||k.time_block_end)&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-gray-200",children:"Time Block"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsxs("span",{children:[k.time_block_start&&new Date(k.time_block_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),k.time_block_start&&k.time_block_end&&" - ",k.time_block_end&&new Date(k.time_block_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),k.due_date&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-gray-200",children:"Due Date"}),e.jsx("p",{className:"text-gray-300 text-sm",children:new Date(k.due_date).toLocaleDateString()})]}),k.tags&&k.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-gray-200",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.tags.map((s,i)=>e.jsxs(X,{variant:"outline",className:"text-xs border-gray-600 text-gray-300",children:[e.jsx(fs,{className:"h-3 w-3 mr-1"}),s]},i))})]}),k.subtasks&&k.subtasks.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-gray-200",children:"Subtasks"}),e.jsx("div",{className:"space-y-2",children:k.subtasks.map((s,i)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(bt,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{className:"text-gray-300",children:s})]},i))})]}),k.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-gray-200",children:"Notes"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:k.notes})]}),e.jsx("div",{className:"pt-4 border-t border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(k.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Updated:"})," ",new Date(k.updated_at).toLocaleString()]}),k.completed_at&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Completed:"})," ",new Date(k.completed_at).toLocaleString()]})]})})]})]})})]})};export{sa as default};
