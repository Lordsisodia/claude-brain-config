import{r as i}from"./react-core-K6OrF0b-.js";import{u as P,d as _,h as L,k as F}from"./ui-navigation-XtA72rrq.js";import{t as W}from"./ui-overlay-Cg06P0_6.js";import{j as v,S as B}from"./ui-core-DJeubg4C.js";function A(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function H(...e){return t=>{let n=!1;const r=e.map(o=>{const s=A(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():A(e[o],null)}}}}function S(...e){return i.useCallback(H(...e),e)}function w(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function K(e,t){return i.useReducer((n,r)=>t[n][r]??n,e)}var M=e=>{const{present:t,children:n}=e,r=q(t),o=typeof n=="function"?n({present:r.isPresent}):i.Children.only(n),s=S(r.ref,z(o));return typeof n=="function"||r.isPresent?i.cloneElement(o,{ref:s}):null};M.displayName="Presence";function q(e){const[t,n]=i.useState(),r=i.useRef({}),o=i.useRef(e),s=i.useRef("none"),p=e?"mounted":"unmounted",[c,u]=K(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const a=E(r.current);s.current=c==="mounted"?a:"none"},[c]),P(()=>{const a=r.current,d=o.current;if(d!==e){const f=s.current,l=E(a);e?u("MOUNT"):l==="none"||a?.display==="none"?u("UNMOUNT"):u(d&&f!==l?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),P(()=>{if(t){let a;const d=t.ownerDocument.defaultView??window,h=l=>{const y=E(r.current).includes(l.animationName);if(l.target===t&&y&&(u("ANIMATION_END"),!o.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",a=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},f=l=>{l.target===t&&(s.current=E(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(a),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(a=>{a&&(r.current=getComputedStyle(a)),n(a)},[])}}function E(e){return e?.animationName||"none"}function z(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var X=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],O=X.reduce((e,t)=>{const n=i.forwardRef((r,o)=>{const{asChild:s,...p}=r,c=s?B:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(c,{...p,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),g="Checkbox",[V,te]=_(g),[$,G]=V(g),I=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:s,required:p,disabled:c,value:u="on",onCheckedChange:a,form:d,...h}=e,[f,l]=i.useState(null),b=S(t,m=>l(m)),y=i.useRef(!1),x=f?d||!!f.closest("form"):!0,[N=!1,R]=L({prop:o,defaultProp:s,onChange:a}),U=i.useRef(N);return i.useEffect(()=>{const m=f?.form;if(m){const k=()=>R(U.current);return m.addEventListener("reset",k),()=>m.removeEventListener("reset",k)}},[f,R]),v.jsxs($,{scope:n,state:N,disabled:c,children:[v.jsx(O.button,{type:"button",role:"checkbox","aria-checked":C(N)?"mixed":N,"aria-required":p,"data-state":D(N),"data-disabled":c?"":void 0,disabled:c,value:u,...h,ref:b,onKeyDown:w(e.onKeyDown,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:w(e.onClick,m=>{R(k=>C(k)?!0:!k),x&&(y.current=m.isPropagationStopped(),y.current||m.stopPropagation())})}),x&&v.jsx(J,{control:f,bubbles:!y.current,name:r,value:u,checked:N,required:p,disabled:c,form:d,style:{transform:"translateX(-100%)"},defaultChecked:C(s)?!1:s})]})});I.displayName=g;var T="CheckboxIndicator",j=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,s=G(T,n);return v.jsx(M,{present:r||C(s.state)||s.state===!0,children:v.jsx(O.span,{"data-state":D(s.state),"data-disabled":s.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});j.displayName=T;var J=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...s}=e,p=i.useRef(null),c=F(n),u=W(t);i.useEffect(()=>{const d=p.current,h=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&l){const b=new Event("click",{bubbles:r});d.indeterminate=C(n),l.call(d,C(n)?!1:n),d.dispatchEvent(b)}},[c,n,r]);const a=i.useRef(C(n)?!1:n);return v.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??a.current,...s,tabIndex:-1,ref:p,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function C(e){return e==="indeterminate"}function D(e){return C(e)?"indeterminate":e?"checked":"unchecked"}var ne=I,oe=j;export{oe as I,ne as R};
